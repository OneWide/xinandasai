{"version":3,"file":"user.4f57bbfa.js","sources":["../../src/views/system/user.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'system-user',\n})\n</script>\n<template>\r\n    <div>\r\n        <TableSearch :query=\"query\" :options=\"searchOpt\" :search=\"handleSearch\" />\r\n        <div class=\"container\">\r\n            <TableCustom :columns=\"columns\" :tableData=\"tableData\" :total=\"page.total\" :viewFunc=\"handleView\"\r\n                :delFunc=\"handleDelete\" :page-change=\"changePage\" :editFunc=\"handleEdit\">\r\n                <template #toolbarBtn>\r\n                    <el-button type=\"warning\" :icon=\"CirclePlusFilled\" @click=\"visible = true\">新增</el-button>\r\n                </template>\r\n            </TableCustom>\r\n\r\n        </div>\r\n        <el-dialog :title=\"isEdit ? '编辑' : '新增'\" v-model=\"visible\" width=\"700px\" destroy-on-close\r\n            :close-on-click-modal=\"false\" @close=\"closeDialog\">\r\n            <TableEdit :form-data=\"rowData\" :options=\"options\" :edit=\"isEdit\" :update=\"updateData\" />\r\n        </el-dialog>\r\n        <el-dialog title=\"查看详情\" v-model=\"visible1\" width=\"700px\" destroy-on-close>\r\n            <TableDetail :data=\"viewData\"></TableDetail>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"system-user\">\r\nimport { ref, reactive } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport { CirclePlusFilled } from '@element-plus/icons-vue';\r\nimport { User } from '@/types/user';\r\nimport { fetchUserData } from '@/api';\r\nimport TableCustom from '@/components/table-custom.vue';\r\nimport TableDetail from '@/components/table-detail.vue';\r\nimport TableSearch from '@/components/table-search.vue';\r\nimport { FormOption, FormOptionList } from '@/types/form-option';\r\n\r\n// 查询相关\r\nconst query = reactive({\r\n    name: '',\r\n});\r\nconst searchOpt = ref<FormOptionList[]>([\r\n    { type: 'input', label: '用户名：', prop: 'name' }\r\n])\r\nconst handleSearch = () => {\r\n    changePage(1);\r\n};\r\n\r\n// 表格相关\r\nlet columns = ref([\r\n    { type: 'index', label: '序号', width: 55, align: 'center' },\r\n    { prop: 'name', label: '用户名' },\r\n    { prop: 'phone', label: '手机号' },\r\n    { prop: 'role', label: '角色' },\r\n    { prop: 'operator', label: '操作', width: 250 },\r\n])\r\nconst page = reactive({\r\n    index: 1,\r\n    size: 10,\r\n    total: 0,\r\n})\r\nconst tableData = ref<User[]>([]);\r\nconst getData = async () => {\r\n    const res = await fetchUserData()\r\n    tableData.value = res.data.list;\r\n    page.total = res.data.pageTotal;\r\n};\r\ngetData();\r\n\r\nconst changePage = (val: number) => {\r\n    page.index = val;\r\n    getData();\r\n};\r\n\r\n// 新增/编辑弹窗相关\r\nlet options = ref<FormOption>({\r\n    labelWidth: '100px',\r\n    span: 12,\r\n    list: [\r\n        { type: 'input', label: '用户名', prop: 'name', required: true },\r\n        { type: 'input', label: '手机号', prop: 'phone', required: true },\r\n        { type: 'input', label: '密码', prop: 'password', required: true },\r\n        { type: 'input', label: '邮箱', prop: 'email', required: true },\r\n        { type: 'input', label: '角色', prop: 'role', required: true },\r\n    ]\r\n})\r\nconst visible = ref(false);\r\nconst isEdit = ref(false);\r\nconst rowData = ref({});\r\nconst handleEdit = (row: User) => {\r\n    rowData.value = { ...row };\r\n    isEdit.value = true;\r\n    visible.value = true;\r\n};\r\nconst updateData = () => {\r\n    closeDialog();\r\n    getData();\r\n};\r\n\r\nconst closeDialog = () => {\r\n    visible.value = false;\r\n    isEdit.value = false;\r\n};\r\n\r\n// 查看详情弹窗相关\r\nconst visible1 = ref(false);\r\nconst viewData = ref({\r\n    row: {},\r\n    list: []\r\n});\r\nconst handleView = (row: User) => {\r\n    viewData.value.row = { ...row }\r\n    viewData.value.list = [\r\n        {\r\n            prop: 'id',\r\n            label: '用户ID',\r\n        },\r\n        {\r\n            prop: 'name',\r\n            label: '用户名',\r\n        },\r\n        {\r\n            prop: 'password',\r\n            label: '密码',\r\n        },\r\n        {\r\n            prop: 'email',\r\n            label: '邮箱',\r\n        },\r\n        {\r\n            prop: 'phone',\r\n            label: '电话',\r\n        },\r\n        {\r\n            prop: 'role',\r\n            label: '角色',\r\n        },\r\n        {\r\n            prop: 'date',\r\n            label: '注册日期',\r\n        },\r\n    ]\r\n    visible1.value = true;\r\n};\r\n\r\n// 删除相关\r\nconst handleDelete = (row: User) => {\r\n    ElMessage.success('删除成功');\r\n}\r\n</script>\r\n\r\n<style scoped></style>"],"names":["__default__","defineComponent","query","reactive","searchOpt","ref","handleSearch","changePage","columns","page","tableData","getData","res","fetchUserData","val","options","visible","isEdit","rowData","handleEdit","row","updateData","closeDialog","visible1","viewData","handleView","handleDelete","ElMessage"],"mappings":"yxBAEAA,EAAAC,EAAA,CAA+B,KAAA,aAE/B,CAAA,sBAoCA,MAAAC,EAAAC,EAAA,CAAuB,KAAA,EACb,CAAA,EAEVC,EAAAC,EAAA,CAAwC,CAAA,KAAA,QAAA,MAAA,2BAAA,KAAA,MAAA,CACS,CAAA,EAEjDC,EAAA,IAAA,CACIC,EAAA,CAAA,CAAY,EAIhB,IAAAC,EAAAH,EAAA,CAAkB,CAAA,KAAA,QAAA,MAAA,eAAA,MAAA,GAAA,MAAA,QAAA,EAC2C,CAAA,KAAA,OAAA,MAAA,oBAAA,EAC5B,CAAA,KAAA,QAAA,MAAA,oBAAA,EACC,CAAA,KAAA,OAAA,MAAA,cAAA,EACF,CAAA,KAAA,WAAA,MAAA,eAAA,MAAA,GAAA,CACgB,CAAA,EAEhD,MAAAI,EAAAN,EAAA,CAAsB,MAAA,EACX,KAAA,GACD,MAAA,CACC,CAAA,EAEXO,EAAAL,EAAA,CAAA,CAAA,EACAM,EAAA,SAAA,CACI,MAAAC,EAAA,MAAAC,IACAH,EAAA,MAAAE,EAAA,KAAA,KACAH,EAAA,MAAAG,EAAA,KAAA,SAAsB,EAE1BD,IAEA,MAAAJ,EAAAO,GAAA,CACIL,EAAA,MAAAK,EACAH,GAAQ,EAIZ,IAAAI,EAAAV,EAAA,CAA8B,WAAA,QACd,KAAA,GACN,KAAA,CACA,CAAA,KAAA,QAAA,MAAA,qBAAA,KAAA,OAAA,SAAA,EAAA,EAC0D,CAAA,KAAA,QAAA,MAAA,qBAAA,KAAA,QAAA,SAAA,EAAA,EACC,CAAA,KAAA,QAAA,MAAA,eAAA,KAAA,WAAA,SAAA,EAAA,EACE,CAAA,KAAA,QAAA,MAAA,eAAA,KAAA,QAAA,SAAA,EAAA,EACH,CAAA,KAAA,QAAA,MAAA,eAAA,KAAA,OAAA,SAAA,EAAA,CACD,CAC/D,CAAA,EAEJ,MAAAW,EAAAX,EAAA,EAAA,EACAY,EAAAZ,EAAA,EAAA,EACAa,EAAAb,EAAA,CAAA,CAAA,EACAc,EAAAC,GAAA,CACIF,EAAA,MAAA,CAAA,GAAAE,GACAH,EAAA,MAAA,GACAD,EAAA,MAAA,EAAgB,EAEpBK,EAAA,IAAA,CACIC,IACAX,GAAQ,EAGZW,EAAA,IAAA,CACIN,EAAA,MAAA,GACAC,EAAA,MAAA,EAAe,EAInBM,EAAAlB,EAAA,EAAA,EACAmB,EAAAnB,EAAA,CAAqB,IAAA,CAAA,EACX,KAAA,CAAA,CACC,CAAA,EAEXoB,EAAAL,GAAA,CACII,EAAA,MAAA,IAAA,CAAA,GAAAJ,CAAA,EACAI,EAAA,MAAA,KAAA,CAAsB,CAClB,KAAA,KACU,MAAA,gBACC,EACX,CACA,KAAA,OACU,MAAA,oBACC,EACX,CACA,KAAA,WACU,MAAA,cACC,EACX,CACA,KAAA,QACU,MAAA,cACC,EACX,CACA,KAAA,QACU,MAAA,cACC,EACX,CACA,KAAA,OACU,MAAA,cACC,EACX,CACA,KAAA,OACU,MAAA,0BACC,CACX,EAEJD,EAAA,MAAA,EAAiB,EAIrBG,EAAAN,GAAA,CACIO,EAAA,QAAA,0BAAA,CAAwB"}