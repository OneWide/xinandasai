import{l as ke,m as ce,ad as mt,av as Fe,u as se,r as M,e as Ve,I as R,b as w,j as Ye,W as Me,d as G,o as N,c as I,f as P,L as V,B as a,a8 as O,D as fe,ax as Te,ay as re,ae as pe,aH as _e,b6 as ze,ah as Ue,F as nt,w as ht,J as be,K as Se,v as at,aB as ot,aD as rt,aE as gt,aC as st,a as We,n as oe,X as it,y as ve,z as ae,a7 as Be,S as je,g as J,M as de,$ as qe,aa as Ze,x as Ae,bc as bt,C as Ge,b8 as pt,ab as Je,b2 as yt,am as ut,Y as Ee,E as Ce,Z as ct,b9 as dt,ch as He,T as xe,aX as wt,aw as kt,bk as Vt,a5 as Ie,s as St}from"./index.01ea98cf.js";import{u as Ct,E as $t}from"./el-input.354679cc.js";import{g as Oe}from"./position.c23ddadf.js";import{d as Ke}from"./debounce.cb4df02e.js";import{E as Et}from"./el-input-number.9b78e3d4.js";const Mt=ke({color:{type:ce(Object),required:!0},vertical:{type:Boolean,default:!1}});let Ne=!1;function we(e,t){if(!mt)return;const n=function(o){var r;(r=t.drag)==null||r.call(t,o)},l=function(o){var r;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",l),document.onselectstart=null,document.ondragstart=null,Ne=!1,(r=t.end)==null||r.call(t,o)},s=function(o){var r;Ne||(o.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",l),document.addEventListener("touchmove",n),document.addEventListener("touchend",l),Ne=!0,(r=t.start)==null||r.call(t,o))};e.addEventListener("mousedown",s),e.addEventListener("touchstart",s)}const _t=e=>{const t=Me(),n=Fe(),l=Fe();function s(r){r.target!==n.value&&o(r)}function o(r){if(!l.value||!n.value)return;const u=t.vnode.el.getBoundingClientRect(),{clientX:c,clientY:m}=Oe(r);if(e.vertical){let i=m-u.top;i=Math.max(n.value.offsetHeight/2,i),i=Math.min(i,u.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((i-n.value.offsetHeight/2)/(u.height-n.value.offsetHeight)*100))}else{let i=c-u.left;i=Math.max(n.value.offsetWidth/2,i),i=Math.min(i,u.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((i-n.value.offsetWidth/2)/(u.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:l,handleDrag:o,handleClick:s}},Bt=(e,{bar:t,thumb:n,handleDrag:l})=>{const s=Me(),o=se("color-alpha-slider"),r=M(0),f=M(0),u=M();function c(){if(!n.value||e.vertical)return 0;const C=s.vnode.el,h=e.color.get("alpha");return C?Math.round(h*(C.offsetWidth-n.value.offsetWidth/2)/100):0}function m(){if(!n.value)return 0;const C=s.vnode.el;if(!e.vertical)return 0;const h=e.color.get("alpha");return C?Math.round(h*(C.offsetHeight-n.value.offsetHeight/2)/100):0}function i(){if(e.color&&e.color.value){const{r:C,g:h,b:F}=e.color.toRgb();return`linear-gradient(to right, rgba(${C}, ${h}, ${F}, 0) 0%, rgba(${C}, ${h}, ${F}, 1) 100%)`}return""}function $(){r.value=c(),f.value=m(),u.value=i()}Ve(()=>{if(!t.value||!n.value)return;const C={drag:h=>{l(h)},end:h=>{l(h)}};we(t.value,C),we(n.value,C),$()}),R(()=>e.color.get("alpha"),()=>$()),R(()=>e.color.value,()=>$());const b=w(()=>[o.b(),o.is("vertical",e.vertical)]),p=w(()=>o.e("bar")),k=w(()=>o.e("thumb")),T=w(()=>({background:u.value})),A=w(()=>({left:Ye(r.value),top:Ye(f.value)}));return{rootKls:b,barKls:p,barStyle:T,thumbKls:k,thumbStyle:A,update:$}},Nt="ElColorAlphaSlider",Pt=G({name:Nt}),Lt=G({...Pt,props:Mt,setup(e,{expose:t}){const n=e,{bar:l,thumb:s,handleDrag:o,handleClick:r}=_t(n),{rootKls:f,barKls:u,barStyle:c,thumbKls:m,thumbStyle:i,update:$}=Bt(n,{bar:l,thumb:s,handleDrag:o});return t({update:$,bar:l,thumb:s}),(b,p)=>(N(),I("div",{class:V(a(f))},[P("div",{ref_key:"bar",ref:l,class:V(a(u)),style:O(a(c)),onClick:p[0]||(p[0]=(...k)=>a(r)&&a(r)(...k))},null,6),P("div",{ref_key:"thumb",ref:s,class:V(a(m)),style:O(a(i))},null,6)],2))}});var Ft=fe(Lt,[["__file","alpha-slider.vue"]]);const Tt=G({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=se("color-hue-slider"),n=Me(),l=M(),s=M(),o=M(0),r=M(0),f=w(()=>e.color.get("hue"));R(()=>f.value,()=>{$()});function u(b){b.target!==l.value&&c(b)}function c(b){if(!s.value||!l.value)return;const k=n.vnode.el.getBoundingClientRect(),{clientX:T,clientY:A}=Oe(b);let C;if(e.vertical){let h=A-k.top;h=Math.min(h,k.height-l.value.offsetHeight/2),h=Math.max(l.value.offsetHeight/2,h),C=Math.round((h-l.value.offsetHeight/2)/(k.height-l.value.offsetHeight)*360)}else{let h=T-k.left;h=Math.min(h,k.width-l.value.offsetWidth/2),h=Math.max(l.value.offsetWidth/2,h),C=Math.round((h-l.value.offsetWidth/2)/(k.width-l.value.offsetWidth)*360)}e.color.set("hue",C)}function m(){if(!l.value)return 0;const b=n.vnode.el;if(e.vertical)return 0;const p=e.color.get("hue");return b?Math.round(p*(b.offsetWidth-l.value.offsetWidth/2)/360):0}function i(){if(!l.value)return 0;const b=n.vnode.el;if(!e.vertical)return 0;const p=e.color.get("hue");return b?Math.round(p*(b.offsetHeight-l.value.offsetHeight/2)/360):0}function $(){o.value=m(),r.value=i()}return Ve(()=>{if(!s.value||!l.value)return;const b={drag:p=>{c(p)},end:p=>{c(p)}};we(s.value,b),we(l.value,b),$()}),{bar:s,thumb:l,thumbLeft:o,thumbTop:r,hueValue:f,handleClick:u,update:$,ns:t}}});function At(e,t,n,l,s,o){return N(),I("div",{class:V([e.ns.b(),e.ns.is("vertical",e.vertical)])},[P("div",{ref:"bar",class:V(e.ns.e("bar")),onClick:t[0]||(t[0]=(...r)=>e.handleClick&&e.handleClick(...r))},null,2),P("div",{ref:"thumb",class:V(e.ns.e("thumb")),style:O({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var xt=fe(Tt,[["render",At],["__file","hue-slider.vue"]]);const It=ke({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Te,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:ce(Array)},validateEvent:{type:Boolean,default:!0}}),Kt={[re]:e=>pe(e)||_e(e),[ze]:e=>pe(e)||_e(e),activeChange:e=>pe(e)||_e(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},ft=Symbol("colorPickerContextKey"),Qe=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},zt=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},Wt=function(e){return typeof e=="string"&&e.includes("%")},me=function(e,t){zt(e)&&(e="100%");const n=Wt(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},De={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},$e=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${De[t]||t}${De[n]||n}`},et=function({r:e,g:t,b:n}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${$e(e)}${$e(t)}${$e(n)}`},Pe={A:10,B:11,C:12,D:13,E:14,F:15},ue=function(e){return e.length===2?(Pe[e[0].toUpperCase()]||+e[0])*16+(Pe[e[1].toUpperCase()]||+e[1]):Pe[e[1].toUpperCase()]||+e[1]},Ht=function(e,t,n){t=t/100,n=n/100;let l=t;const s=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,l*=s<=1?s:2-s;const o=(n+t)/2,r=n===0?2*l/(s+l):2*t/(n+t);return{h:e,s:r*100,v:o*100}},tt=(e,t,n)=>{e=me(e,255),t=me(t,255),n=me(n,255);const l=Math.max(e,t,n),s=Math.min(e,t,n);let o;const r=l,f=l-s,u=l===0?0:f/l;if(l===s)o=0;else{switch(l){case e:{o=(t-n)/f+(t<n?6:0);break}case t:{o=(n-e)/f+2;break}case n:{o=(e-t)/f+4;break}}o/=6}return{h:o*360,s:u*100,v:r*100}},ge=function(e,t,n){e=me(e,360)*6,t=me(t,100),n=me(n,100);const l=Math.floor(e),s=e-l,o=n*(1-t),r=n*(1-s*t),f=n*(1-(1-s)*t),u=l%6,c=[n,r,o,o,f,n][u],m=[f,n,n,r,o,o][u],i=[o,o,f,n,n,r][u];return{r:Math.round(c*255),g:Math.round(m*255),b:Math.round(i*255)}};class ye{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in t)Ue(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const l in t)Ue(t,l)&&this.set(l,t[l]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return ge(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(l,s,o)=>{this._hue=Math.max(0,Math.min(360,l)),this._saturation=Math.max(0,Math.min(100,s)),this._value=Math.max(0,Math.min(100,o)),this.doOnChange()};if(t.includes("hsl")){const l=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,o)=>o>2?Number.parseFloat(s):Number.parseInt(s,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:s,s:o,v:r}=Ht(l[0],l[1],l[2]);n(s,o,r)}}else if(t.includes("hsv")){const l=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,o)=>o>2?Number.parseFloat(s):Number.parseInt(s,10));l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3&&n(l[0],l[1],l[2])}else if(t.includes("rgb")){const l=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,o)=>o>2?Number.parseFloat(s):Number.parseInt(s,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:s,s:o,v:r}=tt(l[0],l[1],l[2]);n(s,o,r)}}else if(t.includes("#")){const l=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(l))return;let s,o,r;l.length===3?(s=ue(l[0]+l[0]),o=ue(l[1]+l[1]),r=ue(l[2]+l[2])):(l.length===6||l.length===8)&&(s=ue(l.slice(0,2)),o=ue(l.slice(2,4)),r=ue(l.slice(4,6))),l.length===8?this._alpha=ue(l.slice(6))/255*100:(l.length===3||l.length===6)&&(this._alpha=100);const{h:f,s:u,v:c}=tt(s,o,r);n(f,u,c)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:l,_alpha:s,format:o}=this;if(this.enableAlpha)switch(o){case"hsl":{const r=Qe(t,n/100,l/100);this.value=`hsla(${t}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(l)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${et(ge(t,n,l))}${$e(s*255/100)}`;break}default:{const{r,g:f,b:u}=ge(t,n,l);this.value=`rgba(${r}, ${f}, ${u}, ${this.get("alpha")/100})`}}else switch(o){case"hsl":{const r=Qe(t,n/100,l/100);this.value=`hsl(${t}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(l)}%)`;break}case"rgb":{const{r,g:f,b:u}=ge(t,n,l);this.value=`rgb(${r}, ${f}, ${u})`;break}default:this.value=et(ge(t,n,l))}}}const Ot=G({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const t=se("color-predefine"),{currentColor:n}=nt(ft),l=M(o(e.colors,e.color));R(()=>n.value,r=>{const f=new ye;f.fromString(r),l.value.forEach(u=>{u.selected=f.compare(u)})}),ht(()=>{l.value=o(e.colors,e.color)});function s(r){e.color.fromString(e.colors[r])}function o(r,f){return r.map(u=>{const c=new ye;return c.enableAlpha=!0,c.format="rgba",c.fromString(u),c.selected=c.value===f.value,c})}return{rgbaColors:l,handleSelect:s,ns:t}}}),Rt=["onClick"];function Xt(e,t,n,l,s,o){return N(),I("div",{class:V(e.ns.b())},[P("div",{class:V(e.ns.e("colors"))},[(N(!0),I(be,null,Se(e.rgbaColors,(r,f)=>(N(),I("div",{key:e.colors[f],class:V([e.ns.e("color-selector"),e.ns.is("alpha",r._alpha<100),{selected:r.selected}]),onClick:u=>e.handleSelect(f)},[P("div",{style:O({backgroundColor:r.value})},null,4)],10,Rt))),128))],2)],2)}var Yt=fe(Ot,[["render",Xt],["__file","predefine.vue"]]);const Ut=G({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=se("color-svpanel"),n=Me(),l=M(0),s=M(0),o=M("hsl(0, 100%, 50%)"),r=w(()=>{const c=e.color.get("hue"),m=e.color.get("value");return{hue:c,value:m}});function f(){const c=e.color.get("saturation"),m=e.color.get("value"),i=n.vnode.el,{clientWidth:$,clientHeight:b}=i;s.value=c*$/100,l.value=(100-m)*b/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function u(c){const i=n.vnode.el.getBoundingClientRect(),{clientX:$,clientY:b}=Oe(c);let p=$-i.left,k=b-i.top;p=Math.max(0,p),p=Math.min(p,i.width),k=Math.max(0,k),k=Math.min(k,i.height),s.value=p,l.value=k,e.color.set({saturation:p/i.width*100,value:100-k/i.height*100})}return R(()=>r.value,()=>{f()}),Ve(()=>{we(n.vnode.el,{drag:c=>{u(c)},end:c=>{u(c)}}),f()}),{cursorTop:l,cursorLeft:s,background:o,colorValue:r,handleDrag:u,update:f,ns:t}}}),jt=P("div",null,null,-1),qt=[jt];function Zt(e,t,n,l,s,o){return N(),I("div",{class:V(e.ns.b()),style:O({backgroundColor:e.background})},[P("div",{class:V(e.ns.e("white"))},null,2),P("div",{class:V(e.ns.e("black"))},null,2),P("div",{class:V(e.ns.e("cursor")),style:O({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},qt,6)],6)}var Gt=fe(Ut,[["render",Zt],["__file","sv-panel.vue"]]);const Jt=["onKeydown"],Qt=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],Dt=G({name:"ElColorPicker"}),el=G({...Dt,props:It,emits:Kt,setup(e,{expose:t,emit:n}){const l=e,{t:s}=at(),o=se("color"),{formItem:r}=ot(),f=rt(),u=gt(),{inputId:c,isLabeledByFormItem:m}=st(l,{formItemContext:r}),i=M(),$=M(),b=M(),p=M(),k=M(),T=M(),{isFocused:A,handleFocus:C,handleBlur:h}=Ct(k,{beforeBlur(d){var _;return(_=p.value)==null?void 0:_.isFocusInsideContent(d)},afterBlur(){Y(!1),x()}}),F=d=>{if(u.value)return he();C(d)};let E=!0;const y=We(new ye({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue})),X=M(!1),z=M(!1),H=M(""),te=w(()=>!l.modelValue&&!z.value?"transparent":ne(y,l.showAlpha)),S=w(()=>!l.modelValue&&!z.value?"":y.value),L=w(()=>m.value?void 0:l.label||s("el.colorpicker.defaultLabel")),K=w(()=>m.value?r==null?void 0:r.labelId:void 0),le=w(()=>[o.b("picker"),o.is("disabled",u.value),o.bm("picker",f.value),o.is("focused",A.value)]);function ne(d,_){if(!(d instanceof ye))throw new TypeError("color should be instance of _color Class");const{r:ee,g:Re,b:Xe}=d.toRgb();return _?`rgba(${ee}, ${Re}, ${Xe}, ${d.get("alpha")/100})`:`rgb(${ee}, ${Re}, ${Xe})`}function Y(d){X.value=d}const U=Ke(Y,100,{leading:!0});function j(){u.value||Y(!0)}function W(){U(!1),x()}function x(){oe(()=>{l.modelValue?y.fromString(l.modelValue):(y.value="",oe(()=>{z.value=!1}))})}function Q(){u.value||U(!X.value)}function v(){y.fromString(H.value)}function B(){const d=y.value;n(re,d),n("change",d),l.validateEvent&&(r==null||r.validate("change").catch(_=>Ee())),U(!1),oe(()=>{const _=new ye({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue});y.compare(_)||x()})}function q(){U(!1),n(re,null),n("change",null),l.modelValue!==null&&l.validateEvent&&(r==null||r.validate("change").catch(d=>Ee())),x()}function D(d){if(!!X.value&&(W(),A.value)){const _=new FocusEvent("focus",d);h(_)}}function g(d){d.preventDefault(),d.stopPropagation(),Y(!1),x()}function Z(d){switch(d.code){case Ce.enter:case Ce.space:d.preventDefault(),d.stopPropagation(),j(),T.value.focus();break;case Ce.esc:g(d);break}}function ie(){k.value.focus()}function he(){k.value.blur()}return Ve(()=>{l.modelValue&&(H.value=S.value)}),R(()=>l.modelValue,d=>{d?d&&d!==y.value&&(E=!1,y.fromString(d)):z.value=!1}),R(()=>S.value,d=>{H.value=d,E&&n("activeChange",d),E=!0}),R(()=>y.value,()=>{!l.modelValue&&!z.value&&(z.value=!0)}),R(()=>X.value,()=>{oe(()=>{var d,_,ee;(d=i.value)==null||d.update(),(_=$.value)==null||_.update(),(ee=b.value)==null||ee.update()})}),it(ft,{currentColor:S}),t({color:y,show:j,hide:W,focus:ie,blur:he}),(d,_)=>(N(),ve(a(ut),{ref_key:"popper",ref:p,visible:X.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[a(o).be("picker","panel"),a(o).b("dropdown"),d.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${a(o).namespace.value}-zoom-in-top`,persistent:"",onHide:_[2]||(_[2]=ee=>Y(!1))},{content:ae(()=>[Be((N(),I("div",{onKeydown:je(g,["esc"])},[P("div",{class:V(a(o).be("dropdown","main-wrapper"))},[J(xt,{ref_key:"hue",ref:i,class:"hue-slider",color:a(y),vertical:""},null,8,["color"]),J(Gt,{ref_key:"sv",ref:$,color:a(y)},null,8,["color"])],2),d.showAlpha?(N(),ve(Ft,{key:0,ref_key:"alpha",ref:b,color:a(y)},null,8,["color"])):de("v-if",!0),d.predefine?(N(),ve(Yt,{key:1,ref:"predefine",color:a(y),colors:d.predefine},null,8,["color","colors"])):de("v-if",!0),P("div",{class:V(a(o).be("dropdown","btns"))},[P("span",{class:V(a(o).be("dropdown","value"))},[J(a($t),{ref_key:"inputRef",ref:T,modelValue:H.value,"onUpdate:modelValue":_[0]||(_[0]=ee=>H.value=ee),"validate-event":!1,size:"small",onKeyup:je(v,["enter"]),onBlur:v},null,8,["modelValue","onKeyup"])],2),J(a(qe),{class:V(a(o).be("dropdown","link-btn")),text:"",size:"small",onClick:q},{default:ae(()=>[Ze(Ae(a(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),J(a(qe),{plain:"",size:"small",class:V(a(o).be("dropdown","btn")),onClick:B},{default:ae(()=>[Ze(Ae(a(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,Jt)),[[a(bt),D]])]),default:ae(()=>[P("div",{id:a(c),ref_key:"triggerRef",ref:k,class:V(a(le)),role:"button","aria-label":a(L),"aria-labelledby":a(K),"aria-description":a(s)("el.colorpicker.description",{color:d.modelValue||""}),"aria-disabled":a(u),tabindex:a(u)?-1:d.tabindex,onKeydown:Z,onFocus:F,onBlur:_[1]||(_[1]=(...ee)=>a(h)&&a(h)(...ee))},[a(u)?(N(),I("div",{key:0,class:V(a(o).be("picker","mask"))},null,2)):de("v-if",!0),P("div",{class:V(a(o).be("picker","trigger")),onClick:Q},[P("span",{class:V([a(o).be("picker","color"),a(o).is("alpha",d.showAlpha)])},[P("span",{class:V(a(o).be("picker","color-inner")),style:O({backgroundColor:a(te)})},[Be(J(a(Ge),{class:V([a(o).be("picker","icon"),a(o).is("icon-arrow-down")])},{default:ae(()=>[J(a(pt))]),_:1},8,["class"]),[[Je,d.modelValue||z.value]]),Be(J(a(Ge),{class:V([a(o).be("picker","empty"),a(o).is("icon-close")])},{default:ae(()=>[J(a(yt))]),_:1},8,["class"]),[[Je,!d.modelValue&&!z.value]])],6)],2)],2)],42,Qt)]),_:1},8,["visible","popper-class","transition"]))}});var tl=fe(el,[["__file","color-picker.vue"]]);const xl=ct(tl),vt=Symbol("sliderContextKey"),ll=ke({modelValue:{type:ce([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Te,inputSize:Te,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ce(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ce(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:dt,default:"top"},marks:{type:ce(Object)},validateEvent:{type:Boolean,default:!0}}),Le=e=>xe(e)||wt(e)&&e.every(xe),nl={[re]:Le,[He]:Le,[ze]:Le},al=(e,t,n)=>{const l=M();return Ve(async()=>{e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),kt(window,"resize",n),await oe(),n()}),{sliderWrapper:l}},ol=e=>w(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((n,l)=>n-l).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),rl=(e,t,n)=>{const{form:l,formItem:s}=ot(),o=Fe(),r=M(),f=M(),u={firstButton:r,secondButton:f},c=w(()=>e.disabled||(l==null?void 0:l.disabled)||!1),m=w(()=>Math.min(t.firstValue,t.secondValue)),i=w(()=>Math.max(t.firstValue,t.secondValue)),$=w(()=>e.range?`${100*(i.value-m.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),b=w(()=>e.range?`${100*(m.value-e.min)/(e.max-e.min)}%`:"0%"),p=w(()=>e.vertical?{height:e.height}:{}),k=w(()=>e.vertical?{height:$.value,bottom:b.value}:{width:$.value,left:b.value}),T=()=>{o.value&&(t.sliderSize=o.value[`client${e.vertical?"Height":"Width"}`])},A=S=>{const L=e.min+S*(e.max-e.min)/100;if(!e.range)return r;let K;return Math.abs(m.value-L)<Math.abs(i.value-L)?K=t.firstValue<t.secondValue?"firstButton":"secondButton":K=t.firstValue>t.secondValue?"firstButton":"secondButton",u[K]},C=S=>{const L=A(S);return L.value.setPosition(S),L},h=S=>{t.firstValue=S,E(e.range?[m.value,i.value]:S)},F=S=>{t.secondValue=S,e.range&&E([m.value,i.value])},E=S=>{n(re,S),n(He,S)},y=async()=>{await oe(),n(ze,e.range?[m.value,i.value]:e.modelValue)},X=S=>{var L,K,le,ne,Y,U;if(c.value||t.dragging)return;T();let j=0;if(e.vertical){const W=(le=(K=(L=S.touches)==null?void 0:L.item(0))==null?void 0:K.clientY)!=null?le:S.clientY;j=(o.value.getBoundingClientRect().bottom-W)/t.sliderSize*100}else{const W=(U=(Y=(ne=S.touches)==null?void 0:ne.item(0))==null?void 0:Y.clientX)!=null?U:S.clientX,x=o.value.getBoundingClientRect().left;j=(W-x)/t.sliderSize*100}if(!(j<0||j>100))return C(j)};return{elFormItem:s,slider:o,firstButton:r,secondButton:f,sliderDisabled:c,minValue:m,maxValue:i,runwayStyle:p,barStyle:k,resetSize:T,setPosition:C,emitChange:y,onSliderWrapperPrevent:S=>{var L,K;(((L=u.firstButton.value)==null?void 0:L.dragging)||((K=u.secondButton.value)==null?void 0:K.dragging))&&S.preventDefault()},onSliderClick:S=>{X(S)&&y()},onSliderDown:async S=>{const L=X(S);L&&(await oe(),L.value.onButtonDown(S))},setFirstValue:h,setSecondValue:F}},{left:sl,down:il,right:ul,up:cl,home:dl,end:fl,pageUp:vl,pageDown:ml}=Ce,hl=(e,t,n)=>{const l=M(),s=M(!1),o=w(()=>t.value instanceof Function),r=w(()=>o.value&&t.value(e.modelValue)||e.modelValue),f=Ke(()=>{n.value&&(s.value=!0)},50),u=Ke(()=>{n.value&&(s.value=!1)},50);return{tooltip:l,tooltipVisible:s,formatValue:r,displayTooltip:f,hideTooltip:u}},gl=(e,t,n)=>{const{disabled:l,min:s,max:o,step:r,showTooltip:f,precision:u,sliderSize:c,formatTooltip:m,emitChange:i,resetSize:$,updateDragging:b}=nt(vt),{tooltip:p,tooltipVisible:k,formatValue:T,displayTooltip:A,hideTooltip:C}=hl(e,m,f),h=M(),F=w(()=>`${(e.modelValue-s.value)/(o.value-s.value)*100}%`),E=w(()=>e.vertical?{bottom:F.value}:{left:F.value}),y=()=>{t.hovering=!0,A()},X=()=>{t.hovering=!1,t.dragging||C()},z=v=>{l.value||(v.preventDefault(),j(v),window.addEventListener("mousemove",W),window.addEventListener("touchmove",W),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),window.addEventListener("contextmenu",x),h.value.focus())},H=v=>{l.value||(t.newPosition=Number.parseFloat(F.value)+v/(o.value-s.value)*100,Q(t.newPosition),i())},te=()=>{H(-r.value)},S=()=>{H(r.value)},L=()=>{H(-r.value*4)},K=()=>{H(r.value*4)},le=()=>{l.value||(Q(0),i())},ne=()=>{l.value||(Q(100),i())},Y=v=>{let B=!0;[sl,il].includes(v.key)?te():[ul,cl].includes(v.key)?S():v.key===dl?le():v.key===fl?ne():v.key===ml?L():v.key===vl?K():B=!1,B&&v.preventDefault()},U=v=>{let B,q;return v.type.startsWith("touch")?(q=v.touches[0].clientY,B=v.touches[0].clientX):(q=v.clientY,B=v.clientX),{clientX:B,clientY:q}},j=v=>{t.dragging=!0,t.isClick=!0;const{clientX:B,clientY:q}=U(v);e.vertical?t.startY=q:t.startX=B,t.startPosition=Number.parseFloat(F.value),t.newPosition=t.startPosition},W=v=>{if(t.dragging){t.isClick=!1,A(),$();let B;const{clientX:q,clientY:D}=U(v);e.vertical?(t.currentY=D,B=(t.startY-t.currentY)/c.value*100):(t.currentX=q,B=(t.currentX-t.startX)/c.value*100),t.newPosition=t.startPosition+B,Q(t.newPosition)}},x=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||C(),t.isClick||Q(t.newPosition),i()},0),window.removeEventListener("mousemove",W),window.removeEventListener("touchmove",W),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),window.removeEventListener("contextmenu",x))},Q=async v=>{if(v===null||Number.isNaN(+v))return;v<0?v=0:v>100&&(v=100);const B=100/((o.value-s.value)/r.value);let D=Math.round(v/B)*B*(o.value-s.value)*.01+s.value;D=Number.parseFloat(D.toFixed(u.value)),D!==e.modelValue&&n(re,D),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await oe(),t.dragging&&A(),p.value.updatePopper()};return R(()=>t.dragging,v=>{b(v)}),{disabled:l,button:h,tooltip:p,tooltipVisible:k,showTooltip:f,wrapperStyle:E,formatValue:T,handleMouseEnter:y,handleMouseLeave:X,onButtonDown:z,onKeyDown:Y,setPosition:Q}},bl=(e,t,n,l)=>({stops:w(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const r=(e.max-e.min)/e.step,f=100*e.step/(e.max-e.min),u=Array.from({length:r-1}).map((c,m)=>(m+1)*f);return e.range?u.filter(c=>c<100*(n.value-e.min)/(e.max-e.min)||c>100*(l.value-e.min)/(e.max-e.min)):u.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:r=>e.vertical?{bottom:`${r}%`}:{left:`${r}%`}}),pl=(e,t,n,l,s,o)=>{const r=c=>{s(re,c),s(He,c)},f=()=>e.range?![n.value,l.value].every((c,m)=>c===t.oldValue[m]):e.modelValue!==t.oldValue,u=()=>{var c,m;e.min>e.max&&Vt("Slider","min should not be greater than max.");const i=e.modelValue;e.range&&Array.isArray(i)?i[1]<e.min?r([e.min,e.min]):i[0]>e.max?r([e.max,e.max]):i[0]<e.min?r([e.min,i[1]]):i[1]>e.max?r([i[0],e.max]):(t.firstValue=i[0],t.secondValue=i[1],f()&&(e.validateEvent&&((c=o==null?void 0:o.validate)==null||c.call(o,"change").catch($=>Ee())),t.oldValue=i.slice())):!e.range&&typeof i=="number"&&!Number.isNaN(i)&&(i<e.min?r(e.min):i>e.max?r(e.max):(t.firstValue=i,f()&&(e.validateEvent&&((m=o==null?void 0:o.validate)==null||m.call(o,"change").catch($=>Ee())),t.oldValue=i)))};u(),R(()=>t.dragging,c=>{c||u()}),R(()=>e.modelValue,(c,m)=>{t.dragging||Array.isArray(c)&&Array.isArray(m)&&c.every((i,$)=>i===m[$])&&t.firstValue===c[0]&&t.secondValue===c[1]||u()},{deep:!0}),R(()=>[e.min,e.max],()=>{u()})},yl=ke({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:dt,default:"top"}}),wl={[re]:e=>xe(e)},kl=["tabindex"],Vl=G({name:"ElSliderButton"}),Sl=G({...Vl,props:yl,emits:wl,setup(e,{expose:t,emit:n}){const l=e,s=se("slider"),o=We({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),{disabled:r,button:f,tooltip:u,showTooltip:c,tooltipVisible:m,wrapperStyle:i,formatValue:$,handleMouseEnter:b,handleMouseLeave:p,onButtonDown:k,onKeyDown:T,setPosition:A}=gl(l,o,n),{hovering:C,dragging:h}=Ie(o);return t({onButtonDown:k,onKeyDown:T,setPosition:A,hovering:C,dragging:h}),(F,E)=>(N(),I("div",{ref_key:"button",ref:f,class:V([a(s).e("button-wrapper"),{hover:a(C),dragging:a(h)}]),style:O(a(i)),tabindex:a(r)?-1:0,onMouseenter:E[0]||(E[0]=(...y)=>a(b)&&a(b)(...y)),onMouseleave:E[1]||(E[1]=(...y)=>a(p)&&a(p)(...y)),onMousedown:E[2]||(E[2]=(...y)=>a(k)&&a(k)(...y)),onTouchstart:E[3]||(E[3]=(...y)=>a(k)&&a(k)(...y)),onFocus:E[4]||(E[4]=(...y)=>a(b)&&a(b)(...y)),onBlur:E[5]||(E[5]=(...y)=>a(p)&&a(p)(...y)),onKeydown:E[6]||(E[6]=(...y)=>a(T)&&a(T)(...y))},[J(a(ut),{ref_key:"tooltip",ref:u,visible:a(m),placement:F.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":F.tooltipClass,disabled:!a(c),persistent:""},{content:ae(()=>[P("span",null,Ae(a($)),1)]),default:ae(()=>[P("div",{class:V([a(s).e("button"),{hover:a(C),dragging:a(h)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,kl))}});var lt=fe(Sl,[["__file","button.vue"]]);const Cl=ke({mark:{type:ce([String,Object]),default:void 0}});var $l=G({name:"ElSliderMarker",props:Cl,setup(e){const t=se("slider"),n=w(()=>pe(e.mark)?e.mark:e.mark.label),l=w(()=>pe(e.mark)?void 0:e.mark.style);return()=>St("div",{class:t.e("marks-text"),style:l.value},n.value)}});const El=["id","role","aria-label","aria-labelledby"],Ml={key:1},_l=G({name:"ElSlider"}),Bl=G({..._l,props:ll,emits:nl,setup(e,{expose:t,emit:n}){const l=e,s=se("slider"),{t:o}=at(),r=We({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:f,slider:u,firstButton:c,secondButton:m,sliderDisabled:i,minValue:$,maxValue:b,runwayStyle:p,barStyle:k,resetSize:T,emitChange:A,onSliderWrapperPrevent:C,onSliderClick:h,onSliderDown:F,setFirstValue:E,setSecondValue:y}=rl(l,r,n),{stops:X,getStopStyle:z}=bl(l,r,$,b),{inputId:H,isLabeledByFormItem:te}=st(l,{formItemContext:f}),S=rt(),L=w(()=>l.inputSize||S.value),K=w(()=>l.label||o("el.slider.defaultLabel",{min:l.min,max:l.max})),le=w(()=>l.range?l.rangeStartLabel||o("el.slider.defaultRangeStartLabel"):K.value),ne=w(()=>l.formatValueText?l.formatValueText(v.value):`${v.value}`),Y=w(()=>l.rangeEndLabel||o("el.slider.defaultRangeEndLabel")),U=w(()=>l.formatValueText?l.formatValueText(B.value):`${B.value}`),j=w(()=>[s.b(),s.m(S.value),s.is("vertical",l.vertical),{[s.m("with-input")]:l.showInput}]),W=ol(l);pl(l,r,$,b,n,f);const x=w(()=>{const g=[l.min,l.max,l.step].map(Z=>{const ie=`${Z}`.split(".")[1];return ie?ie.length:0});return Math.max.apply(null,g)}),{sliderWrapper:Q}=al(l,r,T),{firstValue:v,secondValue:B,sliderSize:q}=Ie(r),D=g=>{r.dragging=g};return it(vt,{...Ie(l),sliderSize:q,disabled:i,precision:x,emitChange:A,resetSize:T,updateDragging:D}),t({onSliderClick:h}),(g,Z)=>{var ie,he;return N(),I("div",{id:g.range?a(H):void 0,ref_key:"sliderWrapper",ref:Q,class:V(a(j)),role:g.range?"group":void 0,"aria-label":g.range&&!a(te)?a(K):void 0,"aria-labelledby":g.range&&a(te)?(ie=a(f))==null?void 0:ie.labelId:void 0,onTouchstart:Z[2]||(Z[2]=(...d)=>a(C)&&a(C)(...d)),onTouchmove:Z[3]||(Z[3]=(...d)=>a(C)&&a(C)(...d))},[P("div",{ref_key:"slider",ref:u,class:V([a(s).e("runway"),{"show-input":g.showInput&&!g.range},a(s).is("disabled",a(i))]),style:O(a(p)),onMousedown:Z[0]||(Z[0]=(...d)=>a(F)&&a(F)(...d)),onTouchstart:Z[1]||(Z[1]=(...d)=>a(F)&&a(F)(...d))},[P("div",{class:V(a(s).e("bar")),style:O(a(k))},null,6),J(lt,{id:g.range?void 0:a(H),ref_key:"firstButton",ref:c,"model-value":a(v),vertical:g.vertical,"tooltip-class":g.tooltipClass,placement:g.placement,role:"slider","aria-label":g.range||!a(te)?a(le):void 0,"aria-labelledby":!g.range&&a(te)?(he=a(f))==null?void 0:he.labelId:void 0,"aria-valuemin":g.min,"aria-valuemax":g.range?a(B):g.max,"aria-valuenow":a(v),"aria-valuetext":a(ne),"aria-orientation":g.vertical?"vertical":"horizontal","aria-disabled":a(i),"onUpdate:modelValue":a(E)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),g.range?(N(),ve(lt,{key:0,ref_key:"secondButton",ref:m,"model-value":a(B),vertical:g.vertical,"tooltip-class":g.tooltipClass,placement:g.placement,role:"slider","aria-label":a(Y),"aria-valuemin":a(v),"aria-valuemax":g.max,"aria-valuenow":a(B),"aria-valuetext":a(U),"aria-orientation":g.vertical?"vertical":"horizontal","aria-disabled":a(i),"onUpdate:modelValue":a(y)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):de("v-if",!0),g.showStops?(N(),I("div",Ml,[(N(!0),I(be,null,Se(a(X),(d,_)=>(N(),I("div",{key:_,class:V(a(s).e("stop")),style:O(a(z)(d))},null,6))),128))])):de("v-if",!0),a(W).length>0?(N(),I(be,{key:2},[P("div",null,[(N(!0),I(be,null,Se(a(W),(d,_)=>(N(),I("div",{key:_,style:O(a(z)(d.position)),class:V([a(s).e("stop"),a(s).e("marks-stop")])},null,6))),128))]),P("div",{class:V(a(s).e("marks"))},[(N(!0),I(be,null,Se(a(W),(d,_)=>(N(),ve(a($l),{key:_,mark:d.mark,style:O(a(z)(d.position))},null,8,["mark","style"]))),128))],2)],64)):de("v-if",!0)],38),g.showInput&&!g.range?(N(),ve(a(Et),{key:0,ref:"input","model-value":a(v),class:V(a(s).e("input")),step:g.step,disabled:a(i),controls:g.showInputControls,min:g.min,max:g.max,debounce:g.debounce,size:a(L),"onUpdate:modelValue":a(E),onChange:a(A)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):de("v-if",!0)],42,El)}}});var Nl=fe(Bl,[["__file","slider.vue"]]);const Il=ct(Nl);export{xl as E,Il as a};
