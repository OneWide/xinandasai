{"version":3,"file":"menu.8e0d0187.js","sources":["../../src/views/system/menu.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'system-menu',\n})\n</script>\n<template>\r\n    <div>\r\n        <div class=\"container\">\r\n            <TableCustom :columns=\"columns\" :tableData=\"menuData\" row-key=\"index\" :has-pagination=\"false\"\r\n                :viewFunc=\"handleView\" :delFunc=\"handleDelete\" :editFunc=\"handleEdit\">\r\n                <template #toolbarBtn>\r\n                    <el-button type=\"warning\" :icon=\"CirclePlusFilled\" @click=\"visible = true\">新增</el-button>\r\n                </template>\r\n                <template #icon=\"{ rows }\">\r\n                    <el-icon>\r\n                        <component :is=\"rows.icon\"></component>\r\n                    </el-icon>\r\n                </template>\r\n            </TableCustom>\r\n\r\n        </div>\r\n        <el-dialog :title=\"isEdit ? '编辑' : '新增'\" v-model=\"visible\" width=\"700px\" destroy-on-close\r\n            :close-on-click-modal=\"false\" @close=\"closeDialog\">\r\n            <TableEdit :form-data=\"rowData\" :options=\"options\" :edit=\"isEdit\" :update=\"updateData\">\r\n                <template #parent>\r\n                    <el-cascader v-model=\"rowData.pid\" :options=\"cascaderOptions\" :props=\"{ checkStrictly: true }\"\r\n                        clearable />\r\n                </template>\r\n            </TableEdit>\r\n        </el-dialog>\r\n        <el-dialog title=\"查看详情\" v-model=\"visible1\" width=\"700px\" destroy-on-close>\r\n            <TableDetail :data=\"viewData\">\r\n                <template #icon=\"{ rows }\">\r\n                    <el-icon>\r\n                        <component :is=\"rows.icon\"></component>\r\n                    </el-icon>\r\n                </template>\r\n            </TableDetail>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"system-menu\">\r\nimport { ref } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport { CirclePlusFilled } from '@element-plus/icons-vue';\r\nimport { Menus } from '@/types/menu';\r\nimport TableCustom from '@/components/table-custom.vue';\r\nimport TableDetail from '@/components/table-detail.vue';\r\nimport { FormOption } from '@/types/form-option';\r\nimport { menuData } from '@/components/menu';\r\n\r\n// 表格相关\r\nlet columns = ref([\r\n    { prop: 'title', label: '菜单名称', align: 'left' },\r\n    { prop: 'icon', label: '图标' },\r\n    { prop: 'index', label: '路由路径' },\r\n    { prop: 'permiss', label: '权限标识' },\r\n    { prop: 'operator', label: '操作', width: 250 },\r\n])\r\n\r\nconst getOptions = (data: any) => {\r\n    return data.map(item => {\r\n        const a: any = {\r\n            label: item.title,\r\n            value: item.id,\r\n        }\r\n        if (item.children) {\r\n            a.children = getOptions(item.children)\r\n        }\r\n        return a\r\n    })\r\n}\r\nconst cascaderOptions = ref(getOptions(menuData));\r\n\r\n\r\n// 新增/编辑弹窗相关\r\nlet options = ref<FormOption>({\r\n    labelWidth: '100px',\r\n    span: 12,\r\n    list: [\r\n        { type: 'input', label: '菜单名称', prop: 'title', required: true },\r\n        { type: 'input', label: '路由路径', prop: 'index', required: true },\r\n        { type: 'input', label: '图标', prop: 'icon' },\r\n        { type: 'input', label: '权限标识', prop: 'permiss' },\r\n        { type: 'parent', label: '父菜单', prop: 'parent' },\r\n    ]\r\n})\r\nconst visible = ref(false);\r\nconst isEdit = ref(false);\r\nconst rowData = ref<any>({});\r\nconst handleEdit = (row: Menus) => {\r\n    rowData.value = { ...row };\r\n    isEdit.value = true;\r\n    visible.value = true;\r\n};\r\nconst updateData = () => {\r\n    closeDialog();\r\n};\r\n\r\nconst closeDialog = () => {\r\n    visible.value = false;\r\n    isEdit.value = false;\r\n};\r\n\r\n// 查看详情弹窗相关\r\nconst visible1 = ref(false);\r\nconst viewData = ref({\r\n    row: {},\r\n    list: []\r\n});\r\nconst handleView = (row: Menus) => {\r\n    viewData.value.row = { ...row }\r\n    viewData.value.list = [\r\n        {\r\n            prop: 'id',\r\n            label: '菜单ID',\r\n        },\r\n        {\r\n            prop: 'pid',\r\n            label: '父菜单ID',\r\n        },\r\n        {\r\n            prop: 'title',\r\n            label: '菜单名称',\r\n        },\r\n        {\r\n            prop: 'index',\r\n            label: '路由路径',\r\n        },\r\n        {\r\n            prop: 'permiss',\r\n            label: '权限标识',\r\n        },\r\n        {\r\n            prop: 'icon',\r\n            label: '图标',\r\n        },\r\n    ]\r\n    visible1.value = true;\r\n};\r\n\r\n// 删除相关\r\nconst handleDelete = (row: Menus) => {\r\n    ElMessage.success('删除成功');\r\n}\r\n</script>\r\n\r\n<style scoped></style>"],"names":["__default__","defineComponent","columns","ref","getOptions","data","item","a","cascaderOptions","menuData","options","visible","isEdit","rowData","handleEdit","row","updateData","closeDialog","visible1","viewData","handleView","handleDelete","ElMessage"],"mappings":"kwBAEAA,EAAAC,EAAA,CAA+B,KAAA,aAE/B,CAAA,sBAkDA,IAAAC,EAAAC,EAAA,CAAkB,CAAA,KAAA,QAAA,MAAA,2BAAA,MAAA,MAAA,EACgC,CAAA,KAAA,OAAA,MAAA,cAAA,EAClB,CAAA,KAAA,QAAA,MAAA,0BAAA,EACG,CAAA,KAAA,UAAA,MAAA,0BAAA,EACE,CAAA,KAAA,WAAA,MAAA,eAAA,MAAA,GAAA,CACW,CAAA,EAGhD,MAAAC,EAAAC,GACIA,EAAA,IAAAC,GAAA,CACI,MAAAC,EAAA,CAAe,MAAAD,EAAA,MACC,MAAAA,EAAA,EACA,EAEhB,OAAAA,EAAA,WACIC,EAAA,SAAAH,EAAAE,EAAA,QAAA,GAEJC,CAAO,CAAA,EAGfC,EAAAL,EAAAC,EAAAK,CAAA,CAAA,EAIA,IAAAC,EAAAP,EAAA,CAA8B,WAAA,QACd,KAAA,GACN,KAAA,CACA,CAAA,KAAA,QAAA,MAAA,2BAAA,KAAA,QAAA,SAAA,EAAA,EAC4D,CAAA,KAAA,QAAA,MAAA,2BAAA,KAAA,QAAA,SAAA,EAAA,EACA,CAAA,KAAA,QAAA,MAAA,eAAA,KAAA,MAAA,EACnB,CAAA,KAAA,QAAA,MAAA,2BAAA,KAAA,SAAA,EACK,CAAA,KAAA,SAAA,MAAA,qBAAA,KAAA,QAAA,CACD,CACnD,CAAA,EAEJ,MAAAQ,EAAAR,EAAA,EAAA,EACAS,EAAAT,EAAA,EAAA,EACAU,EAAAV,EAAA,CAAA,CAAA,EACAW,EAAAC,GAAA,CACIF,EAAA,MAAA,CAAA,GAAAE,GACAH,EAAA,MAAA,GACAD,EAAA,MAAA,EAAgB,EAEpBK,EAAA,IAAA,CACIC,GAAY,EAGhBA,EAAA,IAAA,CACIN,EAAA,MAAA,GACAC,EAAA,MAAA,EAAe,EAInBM,EAAAf,EAAA,EAAA,EACAgB,EAAAhB,EAAA,CAAqB,IAAA,CAAA,EACX,KAAA,CAAA,CACC,CAAA,EAEXiB,EAAAL,GAAA,CACII,EAAA,MAAA,IAAA,CAAA,GAAAJ,CAAA,EACAI,EAAA,MAAA,KAAA,CAAsB,CAClB,KAAA,KACU,MAAA,gBACC,EACX,CACA,KAAA,MACU,MAAA,sBACC,EACX,CACA,KAAA,QACU,MAAA,0BACC,EACX,CACA,KAAA,QACU,MAAA,0BACC,EACX,CACA,KAAA,UACU,MAAA,0BACC,EACX,CACA,KAAA,OACU,MAAA,cACC,CACX,EAEJD,EAAA,MAAA,EAAiB,EAIrBG,EAAAN,GAAA,CACIO,EAAA,QAAA,0BAAA,CAAwB"}