import{m as Q}from"./index.91a2fcd9.js";import{_ as R,a as W}from"./table-detail.vue_vue_type_script_setup_true_lang.4422079e.js";/* empty css                    */import{T as H}from"./table-search.4eb4789b.js";import{a as I}from"./index.b33b1184.js";import{T as L}from"./table-custom.e2ac56d0.js";import{Q as M,k as O,R as G,y as J,z as X,A as Y}from"./element-plus.e3e37abd.js";import{d as C,r as a,o as c,c as A,Q as o,u as h,S as t,W as p,L as q,a as Z,T as D}from"./vendor.92143cfc.js";/* empty css                     *//* empty css               *//* empty css                    *//* empty css                       *//* empty css                 *//* empty css                  *//* empty css                        *//* empty css                        *//* empty css                   */const ee=C({__name:"role-permission",props:{permissOptions:{type:Object,required:!0}},setup(E){const k=E,d=a({}),f=s=>s.map(e=>{const n={id:e.id,label:e.title};return e.children&&(d.value[e.id]=e.children.map(m=>m.id),n.children=f(e.children)),n}),g=f(Q),v=a((s=>s.filter(e=>!d.value[e]||s.toString().includes(d.value[e].toString())))(k.permissOptions.permiss)),i=a(),y=()=>{const s=[...i.value.getCheckedKeys(!1),...i.value.getHalfCheckedKeys()];console.log(s)};return(s,e)=>{const n=O;return c(),A("div",null,[o(h(M),{class:"mgb10",ref_key:"tree",ref:i,data:h(g),"node-key":"id","default-expand-all":"","show-checkbox":"","default-checked-keys":v.value},null,8,["data","default-checked-keys"]),o(n,{type:"primary",onClick:y},{default:t(()=>[p("\u4FDD\u5B58\u6743\u9650")]),_:1})])}}}),te={class:"container"},ae=C({name:"system-role"}),ke=C({...ae,setup(E){const k=q({name:""}),d=a([{type:"input",label:"\u89D2\u8272\u540D\u79F0\uFF1A",prop:"name"}]),f=()=>{y(1)};let g=a([{type:"index",label:"\u5E8F\u53F7",width:55,align:"center"},{prop:"name",label:"\u89D2\u8272\u540D\u79F0"},{prop:"key",label:"\u89D2\u8272\u6807\u8BC6"},{prop:"status",label:"\u72B6\u6001"},{prop:"permissions",label:"\u6743\u9650\u7BA1\u7406"},{prop:"operator",label:"\u64CD\u4F5C",width:250}]);const _=q({index:1,size:10,total:0}),v=a([]),i=async()=>{const l=await I();v.value=l.data.list,_.total=l.data.pageTotal};i();const y=l=>{_.index=l,i()},s=a({labelWidth:"100px",span:24,list:[{type:"input",label:"\u89D2\u8272\u540D\u79F0",prop:"name",required:!0},{type:"input",label:"\u89D2\u8272\u6807\u8BC6",prop:"key",required:!0},{type:"switch",label:"\u72B6\u6001",prop:"status",required:!1,activeText:"\u542F\u7528",inactiveText:"\u7981\u7528"}]}),e=a(!1),n=a(!1),m=a({}),$=l=>{m.value={...l},n.value=!0,e.value=!0},j=()=>{T(),i()},T=()=>{e.value=!1,n.value=!1,m.value={}},B=a(!1),F=a({row:{},list:[],column:1}),z=l=>{F.value.row={...l},F.value.list=[{prop:"id",label:"\u89D2\u8272ID"},{prop:"name",label:"\u89D2\u8272\u540D\u79F0"},{prop:"key",label:"\u89D2\u8272\u6807\u8BC6"},{prop:"status",label:"\u89D2\u8272\u72B6\u6001"}],B.value=!0},K=l=>{X.success("\u5220\u9664\u6210\u529F")},w=a(!1),V=a({}),N=l=>{w.value=!0,V.value={id:l.id,permiss:l.permiss}};return(l,r)=>{const U=H,S=O,b=G,P=W,x=J;return c(),A("div",null,[o(U,{query:k,options:d.value,search:f},null,8,["query","options"]),Z("div",te,[o(L,{columns:h(g),tableData:v.value,total:_.total,viewFunc:z,delFunc:K,"page-change":y,editFunc:$},{toolbarBtn:t(()=>[o(S,{type:"warning",icon:h(Y),onClick:r[0]||(r[0]=u=>e.value=!0)},{default:t(()=>[p("\u65B0\u589E")]),_:1},8,["icon"])]),status:t(({rows:u})=>[u.status?(c(),D(b,{key:0,type:"success"},{default:t(()=>[p("\u542F\u7528")]),_:1})):(c(),D(b,{key:1,type:"danger"},{default:t(()=>[p("\u7981\u7528")]),_:1}))]),permissions:t(({rows:u})=>[o(S,{type:"primary",size:"small",plain:"",onClick:le=>N(u)},{default:t(()=>[p("\u7BA1\u7406")]),_:2},1032,["onClick"])]),_:1},8,["columns","tableData","total"])]),o(x,{title:n.value?"\u7F16\u8F91":"\u65B0\u589E",modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=u=>e.value=u),width:"700px","destroy-on-close":"","close-on-click-modal":!1,onClose:T},{default:t(()=>[o(P,{"form-data":m.value,options:s.value,edit:n.value,update:j},null,8,["form-data","options","edit"])]),_:1},8,["title","modelValue"]),o(x,{title:"\u67E5\u770B\u8BE6\u60C5",modelValue:B.value,"onUpdate:modelValue":r[2]||(r[2]=u=>B.value=u),width:"700px","destroy-on-close":""},{default:t(()=>[o(R,{data:F.value},{status:t(({rows:u})=>[u.status?(c(),D(b,{key:0,type:"success"},{default:t(()=>[p("\u542F\u7528")]),_:1})):(c(),D(b,{key:1,type:"danger"},{default:t(()=>[p("\u7981\u7528")]),_:1}))]),_:1},8,["data"])]),_:1},8,["modelValue"]),o(x,{title:"\u6743\u9650\u7BA1\u7406",modelValue:w.value,"onUpdate:modelValue":r[3]||(r[3]=u=>w.value=u),width:"500px","destroy-on-close":""},{default:t(()=>[o(ee,{"permiss-options":V.value},null,8,["permiss-options"])]),_:1},8,["modelValue"])])}}});export{ke as default};
//# sourceMappingURL=role.0bcb44b7.js.map
