{"version":3,"file":"index.b3b378ba.js","sources":["../../node_modules/zrender/lib/svg/SVGPathRebuilder.js","../../node_modules/zrender/lib/svg/mapStyleToAttrs.js","../../node_modules/zrender/lib/svg/core.js","../../node_modules/zrender/lib/svg/cssClassId.js","../../node_modules/zrender/lib/svg/cssAnimation.js","../../node_modules/zrender/lib/svg/cssEmphasis.js","../../node_modules/zrender/lib/svg/graphic.js","../../node_modules/zrender/lib/svg/domapi.js","../../node_modules/zrender/lib/svg/patch.js","../../node_modules/zrender/lib/svg/Painter.js","../../node_modules/echarts/lib/renderer/installSVGRenderer.js","../../node_modules/echarts/lib/chart/scatter/ScatterSeries.js","../../node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","../../node_modules/echarts/lib/chart/scatter/ScatterView.js","../../node_modules/echarts/lib/chart/scatter/install.js","../../node_modules/echarts/lib/chart/radar/radarLayout.js","../../node_modules/echarts/lib/chart/radar/backwardCompat.js","../../node_modules/echarts/lib/chart/radar/RadarView.js","../../node_modules/echarts/lib/chart/radar/RadarSeries.js","../../node_modules/echarts/lib/coord/radar/RadarModel.js","../../node_modules/echarts/lib/component/radar/RadarView.js","../../node_modules/echarts/lib/coord/radar/IndicatorAxis.js","../../node_modules/echarts/lib/coord/radar/Radar.js","../../node_modules/echarts/lib/component/radar/install.js","../../node_modules/echarts/lib/chart/radar/install.js","../../node_modules/echarts/lib/chart/tree/layoutHelper.js","../../node_modules/echarts/lib/chart/tree/TreeView.js","../../node_modules/echarts/lib/data/helper/linkSeriesData.js","../../node_modules/echarts/lib/data/Tree.js","../../node_modules/echarts/lib/chart/helper/treeHelper.js","../../node_modules/echarts/lib/chart/tree/TreeSeries.js","../../node_modules/echarts/lib/chart/tree/traversalHelper.js","../../node_modules/echarts/lib/chart/tree/treeLayout.js","../../node_modules/echarts/lib/chart/tree/treeVisual.js","../../node_modules/echarts/lib/chart/tree/treeAction.js","../../node_modules/echarts/lib/chart/tree/install.js","../../node_modules/echarts/lib/chart/treemap/treemapAction.js","../../node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","../../node_modules/echarts/lib/chart/treemap/TreemapSeries.js","../../node_modules/echarts/lib/chart/treemap/Breadcrumb.js","../../node_modules/echarts/lib/util/animation.js","../../node_modules/echarts/lib/chart/treemap/TreemapView.js","../../node_modules/echarts/lib/chart/treemap/treemapVisual.js","../../node_modules/echarts/lib/chart/treemap/treemapLayout.js","../../node_modules/echarts/lib/chart/treemap/install.js","../../node_modules/echarts/lib/chart/graph/categoryFilter.js","../../node_modules/echarts/lib/chart/graph/categoryVisual.js","../../node_modules/echarts/lib/chart/graph/edgeVisual.js","../../node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../../node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../../node_modules/echarts/lib/chart/graph/simpleLayout.js","../../node_modules/echarts/lib/chart/graph/graphHelper.js","../../node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../../node_modules/echarts/lib/chart/graph/circularLayout.js","../../node_modules/echarts/lib/chart/graph/forceHelper.js","../../node_modules/echarts/lib/chart/graph/forceLayout.js","../../node_modules/echarts/lib/chart/graph/createView.js","../../node_modules/echarts/lib/chart/helper/LinePath.js","../../node_modules/echarts/lib/chart/helper/Line.js","../../node_modules/echarts/lib/chart/helper/LineDraw.js","../../node_modules/echarts/lib/chart/graph/adjustEdge.js","../../node_modules/echarts/lib/chart/graph/GraphView.js","../../node_modules/echarts/lib/data/Graph.js","../../node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../../node_modules/echarts/lib/chart/graph/GraphSeries.js","../../node_modules/echarts/lib/chart/graph/install.js","../../node_modules/echarts/lib/chart/gauge/PointerPath.js","../../node_modules/echarts/lib/chart/gauge/GaugeView.js","../../node_modules/echarts/lib/chart/gauge/GaugeSeries.js","../../node_modules/echarts/lib/chart/gauge/install.js","../../node_modules/echarts/lib/chart/funnel/FunnelView.js","../../node_modules/echarts/lib/chart/funnel/FunnelSeries.js","../../node_modules/echarts/lib/chart/funnel/funnelLayout.js","../../node_modules/echarts/lib/chart/funnel/install.js","../../node_modules/echarts/lib/chart/parallel/ParallelView.js","../../node_modules/echarts/lib/chart/parallel/ParallelSeries.js","../../node_modules/echarts/lib/chart/parallel/parallelVisual.js","../../node_modules/echarts/lib/coord/parallel/parallelPreprocessor.js","../../node_modules/echarts/lib/component/parallel/ParallelView.js","../../node_modules/echarts/lib/coord/parallel/ParallelModel.js","../../node_modules/echarts/lib/coord/parallel/ParallelAxis.js","../../node_modules/echarts/lib/coord/parallel/Parallel.js","../../node_modules/echarts/lib/coord/parallel/parallelCreator.js","../../node_modules/echarts/lib/coord/parallel/AxisModel.js","../../node_modules/echarts/lib/component/helper/BrushController.js","../../node_modules/echarts/lib/component/helper/brushHelper.js","../../node_modules/echarts/lib/component/axis/ParallelAxisView.js","../../node_modules/echarts/lib/component/axis/parallelAxisAction.js","../../node_modules/echarts/lib/component/parallel/install.js","../../node_modules/echarts/lib/chart/parallel/install.js","../../node_modules/echarts/lib/chart/sankey/SankeyView.js","../../node_modules/echarts/lib/chart/sankey/SankeySeries.js","../../node_modules/echarts/lib/chart/sankey/sankeyLayout.js","../../node_modules/echarts/lib/chart/sankey/sankeyVisual.js","../../node_modules/echarts/lib/chart/sankey/install.js","../../node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","../../node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","../../node_modules/echarts/lib/chart/boxplot/BoxplotView.js","../../node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","../../node_modules/echarts/lib/chart/boxplot/prepareBoxplotData.js","../../node_modules/echarts/lib/chart/boxplot/boxplotTransform.js","../../node_modules/echarts/lib/chart/boxplot/install.js","../../node_modules/echarts/lib/chart/candlestick/CandlestickView.js","../../node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","../../node_modules/echarts/lib/chart/candlestick/preprocessor.js","../../node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","../../node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","../../node_modules/echarts/lib/chart/candlestick/install.js","../../node_modules/echarts/lib/chart/helper/EffectSymbol.js","../../node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","../../node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","../../node_modules/echarts/lib/chart/effectScatter/install.js","../../node_modules/echarts/lib/chart/helper/EffectLine.js","../../node_modules/echarts/lib/chart/helper/Polyline.js","../../node_modules/echarts/lib/chart/helper/EffectPolyline.js","../../node_modules/echarts/lib/chart/helper/LargeLineDraw.js","../../node_modules/echarts/lib/chart/lines/linesLayout.js","../../node_modules/echarts/lib/chart/lines/LinesView.js","../../node_modules/echarts/lib/chart/lines/LinesSeries.js","../../node_modules/echarts/lib/chart/lines/linesVisual.js","../../node_modules/echarts/lib/chart/lines/install.js","../../node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","../../node_modules/echarts/lib/chart/heatmap/HeatmapView.js","../../node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","../../node_modules/echarts/lib/chart/heatmap/install.js","../../node_modules/echarts/lib/chart/bar/PictorialBarView.js","../../node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","../../node_modules/echarts/lib/chart/bar/installPictorialBar.js","../../node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","../../node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","../../node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","../../node_modules/echarts/lib/chart/themeRiver/install.js","../../node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","../../node_modules/echarts/lib/chart/sunburst/sunburstAction.js","../../node_modules/echarts/lib/chart/sunburst/SunburstView.js","../../node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","../../node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","../../node_modules/echarts/lib/chart/sunburst/sunburstVisual.js","../../node_modules/echarts/lib/chart/sunburst/install.js","../../node_modules/echarts/lib/chart/custom/CustomSeries.js","../../node_modules/echarts/lib/coord/cartesian/prepareCustom.js","../../node_modules/echarts/lib/coord/geo/prepareCustom.js","../../node_modules/echarts/lib/coord/single/prepareCustom.js","../../node_modules/echarts/lib/coord/polar/prepareCustom.js","../../node_modules/echarts/lib/coord/calendar/prepareCustom.js","../../node_modules/echarts/lib/util/styleCompat.js","../../node_modules/echarts/lib/animation/customGraphicTransition.js","../../node_modules/echarts/lib/animation/customGraphicKeyframeAnimation.js","../../node_modules/echarts/lib/chart/custom/CustomView.js","../../node_modules/echarts/lib/chart/custom/install.js","../../node_modules/echarts/lib/component/axisPointer/PolarAxisPointer.js","../../node_modules/echarts/lib/coord/polar/PolarModel.js","../../node_modules/echarts/lib/coord/polar/AxisModel.js","../../node_modules/echarts/lib/coord/polar/RadiusAxis.js","../../node_modules/echarts/lib/coord/polar/AngleAxis.js","../../node_modules/echarts/lib/coord/polar/Polar.js","../../node_modules/echarts/lib/coord/polar/polarCreator.js","../../node_modules/echarts/lib/component/axis/AngleAxisView.js","../../node_modules/echarts/lib/component/axis/RadiusAxisView.js","../../node_modules/echarts/lib/layout/barPolar.js","../../node_modules/echarts/lib/component/polar/install.js","../../node_modules/echarts/lib/coord/single/singleAxisHelper.js","../../node_modules/echarts/lib/component/axis/SingleAxisView.js","../../node_modules/echarts/lib/coord/single/AxisModel.js","../../node_modules/echarts/lib/coord/single/SingleAxis.js","../../node_modules/echarts/lib/coord/single/Single.js","../../node_modules/echarts/lib/coord/single/singleCreator.js","../../node_modules/echarts/lib/component/axisPointer/SingleAxisPointer.js","../../node_modules/echarts/lib/component/singleAxis/install.js","../../node_modules/echarts/lib/coord/calendar/CalendarModel.js","../../node_modules/echarts/lib/component/calendar/CalendarView.js","../../node_modules/echarts/lib/coord/calendar/Calendar.js","../../node_modules/echarts/lib/component/calendar/install.js","../../node_modules/echarts/lib/component/graphic/GraphicModel.js","../../node_modules/echarts/lib/component/graphic/GraphicView.js","../../node_modules/echarts/lib/component/graphic/install.js","../../node_modules/echarts/lib/component/dataZoom/helper.js","../../node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","../../node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../../node_modules/echarts/lib/component/dataZoom/DataZoomView.js","../../node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../../node_modules/echarts/lib/component/dataZoom/AxisProxy.js","../../node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","../../node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","../../node_modules/echarts/lib/component/dataZoom/installCommon.js","../../node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../../node_modules/echarts/lib/component/toolbox/featureManager.js","../../node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../../node_modules/echarts/lib/component/toolbox/ToolboxView.js","../../node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../../node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../../node_modules/echarts/lib/component/toolbox/feature/DataView.js","../../node_modules/echarts/lib/component/dataZoom/history.js","../../node_modules/echarts/lib/component/toolbox/feature/Restore.js","../../node_modules/echarts/lib/component/helper/BrushTargetManager.js","../../node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../../node_modules/echarts/lib/component/toolbox/install.js","../../node_modules/echarts/lib/component/brush/preprocessor.js","../../node_modules/echarts/lib/component/brush/selector.js","../../node_modules/echarts/lib/component/brush/visualEncoding.js","../../node_modules/echarts/lib/component/brush/BrushView.js","../../node_modules/echarts/lib/component/brush/BrushModel.js","../../node_modules/echarts/lib/component/toolbox/feature/Brush.js","../../node_modules/echarts/lib/component/brush/install.js","../../node_modules/echarts/lib/component/timeline/TimelineModel.js","../../node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","../../node_modules/echarts/lib/component/timeline/TimelineView.js","../../node_modules/echarts/lib/component/timeline/TimelineAxis.js","../../node_modules/echarts/lib/component/timeline/SliderTimelineView.js","../../node_modules/echarts/lib/component/timeline/timelineAction.js","../../node_modules/echarts/lib/component/timeline/preprocessor.js","../../node_modules/echarts/lib/component/timeline/install.js","../../node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","../../node_modules/echarts/lib/component/marker/MarkerModel.js","../../node_modules/echarts/lib/component/marker/MarkPointModel.js","../../node_modules/echarts/lib/component/marker/markerHelper.js","../../node_modules/echarts/lib/component/marker/MarkerView.js","../../node_modules/echarts/lib/component/marker/MarkPointView.js","../../node_modules/echarts/lib/component/marker/installMarkPoint.js","../../node_modules/echarts/lib/component/marker/MarkLineModel.js","../../node_modules/echarts/lib/component/marker/MarkLineView.js","../../node_modules/echarts/lib/component/marker/installMarkLine.js","../../node_modules/echarts/lib/component/marker/MarkAreaModel.js","../../node_modules/echarts/lib/component/marker/MarkAreaView.js","../../node_modules/echarts/lib/component/marker/installMarkArea.js","../../node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","../../node_modules/echarts/lib/component/dataZoom/roams.js","../../node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","../../node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","../../node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","../../node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","../../node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","../../node_modules/echarts/lib/component/dataZoom/install.js","../../node_modules/echarts/lib/visual/aria.js","../../node_modules/echarts/lib/component/aria/preprocessor.js","../../node_modules/echarts/lib/component/aria/install.js","../../node_modules/echarts/lib/util/conditionalExpression.js","../../node_modules/echarts/lib/component/transform/filterTransform.js","../../node_modules/echarts/lib/component/transform/sortTransform.js","../../node_modules/echarts/lib/component/transform/install.js","../../node_modules/zrender/lib/tool/convertPath.js","../../node_modules/zrender/lib/tool/dividePath.js","../../node_modules/zrender/lib/tool/morphPath.js","../../node_modules/echarts/lib/animation/morphTransitionHelper.js","../../node_modules/echarts/lib/animation/universalTransition.js","../../node_modules/echarts/index.js"],"sourcesContent":["import { isAroundZero } from './helper.js';\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function (precision) {\n        this._start = true;\n        this._d = [];\n        this._str = '';\n        this._p = Math.pow(10, precision || 4);\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = cx + rx * mathCos(startAngle);\n        var y0 = cy + ry * mathSin(startAngle);\n        if (this._start) {\n            this._add('M', x0, y0);\n        }\n        var xRot = Math.round(psi * degree);\n        if (isCircle) {\n            var p = 1 / this._p;\n            var dTheta_1 = (clockwise ? 1 : -1) * (PI2 - p);\n            this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos(startAngle + dTheta_1), cy + ry * mathSin(startAngle + dTheta_1));\n            if (p > 1e-2) {\n                this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n            }\n        }\n        else {\n            var x = cx + rx * mathCos(endAngle);\n            var y = cy + ry * mathSin(endAngle);\n            this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n        }\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('l', w, 0);\n        this._add('l', 0, h);\n        this._add('l', -w, 0);\n        this._add('Z');\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        var vals = [];\n        var p = this._p;\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            vals.push(Math.round(val * p) / p);\n        }\n        this._d.push(cmd + vals.join(' '));\n        this._start = cmd === 'Z';\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join('');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nexport default SVGPathRebuilder;\n","import { DEFAULT_PATH_STYLE } from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineDash } from '../canvas/dashStyle.js';\nimport { map } from '../core/util.js';\nimport { normalizeColor } from './helper.js';\nvar NONE = 'none';\nvar mathRound = Math.round;\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nvar strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\nvar svgStrokeProps = map(strokeProps, function (prop) { return \"stroke-\" + prop.toLowerCase(); });\nexport default function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        updateAttr('opacity', opacity);\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = normalizeColor(style.fill);\n        updateAttr('fill', fill.color);\n        var fillOpacity = style.fillOpacity != null\n            ? style.fillOpacity * fill.opacity * opacity\n            : fill.opacity * opacity;\n        if (forceUpdate || fillOpacity < 1) {\n            updateAttr('fill-opacity', fillOpacity);\n        }\n    }\n    else {\n        updateAttr('fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = normalizeColor(style.stroke);\n        updateAttr('stroke', stroke.color);\n        var strokeScale = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        var strokeWidth = (strokeScale ? (style.lineWidth || 0) / strokeScale : 0);\n        var strokeOpacity = style.strokeOpacity != null\n            ? style.strokeOpacity * stroke.opacity * opacity\n            : stroke.opacity * opacity;\n        var strokeFirst = style.strokeFirst;\n        if (forceUpdate || strokeWidth !== 1) {\n            updateAttr('stroke-width', strokeWidth);\n        }\n        if (forceUpdate || strokeFirst) {\n            updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n        }\n        if (forceUpdate || strokeOpacity < 1) {\n            updateAttr('stroke-opacity', strokeOpacity);\n        }\n        if (style.lineDash) {\n            var _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n            if (lineDash) {\n                lineDashOffset = mathRound(lineDashOffset || 0);\n                updateAttr('stroke-dasharray', lineDash.join(','));\n                if (lineDashOffset || forceUpdate) {\n                    updateAttr('stroke-dashoffset', lineDashOffset);\n                }\n            }\n        }\n        else if (forceUpdate) {\n            updateAttr('stroke-dasharray', NONE);\n        }\n        for (var i = 0; i < strokeProps.length; i++) {\n            var propName = strokeProps[i];\n            if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n                var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n                val && updateAttr(svgStrokeProps[i], val);\n            }\n        }\n    }\n    else if (forceUpdate) {\n        updateAttr('stroke', NONE);\n    }\n}\n","import { keys, map } from '../core/util.js';\nimport { encodeHTML } from '../core/dom.js';\nexport var SVGNS = 'http://www.w3.org/2000/svg';\nexport var XLINKNS = 'http://www.w3.org/1999/xlink';\nexport var XMLNS = 'http://www.w3.org/2000/xmlns/';\nexport var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\nexport var META_DATA_PREFIX = 'ecmeta_';\nexport function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n}\n;\nexport function createVNode(tag, key, attrs, children, text) {\n    return {\n        tag: tag,\n        attrs: attrs || {},\n        children: children,\n        text: text,\n        key: key\n    };\n}\nfunction createElementOpen(name, attrs) {\n    var attrsStr = [];\n    if (attrs) {\n        for (var key in attrs) {\n            var val = attrs[key];\n            var part = key;\n            if (val === false) {\n                continue;\n            }\n            else if (val !== true && val != null) {\n                part += \"=\\\"\" + val + \"\\\"\";\n            }\n            attrsStr.push(part);\n        }\n    }\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n}\nfunction createElementClose(name) {\n    return \"</\" + name + \">\";\n}\nexport function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    function convertElToString(el) {\n        var children = el.children, tag = el.tag, attrs = el.attrs, text = el.text;\n        return createElementOpen(tag, attrs)\n            + (tag !== 'style' ? encodeHTML(text) : text || '')\n            + (children ? \"\" + S + map(children, function (child) { return convertElToString(child); }).join(S) + S : '')\n            + createElementClose(tag);\n    }\n    return convertElToString(el);\n}\nexport function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n        return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n            return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n        }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n        return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n            return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n                var val = animationNodes[animationName][percent][attrName];\n                if (attrName === 'd') {\n                    val = \"path(\\\"\" + val + \"\\\")\";\n                }\n                return attrName + \":\" + val + \";\";\n            }).join(S) + bracketEnd;\n        }).join(S) + bracketEnd;\n    }).join(S);\n    if (!selectors && !animations) {\n        return '';\n    }\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n}\nexport function createBrushScope(zrId) {\n    return {\n        zrId: zrId,\n        shadowCache: {},\n        patternCache: {},\n        gradientCache: {},\n        clipPathCache: {},\n        defs: {},\n        cssNodes: {},\n        cssAnims: {},\n        cssStyleCache: {},\n        cssAnimIdx: 0,\n        shadowIdx: 0,\n        gradientIdx: 0,\n        patternIdx: 0,\n        clipPathIdx: 0\n    };\n}\nexport function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n        'width': width,\n        'height': height,\n        'xmlns': SVGNS,\n        'xmlns:xlink': XLINKNS,\n        'version': '1.1',\n        'baseProfile': 'full',\n        'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n}\n","var cssClassIdx = 0;\nexport function getClassId() {\n    return cssClassIdx++;\n}\n","import { copyTransform } from '../core/Transformable.js';\nimport { createBrushScope } from './core.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { getPathPrecision, getSRTTransformString } from './helper.js';\nimport { each, extend, filter, isNumber, isString, keys } from '../core/util.js';\nimport CompoundPath from '../graphic/CompoundPath.js';\nimport { createCubicEasingFunc } from '../animation/cubicEasing.js';\nimport { getClassId } from './cssClassId.js';\nexport var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n};\nvar transformOriginKey = 'transform-origin';\nfunction buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n}\nfunction setTransformOrigin(target, transform) {\n    var originX = transform.originX, originY = transform.originY;\n    if (originX || originY) {\n        target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n}\nexport var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n};\nfunction addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n}\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n        var subScope = createBrushScope(scope.zrId);\n        subScope.animation = true;\n        createCSSAnimation(path, {}, subScope, true);\n        var cssAnims = subScope.cssAnims;\n        var cssNodes = subScope.cssNodes;\n        var animNames = keys(cssAnims);\n        var len = animNames.length;\n        if (!len) {\n            return;\n        }\n        cssAnimationName = animNames[len - 1];\n        var lastAnim = cssAnims[cssAnimationName];\n        for (var percent in lastAnim) {\n            var kf = lastAnim[percent];\n            composedAnim[percent] = composedAnim[percent] || { d: '' };\n            composedAnim[percent].d += kf.d || '';\n        }\n        for (var className in cssNodes) {\n            var val = cssNodes[className].animation;\n            if (val.indexOf(cssAnimationName) >= 0) {\n                cssAnimationCfg = val;\n            }\n        }\n    });\n    if (!cssAnimationCfg) {\n        return;\n    }\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\nfunction getEasingFunc(easing) {\n    return isString(easing)\n        ? EASING_MAP[easing]\n            ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\"\n            : createCubicEasingFunc(easing) ? easing : ''\n        : '';\n}\nexport function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n    if (el instanceof CompoundPath) {\n        var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n        else if (!len) {\n            return;\n        }\n    }\n    else if (!len) {\n        return;\n    }\n    var groupAnimators = {};\n    for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n        var easing = getEasingFunc(animator.getClip().easing);\n        var delay = animator.getDelay();\n        if (easing) {\n            cfgArr.push(easing);\n        }\n        else {\n            cfgArr.push('linear');\n        }\n        if (delay) {\n            cfgArr.push(delay / 1000 + 's');\n        }\n        if (animator.getLoop()) {\n            cfgArr.push('infinite');\n        }\n        var cfg = cfgArr.join(' ');\n        groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n        groupAnimators[cfg][1].push(animator);\n    }\n    function createSingleCSSAnimation(groupAnimator) {\n        var animators = groupAnimator[1];\n        var len = animators.length;\n        var transformKfs = {};\n        var shapeKfs = {};\n        var finalKfs = {};\n        var animationTimingFunctionAttrName = 'animation-timing-function';\n        function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n            var tracks = animator.getTracks();\n            var maxTime = animator.getMaxTime();\n            for (var k = 0; k < tracks.length; k++) {\n                var track = tracks[k];\n                if (track.needsAnimate()) {\n                    var kfs = track.keyframes;\n                    var attrName = track.propName;\n                    toCssAttrName && (attrName = toCssAttrName(attrName));\n                    if (attrName) {\n                        for (var i = 0; i < kfs.length; i++) {\n                            var kf = kfs[i];\n                            var percent = Math.round(kf.time / maxTime * 100) + '%';\n                            var kfEasing = getEasingFunc(kf.easing);\n                            var rawValue = kf.rawValue;\n                            if (isString(rawValue) || isNumber(rawValue)) {\n                                cssKfs[percent] = cssKfs[percent] || {};\n                                cssKfs[percent][attrName] = kf.rawValue;\n                                if (kfEasing) {\n                                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            var targetProp = animator.targetName;\n            if (!targetProp) {\n                !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n            }\n            else if (targetProp === 'shape') {\n                saveAnimatorTrackToCssKfs(animator, shapeKfs);\n            }\n        }\n        for (var percent in transformKfs) {\n            var transform = {};\n            copyTransform(transform, el);\n            extend(transform, transformKfs[percent]);\n            var str = getSRTTransformString(transform);\n            var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n            finalKfs[percent] = str ? {\n                transform: str\n            } : {};\n            setTransformOrigin(finalKfs[percent], transform);\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        var path;\n        var canAnimateShape = true;\n        for (var percent in shapeKfs) {\n            finalKfs[percent] = finalKfs[percent] || {};\n            var isFirst = !path;\n            var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n            if (isFirst) {\n                path = new PathProxy();\n            }\n            var len_1 = path.len();\n            path.reset();\n            finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n            var newLen = path.len();\n            if (!isFirst && len_1 !== newLen) {\n                canAnimateShape = false;\n                break;\n            }\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        if (!canAnimateShape) {\n            for (var percent in finalKfs) {\n                delete finalKfs[percent].d;\n            }\n        }\n        if (!onlyShape) {\n            for (var i = 0; i < len; i++) {\n                var animator = animators[i];\n                var targetProp = animator.targetName;\n                if (targetProp === 'style') {\n                    saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) { return ANIMATE_STYLE_MAP[propName]; });\n                }\n            }\n        }\n        var percents = keys(finalKfs);\n        var allTransformOriginSame = true;\n        var transformOrigin;\n        for (var i = 1; i < percents.length; i++) {\n            var p0 = percents[i - 1];\n            var p1 = percents[i];\n            if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n                allTransformOriginSame = false;\n                break;\n            }\n            transformOrigin = finalKfs[p0][transformOriginKey];\n        }\n        if (allTransformOriginSame && transformOrigin) {\n            for (var percent in finalKfs) {\n                if (finalKfs[percent][transformOriginKey]) {\n                    delete finalKfs[percent][transformOriginKey];\n                }\n            }\n            attrs[transformOriginKey] = transformOrigin;\n        }\n        if (filter(percents, function (percent) { return keys(finalKfs[percent]).length > 0; }).length) {\n            var animationName = addAnimation(finalKfs, scope);\n            return animationName + \" \" + groupAnimator[0] + \" both\";\n        }\n    }\n    for (var key in groupAnimators) {\n        var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n    }\n    if (cssAnimations.length) {\n        var className = scope.zrId + '-cls-' + getClassId();\n        scope.cssNodes['.' + className] = {\n            animation: cssAnimations.join(',')\n        };\n        attrs[\"class\"] = className;\n    }\n}\n","import { liftColor } from '../tool/color.js';\nimport { getClassId } from './cssClassId.js';\nexport function createCSSEmphasis(el, attrs, scope) {\n    if (!el.ignore) {\n        if (el.isSilent()) {\n            var style = {\n                'pointer-events': 'none'\n            };\n            setClassAttribute(style, attrs, scope, true);\n        }\n        else {\n            var emphasisStyle = el.states.emphasis && el.states.emphasis.style\n                ? el.states.emphasis.style\n                : {};\n            var fill = emphasisStyle.fill;\n            if (!fill) {\n                var normalFill = el.style && el.style.fill;\n                var selectFill = el.states.select\n                    && el.states.select.style\n                    && el.states.select.style.fill;\n                var fromFill = el.currentStates.indexOf('select') >= 0\n                    ? (selectFill || normalFill)\n                    : normalFill;\n                if (fromFill) {\n                    fill = liftColor(fromFill);\n                }\n            }\n            var lineWidth = emphasisStyle.lineWidth;\n            if (lineWidth) {\n                var scaleX = (!emphasisStyle.strokeNoScale && el.transform)\n                    ? el.transform[0]\n                    : 1;\n                lineWidth = lineWidth / scaleX;\n            }\n            var style = {\n                cursor: 'pointer'\n            };\n            if (fill) {\n                style.fill = fill;\n            }\n            if (emphasisStyle.stroke) {\n                style.stroke = emphasisStyle.stroke;\n            }\n            if (lineWidth) {\n                style['stroke-width'] = lineWidth;\n            }\n            setClassAttribute(style, attrs, scope, true);\n        }\n    }\n}\nfunction setClassAttribute(style, attrs, scope, withHover) {\n    var styleKey = JSON.stringify(style);\n    var className = scope.cssStyleCache[styleKey];\n    if (!className) {\n        className = scope.zrId + '-cls-' + getClassId();\n        scope.cssStyleCache[styleKey] = className;\n        scope.cssNodes['.' + className + (withHover ? ':hover' : '')] = style;\n    }\n    attrs[\"class\"] = attrs[\"class\"] ? (attrs[\"class\"] + ' ' + className) : className;\n}\n","import { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineHeight } from '../contain/text.js';\nimport TSpan from '../graphic/TSpan.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\nimport { createVNode, vNodeToString, META_DATA_PREFIX } from './core.js';\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\nimport { createCSSAnimation } from './cssAnimation.js';\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\nimport { createCSSEmphasis } from './cssEmphasis.js';\nimport { getElementSSRData } from '../zrender.js';\nvar round = Math.round;\nfunction isImageLike(val) {\n    return val && isString(val.src);\n}\nfunction isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n}\nfunction setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n        var isFillStroke = key === 'fill' || key === 'stroke';\n        if (isFillStroke && isGradient(val)) {\n            setGradient(style, attrs, key, scope);\n        }\n        else if (isFillStroke && isPattern(val)) {\n            setPattern(el, attrs, key, scope);\n        }\n        else if (isFillStroke && val === 'none') {\n            attrs[key] = 'transparent';\n        }\n        else {\n            attrs[key] = val;\n        }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n}\nfunction setMetaData(attrs, el) {\n    var metaData = getElementSSRData(el);\n    if (metaData) {\n        metaData.each(function (val, key) {\n            val != null && (attrs[(META_DATA_PREFIX + key).toLowerCase()] = val + '');\n        });\n        if (el.isSilent()) {\n            attrs[META_DATA_PREFIX + 'silent'] = 'true';\n        }\n    }\n}\nfunction noRotateScale(m) {\n    return isAroundZero(m[0] - 1)\n        && isAroundZero(m[1])\n        && isAroundZero(m[2])\n        && isAroundZero(m[3] - 1);\n}\nfunction noTranslate(m) {\n    return isAroundZero(m[4]) && isAroundZero(m[5]);\n}\nfunction setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n        var mul = compress ? 10 : 1e4;\n        attrs.transform = noRotateScale(m)\n            ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n}\nfunction convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n    for (var i = 0; i < points.length; i++) {\n        strArr.push(round(points[i][0] * mul) / mul);\n        strArr.push(round(points[i][1] * mul) / mul);\n    }\n    attrs.points = strArr.join(' ');\n}\nfunction validatePolyShape(shape) {\n    return !shape.smooth;\n}\nfunction createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n        return (typeof item === 'string' ? [item, item] : item);\n    });\n    return function (shape, attrs, mul) {\n        for (var i = 0; i < normalizedDesc.length; i++) {\n            var item = normalizedDesc[i];\n            var val = shape[item[0]];\n            if (val != null) {\n                attrs[item[1]] = round(val * mul) / mul;\n            }\n        }\n    };\n}\nvar builtinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n};\nfunction hasShapeAnimation(el) {\n    var animators = el.animators;\n    for (var i = 0; i < animators.length; i++) {\n        if (animators[i].targetName === 'shape') {\n            return true;\n        }\n    }\n    return false;\n}\nexport function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = builtinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = (scope.compress && getPathPrecision(el)) || 4;\n    if (builtinShpDef\n        && !scope.willUpdate\n        && !(builtinShpDef[1] && !builtinShpDef[1](shape))\n        && !(needsAnimate && hasShapeAnimation(el))\n        && !(strokePercent < 1)) {\n        svgElType = el.type;\n        var mul = Math.pow(10, precision);\n        builtinShpDef[0](shape, attrs, mul);\n    }\n    else {\n        var needBuildPath = !el.path || el.shapeChanged();\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (needBuildPath) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion\n            || !svgPathBuilder\n            || strokePercent !== elExt.__svgPathStrokePercent) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset(precision);\n            path.rebuildPath(svgPathBuilder, strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n            elExt.__svgPathStrokePercent = strokePercent;\n        }\n        attrs.d = svgPathBuilder.getStr();\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    setMetaData(attrs, el);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    scope.emphasis && createCSSEmphasis(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n}\nexport function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n    if (image && !isString(image)) {\n        if (isImageLike(image)) {\n            image = image.src;\n        }\n        else if (isCanvasLike(image)) {\n            image = image.toDataURL();\n        }\n    }\n    if (!image) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n        href: image,\n        width: dw,\n        height: dh\n    };\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    setMetaData(attrs, el);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n}\n;\nexport function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n        return;\n    }\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n        || style.textAlign;\n    var attrs = {\n        'dominant-baseline': 'central',\n        'text-anchor': textAlign\n    };\n    if (hasSeparateFont(style)) {\n        var separatedFontStr = '';\n        var fontStyle = style.fontStyle;\n        var fontSize = parseFontSize(style.fontSize);\n        if (!parseFloat(fontSize)) {\n            return;\n        }\n        var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n        var fontWeight = style.fontWeight;\n        separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n        if (fontStyle && fontStyle !== 'normal') {\n            separatedFontStr += \"font-style:\" + fontStyle + \";\";\n        }\n        if (fontWeight && fontWeight !== 'normal') {\n            separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n        }\n        attrs.style = separatedFontStr;\n    }\n    else {\n        attrs.style = \"font: \" + font;\n    }\n    if (text.match(/\\s/)) {\n        attrs['xml:space'] = 'preserve';\n    }\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    setMetaData(attrs, el);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n}\nexport function brush(el, scope) {\n    if (el instanceof Path) {\n        return brushSVGPath(el, scope);\n    }\n    else if (el instanceof ZRImage) {\n        return brushSVGImage(el, scope);\n    }\n    else if (el instanceof TSpan) {\n        return brushSVGTSpan(el, scope);\n    }\n}\nfunction setShadow(el, attrs, scope) {\n    var style = el.style;\n    if (hasShadow(style)) {\n        var shadowKey = getShadowKey(el);\n        var shadowCache = scope.shadowCache;\n        var shadowId = shadowCache[shadowKey];\n        if (!shadowId) {\n            var globalScale = el.getGlobalScale();\n            var scaleX = globalScale[0];\n            var scaleY = globalScale[1];\n            if (!scaleX || !scaleY) {\n                return;\n            }\n            var offsetX = style.shadowOffsetX || 0;\n            var offsetY = style.shadowOffsetY || 0;\n            var blur_1 = style.shadowBlur;\n            var _a = normalizeColor(style.shadowColor), opacity = _a.opacity, color = _a.color;\n            var stdDx = blur_1 / 2 / scaleX;\n            var stdDy = blur_1 / 2 / scaleY;\n            var stdDeviation = stdDx + ' ' + stdDy;\n            shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n            scope.defs[shadowId] = createVNode('filter', shadowId, {\n                'id': shadowId,\n                'x': '-100%',\n                'y': '-100%',\n                'width': '300%',\n                'height': '300%'\n            }, [\n                createVNode('feDropShadow', '', {\n                    'dx': offsetX / scaleX,\n                    'dy': offsetY / scaleY,\n                    'stdDeviation': stdDeviation,\n                    'flood-color': color,\n                    'flood-opacity': opacity\n                })\n            ]);\n            shadowCache[shadowKey] = shadowId;\n        }\n        attrs.filter = getIdURL(shadowId);\n    }\n}\nexport function setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n        'gradientUnits': val.global\n            ? 'userSpaceOnUse'\n            : 'objectBoundingBox'\n    };\n    if (isLinearGradient(val)) {\n        gradientTag = 'linearGradient';\n        gradientAttrs.x1 = val.x;\n        gradientAttrs.y1 = val.y;\n        gradientAttrs.x2 = val.x2;\n        gradientAttrs.y2 = val.y2;\n    }\n    else if (isRadialGradient(val)) {\n        gradientTag = 'radialGradient';\n        gradientAttrs.cx = retrieve2(val.x, 0.5);\n        gradientAttrs.cy = retrieve2(val.y, 0.5);\n        gradientAttrs.r = retrieve2(val.r, 0.5);\n    }\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Illegal gradient type.');\n        }\n        return;\n    }\n    var colors = val.colorStops;\n    var colorStops = [];\n    for (var i = 0, len = colors.length; i < len; ++i) {\n        var offset = round4(colors[i].offset) * 100 + '%';\n        var stopColor = colors[i].color;\n        var _a = normalizeColor(stopColor), color = _a.color, opacity = _a.opacity;\n        var stopsAttrs = {\n            'offset': offset\n        };\n        stopsAttrs['stop-color'] = color;\n        if (opacity < 1) {\n            stopsAttrs['stop-opacity'] = opacity;\n        }\n        colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n    if (!gradientId) {\n        gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n        gradientCache[gradientKey] = gradientId;\n        gradientAttrs.id = gradientId;\n        scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n    attrs[target] = getIdURL(gradientId);\n}\nexport function setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var boundingRect = el.getBoundingRect();\n    var patternAttrs = {};\n    var repeat = val.repeat;\n    var noRepeat = repeat === 'no-repeat';\n    var repeatX = repeat === 'repeat-x';\n    var repeatY = repeat === 'repeat-y';\n    var child;\n    if (isImagePattern(val)) {\n        var imageWidth_1 = val.imageWidth;\n        var imageHeight_1 = val.imageHeight;\n        var imageSrc = void 0;\n        var patternImage = val.image;\n        if (isString(patternImage)) {\n            imageSrc = patternImage;\n        }\n        else if (isImageLike(patternImage)) {\n            imageSrc = patternImage.src;\n        }\n        else if (isCanvasLike(patternImage)) {\n            imageSrc = patternImage.toDataURL();\n        }\n        if (typeof Image === 'undefined') {\n            var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n            assert(imageWidth_1, errMsg);\n            assert(imageHeight_1, errMsg);\n        }\n        else if (imageWidth_1 == null || imageHeight_1 == null) {\n            var setSizeToVNode_1 = function (vNode, img) {\n                if (vNode) {\n                    var svgEl = vNode.elm;\n                    var width = imageWidth_1 || img.width;\n                    var height = imageHeight_1 || img.height;\n                    if (vNode.tag === 'pattern') {\n                        if (repeatX) {\n                            height = 1;\n                            width /= boundingRect.width;\n                        }\n                        else if (repeatY) {\n                            width = 1;\n                            height /= boundingRect.height;\n                        }\n                    }\n                    vNode.attrs.width = width;\n                    vNode.attrs.height = height;\n                    if (svgEl) {\n                        svgEl.setAttribute('width', width);\n                        svgEl.setAttribute('height', height);\n                    }\n                }\n            };\n            var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n                noRepeat || setSizeToVNode_1(patternVNode, img);\n                setSizeToVNode_1(child, img);\n            });\n            if (createdImage && createdImage.width && createdImage.height) {\n                imageWidth_1 = imageWidth_1 || createdImage.width;\n                imageHeight_1 = imageHeight_1 || createdImage.height;\n            }\n        }\n        child = createVNode('image', 'img', {\n            href: imageSrc,\n            width: imageWidth_1,\n            height: imageHeight_1\n        });\n        patternAttrs.width = imageWidth_1;\n        patternAttrs.height = imageHeight_1;\n    }\n    else if (val.svgElement) {\n        child = clone(val.svgElement);\n        patternAttrs.width = val.svgWidth;\n        patternAttrs.height = val.svgHeight;\n    }\n    if (!child) {\n        return;\n    }\n    var patternWidth;\n    var patternHeight;\n    if (noRepeat) {\n        patternWidth = patternHeight = 1;\n    }\n    else if (repeatX) {\n        patternHeight = 1;\n        patternWidth = patternAttrs.width / boundingRect.width;\n    }\n    else if (repeatY) {\n        patternWidth = 1;\n        patternHeight = patternAttrs.height / boundingRect.height;\n    }\n    else {\n        patternAttrs.patternUnits = 'userSpaceOnUse';\n    }\n    if (patternWidth != null && !isNaN(patternWidth)) {\n        patternAttrs.width = patternWidth;\n    }\n    if (patternHeight != null && !isNaN(patternHeight)) {\n        patternAttrs.height = patternHeight;\n    }\n    var patternTransform = getSRTTransformString(val);\n    patternTransform && (patternAttrs.patternTransform = patternTransform);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n    if (!patternId) {\n        patternId = scope.zrId + '-p' + scope.patternIdx++;\n        patternCache[patternKey] = patternId;\n        patternAttrs.id = patternId;\n        patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n    attrs[target] = getIdURL(patternId);\n}\nexport function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache, defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n    if (!clipPathId) {\n        clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n        var clipPathAttrs = {\n            id: clipPathId\n        };\n        clipPathCache[clipPath.id] = clipPathId;\n        defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n    attrs['clip-path'] = getIdURL(clipPathId);\n}\n","export function createTextNode(text) {\n    return document.createTextNode(text);\n}\nexport function createComment(text) {\n    return document.createComment(text);\n}\nexport function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nexport function removeChild(node, child) {\n    node.removeChild(child);\n}\nexport function appendChild(node, child) {\n    node.appendChild(child);\n}\nexport function parentNode(node) {\n    return node.parentNode;\n}\nexport function nextSibling(node) {\n    return node.nextSibling;\n}\nexport function tagName(elm) {\n    return elm.tagName;\n}\nexport function setTextContent(node, text) {\n    node.textContent = text;\n}\nexport function getTextContent(node) {\n    return node.textContent;\n}\nexport function isElement(node) {\n    return node.nodeType === 1;\n}\nexport function isText(node) {\n    return node.nodeType === 3;\n}\nexport function isComment(node) {\n    return node.nodeType === 8;\n}\n","import { isArray, isObject } from '../core/util.js';\nimport { createElement, createVNode, XMLNS, XML_NAMESPACE, XLINKNS } from './core.js';\nimport * as api from './domapi.js';\nvar colonChar = 58;\nvar xChar = 120;\nvar emptyNode = createVNode('', '');\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map = {};\n    for (var i = beginIdx; i <= endIdx; ++i) {\n        var key = children[i].key;\n        if (key !== undefined) {\n            if (process.env.NODE_ENV !== 'production') {\n                if (map[key] != null) {\n                    console.error(\"Duplicate key \" + key);\n                }\n            }\n            map[key] = i;\n        }\n    }\n    return map;\n}\nfunction sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n}\nfunction createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        var elm = (vnode.elm = createElement(tag));\n        updateAttrs(emptyNode, vnode);\n        if (isArray(children)) {\n            for (i = 0; i < children.length; ++i) {\n                var ch = children[i];\n                if (ch != null) {\n                    api.appendChild(elm, createElm(ch));\n                }\n            }\n        }\n        else if (isDef(vnode.text) && !isObject(vnode.text)) {\n            api.appendChild(elm, api.createTextNode(vnode.text));\n        }\n    }\n    else {\n        vnode.elm = api.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n}\nfunction addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            api.insertBefore(parentElm, createElm(ch), before);\n        }\n    }\n}\nfunction removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            if (isDef(ch.tag)) {\n                var parent_1 = api.parentNode(ch.elm);\n                api.removeChild(parent_1, ch.elm);\n            }\n            else {\n                api.removeChild(parentElm, ch.elm);\n            }\n        }\n    }\n}\nexport function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n    if (oldAttrs === attrs) {\n        return;\n    }\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, '');\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key === 'style') {\n                    elm.style.cssText = cur;\n                }\n                else if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key === 'xmlns:xlink' || key === 'xmlns') {\n                    elm.setAttributeNS(XMLNS, key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    elm.setAttributeNS(XML_NAMESPACE, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    elm.setAttributeNS(XLINKNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nfunction updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newStartVnode)) {\n            patchVnode(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (sameVnode(oldEndVnode, newEndVnode)) {\n            patchVnode(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newEndVnode)) {\n            patchVnode(oldStartVnode, newEndVnode);\n            api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldEndVnode, newStartVnode)) {\n            patchVnode(oldEndVnode, newStartVnode);\n            api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            if (isUndef(oldKeyToIdx)) {\n                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n            }\n            idxInOld = oldKeyToIdx[newStartVnode.key];\n            if (isUndef(idxInOld)) {\n                api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n            }\n            else {\n                elmToMove = oldCh[idxInOld];\n                if (elmToMove.tag !== newStartVnode.tag) {\n                    api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n                }\n                else {\n                    patchVnode(elmToMove, newStartVnode);\n                    oldCh[idxInOld] = undefined;\n                    api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                }\n            }\n            newStartVnode = newCh[++newStartIdx];\n        }\n    }\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n        }\n        else {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n}\nfunction patchVnode(oldVnode, vnode) {\n    var elm = (vnode.elm = oldVnode.elm);\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (oldVnode === vnode) {\n        return;\n    }\n    updateAttrs(oldVnode, vnode);\n    if (isUndef(vnode.text)) {\n        if (isDef(oldCh) && isDef(ch)) {\n            if (oldCh !== ch) {\n                updateChildren(elm, oldCh, ch);\n            }\n        }\n        else if (isDef(ch)) {\n            if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n            addVnodes(elm, null, ch, 0, ch.length - 1);\n        }\n        else if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        else if (isDef(oldVnode.text)) {\n            api.setTextContent(elm, '');\n        }\n    }\n    else if (oldVnode.text !== vnode.text) {\n        if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        api.setTextContent(elm, vnode.text);\n    }\n}\nexport default function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n        patchVnode(oldVnode, vnode);\n    }\n    else {\n        var elm = oldVnode.elm;\n        var parent_2 = api.parentNode(elm);\n        createElm(vnode);\n        if (parent_2 !== null) {\n            api.insertBefore(parent_2, vnode.elm, api.nextSibling(elm));\n            removeVnodes(parent_2, [oldVnode], 0, 0);\n        }\n    }\n    return vnode;\n}\n","import { brush, setClipPath, setGradient, setPattern } from './graphic.js';\nimport { createElement, createVNode, vNodeToString, getCssString, createBrushScope, createSVGVNode } from './core.js';\nimport { normalizeColor, encodeBase64, isGradient, isPattern } from './helper.js';\nimport { extend, keys, logError, map, noop, retrieve2 } from '../core/util.js';\nimport patch, { updateAttrs } from './patch.js';\nimport { getSize } from '../canvas/helper.js';\nvar svgId = 0;\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.storage = storage;\n        this._opts = opts = extend({}, opts);\n        this.root = root;\n        this._id = 'zr' + svgId++;\n        this._oldVNode = createSVGVNode(opts.width, opts.height);\n        if (root && !opts.ssr) {\n            var viewport = this._viewport = document.createElement('div');\n            viewport.style.cssText = 'position:relative;overflow:hidden';\n            var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n            updateAttrs(null, this._oldVNode);\n            viewport.appendChild(svgDom);\n            root.appendChild(viewport);\n        }\n        this.resize(opts.width, opts.height);\n    }\n    SVGPainter.prototype.getType = function () {\n        return this.type;\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.refresh = function () {\n        if (this.root) {\n            var vnode = this.renderToVNode({\n                willUpdate: true\n            });\n            vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n            patch(this._oldVNode, vnode);\n            this._oldVNode = vnode;\n        }\n    };\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n        return brush(el, createBrushScope(this._id));\n    };\n    SVGPainter.prototype.renderToVNode = function (opts) {\n        opts = opts || {};\n        var list = this.storage.getDisplayList(true);\n        var width = this._width;\n        var height = this._height;\n        var scope = createBrushScope(this._id);\n        scope.animation = opts.animation;\n        scope.willUpdate = opts.willUpdate;\n        scope.compress = opts.compress;\n        scope.emphasis = opts.emphasis;\n        var children = [];\n        var bgVNode = this._bgVNode = createBackgroundVNode(width, height, this._backgroundColor, scope);\n        bgVNode && children.push(bgVNode);\n        var mainVNode = !opts.compress\n            ? (this._mainVNode = createVNode('g', 'main', {}, [])) : null;\n        this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n        mainVNode && children.push(mainVNode);\n        var defs = map(keys(scope.defs), function (id) { return scope.defs[id]; });\n        if (defs.length) {\n            children.push(createVNode('defs', 'defs', {}, defs));\n        }\n        if (opts.animation) {\n            var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, { newline: true });\n            if (animationCssStr) {\n                var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n                children.push(styleNode);\n            }\n        }\n        return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n    SVGPainter.prototype.renderToString = function (opts) {\n        opts = opts || {};\n        return vNodeToString(this.renderToVNode({\n            animation: retrieve2(opts.cssAnimation, true),\n            emphasis: retrieve2(opts.cssEmphasis, true),\n            willUpdate: false,\n            compress: true,\n            useViewBox: retrieve2(opts.useViewBox, true)\n        }), { newline: true });\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._mainVNode && this._mainVNode.elm;\n    };\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n        var listLen = list.length;\n        var clipPathsGroupsStack = [];\n        var clipPathsGroupsStackDepth = 0;\n        var currentClipPathGroup;\n        var prevClipPaths;\n        var clipGroupNodeIdx = 0;\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            if (!displayable.invisible) {\n                var clipPaths = displayable.__clipPaths;\n                var len = clipPaths && clipPaths.length || 0;\n                var prevLen = prevClipPaths && prevClipPaths.length || 0;\n                var lca = void 0;\n                for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n                    if (clipPaths && prevClipPaths\n                        && clipPaths[lca] === prevClipPaths[lca]) {\n                        break;\n                    }\n                }\n                for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n                    clipPathsGroupsStackDepth--;\n                    currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n                }\n                for (var i_2 = lca + 1; i_2 < len; i_2++) {\n                    var groupAttrs = {};\n                    setClipPath(clipPaths[i_2], groupAttrs, scope);\n                    var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n                    clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n                    currentClipPathGroup = g;\n                }\n                prevClipPaths = clipPaths;\n                var ret = brush(displayable, scope);\n                if (ret) {\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n                }\n            }\n        }\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var opts = this._opts;\n        var root = this.root;\n        var viewport = this._viewport;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        if (root && viewport) {\n            viewport.style.display = 'none';\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            viewport.style.display = '';\n        }\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            if (viewport) {\n                var viewportStyle = viewport.style;\n                viewportStyle.width = width + 'px';\n                viewportStyle.height = height + 'px';\n            }\n            if (!isPattern(this._backgroundColor)) {\n                var svgDom = this._svgDom;\n                if (svgDom) {\n                    svgDom.setAttribute('width', width);\n                    svgDom.setAttribute('height', height);\n                }\n                var bgEl = this._bgVNode && this._bgVNode.elm;\n                if (bgEl) {\n                    bgEl.setAttribute('width', width);\n                    bgEl.setAttribute('height', height);\n                }\n            }\n            else {\n                this.refresh();\n            }\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype.dispose = function () {\n        if (this.root) {\n            this.root.innerHTML = '';\n        }\n        this._svgDom =\n            this._viewport =\n                this.storage =\n                    this._oldVNode =\n                        this._bgVNode =\n                            this._mainVNode = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        if (this._svgDom) {\n            this._svgDom.innerHTML = null;\n        }\n        this._oldVNode = null;\n    };\n    SVGPainter.prototype.toDataURL = function (base64) {\n        var str = this.renderToString();\n        var prefix = 'data:image/svg+xml;';\n        if (base64) {\n            str = encodeBase64(str);\n            return str && prefix + 'base64,' + str;\n        }\n        return prefix + 'charset=UTF-8,' + encodeURIComponent(str);\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('In SVG mode painter not support method \"' + method + '\"');\n        }\n    };\n}\nfunction createBackgroundVNode(width, height, backgroundColor, scope) {\n    var bgVNode;\n    if (backgroundColor && backgroundColor !== 'none') {\n        bgVNode = createVNode('rect', 'bg', {\n            width: width,\n            height: height,\n            x: '0',\n            y: '0'\n        });\n        if (isGradient(backgroundColor)) {\n            setGradient({ fill: backgroundColor }, bgVNode.attrs, 'fill', scope);\n        }\n        else if (isPattern(backgroundColor)) {\n            setPattern({\n                style: {\n                    fill: backgroundColor\n                },\n                dirty: noop,\n                getBoundingRect: function () { return ({ width: width, height: height }); }\n            }, bgVNode.attrs, 'fill', scope);\n        }\n        else {\n            var _a = normalizeColor(backgroundColor), color = _a.color, opacity = _a.opacity;\n            bgVNode.attrs.fill = color;\n            opacity < 1 && (bgVNode.attrs['fill-opacity'] = opacity);\n        }\n    }\n    return bgVNode;\n}\nexport default SVGPainter;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SVGPainter from 'zrender/lib/svg/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('svg', SVGPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nvar ScatterSeriesModel = /** @class */function (_super) {\n  __extends(ScatterSeriesModel, _super);\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n    return progressive;\n  };\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n    return progressiveThreshold;\n  };\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\n    // Each progressive series has individual key.\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n  };\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // \n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8\n      // color: \n    },\n\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    }\n    // progressive: null\n  };\n\n  return ScatterSeriesModel;\n}(SeriesModel);\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BOOST_SIZE_THRESHOLD = 4;\nvar LargeSymbolPathShape = /** @class */function () {\n  function LargeSymbolPathShape() {}\n  return LargeSymbolPathShape;\n}();\nvar LargeSymbolPath = /** @class */function (_super) {\n  __extends(LargeSymbolPath, _super);\n  function LargeSymbolPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n  LargeSymbolPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n    var softClipShape = this.softClipShape;\n    var i;\n    // Do draw in afterBrush.\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n    this._ctx = null;\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n    var softClipShape = this.softClipShape;\n    var i;\n    if (!ctx) {\n      return;\n    }\n    // PENDING If style or other canvas status changed?\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4);\n    // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n    return -1;\n  };\n  LargeSymbolPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeSymbolPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = size[0];\n      var h = size[1];\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n    }\n    return rect;\n  };\n  return LargeSymbolPath;\n}(graphic.Path);\nvar LargeSymbolDraw = /** @class */function () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this._clear();\n    var symbolEl = this._create();\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n    this._setCommon(symbolEl, data, opt);\n  };\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n      child.setShape('points', points);\n      // Reset draw cursor.\n      child.reset();\n    });\n  };\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var lastAdded = this._newAdded[0];\n    var points = data.getLayout('points');\n    var oldPoints = lastAdded && lastAdded.shape.points;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldPoints && oldPoints.length < 2e4) {\n      var oldLen = oldPoints.length;\n      var newPoints = new Float32Array(oldLen + points.length);\n      // Concat two array\n      newPoints.set(oldPoints);\n      newPoints.set(points, oldLen);\n      // Update endIndex\n      lastAdded.endIndex = taskParams.end;\n      lastAdded.setShape({\n        points: newPoints\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var symbolEl = this._create();\n      symbolEl.startIndex = taskParams.start;\n      symbolEl.endIndex = taskParams.end;\n      symbolEl.incremental = true;\n      symbolEl.setShape({\n        points: points\n      });\n      this._setCommon(symbolEl, data, opt);\n    }\n  };\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeSymbolDraw.prototype._create = function () {\n    var symbolEl = new LargeSymbolPath({\n      cursor: 'default'\n    });\n    symbolEl.ignoreCoarsePointer = true;\n    this.group.add(symbolEl);\n    this._newAdded.push(symbolEl);\n    return symbolEl;\n  };\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null;\n    // Create symbolProxy to build path for each data\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0);\n    // Use symbolProxy setColor method\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle(\n    // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n    var ecData = getECData(symbolEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = symbolEl.hoverDataIdx;\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  };\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  return LargeSymbolDraw;\n}();\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\nvar ScatterView = /** @class */function (_super) {\n  __extends(ScatterView, _super);\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScatterView.type;\n    return _this;\n  }\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n    this.group.dirty();\n    if (!this._finished || data.count() > 1e4) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n  ScatterView.prototype.eachRendered = function (cb) {\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\n  };\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    if (!seriesModel.get('clip', true)) {\n      return;\n    }\n    var coordSys = seriesModel.coordinateSystem;\n    // PENDING make `0.1` configurable, for example, `clipTolerance`?\n    return coordSys && coordSys.getArea && coordSys.getArea(.1);\n  };\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n  ScatterView.prototype.dispose = function () {};\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ScatterSeriesModel from './ScatterSeries.js';\nimport ScatterView from './ScatterView.js';\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function radarLayout(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n    if (!coordSys) {\n      return;\n    }\n    var axes = coordSys.getIndicatorAxes();\n    zrUtil.each(axes, function (axis, axisIndex) {\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\n        points[dataIndex] = points[dataIndex] || [];\n        var point = coordSys.dataToPoint(val, axisIndex);\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\n      });\n    });\n    // Close polygon\n    data.each(function (idx) {\n      // TODO\n      // Is it appropriate to connect to the next data when some data is missing?\n      // Or, should trade it like `connectNull` in line chart?\n      var firstPoint = zrUtil.find(points[idx], function (point) {\n        return isValidPoint(point);\n      }) || getValueMissingPoint(coordSys);\n      // Copy the first actual point to the end of the array\n      points[idx].push(firstPoint.slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\nfunction isValidPoint(point) {\n  return !isNaN(point[0]) && !isNaN(point[1]);\n}\nfunction getValueMissingPoint(coordSys) {\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\n  // (probably cause problem when refreshing or animating)\n  return [coordSys.cx, coordSys.cy];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\n// Backward compat for radar chart in 2\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function radarBackwardCompat(option) {\n  var polarOptArr = option.polar;\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n    var polarNotRadar_1 = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n        option.radar = option.radar || [];\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar_1.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar_1;\n  }\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar RadarView = /** @class */function (_super) {\n  __extends(RadarView, _super);\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarView.type;\n    return _this;\n  }\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n      if (symbolType === 'none') {\n        return;\n      }\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n      if (!points) {\n        return;\n      }\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n      if (!target.shape.points) {\n        return;\n      }\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      saveOldStyle(polygon);\n      saveOldStyle(polyline);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      // Radar uses the visual encoded from itemStyle.\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty();\n        // Won't be ignore if normal state is not ignore.\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n          symbolPath.style.strokeNoScale = true;\n        }\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      toggleHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    this._data = data;\n  };\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup, retrieveVisualColorForTooltipMarker } from '../../component/tooltip/tooltipMarkup.js';\nvar RadarSeriesModel = /** @class */function (_super) {\n  __extends(RadarSeriesModel, _super);\n  function RadarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  // Overwrite\n  RadarSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  RadarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      generateCoord: 'indicator_',\n      generateCoordCount: Infinity\n    });\n  };\n  RadarSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    var nameToDisplay = name === '' ? this.name : name;\n    var markerColor = retrieveVisualColorForTooltipMarker(this, dataIndex);\n    return createTooltipMarkup('section', {\n      header: nameToDisplay,\n      sortBlocks: true,\n      blocks: zrUtil.map(indicatorAxes, function (axis) {\n        var val = data.get(data.mapDimension(axis.dim), dataIndex);\n        return createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: markerColor,\n          name: axis.name,\n          value: val,\n          sortParam: val\n        });\n      })\n    });\n  };\n  RadarSeriesModel.prototype.getTooltipPosition = function (dataIndex) {\n    if (dataIndex != null) {\n      var data_1 = this.getData();\n      var coordSys = this.coordinateSystem;\n      var values = data_1.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data_1.mapDimension(dim);\n      }), dataIndex);\n      for (var i = 0, len = values.length; i < len; i++) {\n        if (!isNaN(values[i])) {\n          var indicatorAxes = coordSys.getIndicatorAxes();\n          return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]), i);\n        }\n      }\n    }\n  };\n  RadarSeriesModel.type = 'series.radar';\n  RadarSeriesModel.dependencies = ['radar'];\n  RadarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      width: 2,\n      type: 'solid',\n      join: 'round'\n    },\n    label: {\n      position: 'top'\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbolSize: 8\n    // symbolRotate: null\n  };\n\n  return RadarSeriesModel;\n}(SeriesModel);\nexport default RadarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport axisDefault from '../axisDefault.js';\nimport Model from '../../model/Model.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport ComponentModel from '../../model/Component.js';\nvar valueAxisDefault = axisDefault.value;\nfunction defaultsShow(opt, show) {\n  return zrUtil.defaults({\n    show: show\n  }, opt);\n}\nvar RadarModel = /** @class */function (_super) {\n  __extends(RadarModel, _super);\n  function RadarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarModel.type;\n    return _this;\n  }\n  RadarModel.prototype.optionUpdated = function () {\n    var boundaryGap = this.get('boundaryGap');\n    var splitNumber = this.get('splitNumber');\n    var scale = this.get('scale');\n    var axisLine = this.get('axisLine');\n    var axisTick = this.get('axisTick');\n    // let axisType = this.get('axisType');\n    var axisLabel = this.get('axisLabel');\n    var nameTextStyle = this.get('axisName');\n    var showName = this.get(['axisName', 'show']);\n    var nameFormatter = this.get(['axisName', 'formatter']);\n    var nameGap = this.get('axisNameGap');\n    var triggerEvent = this.get('triggerEvent');\n    var indicatorModels = zrUtil.map(this.get('indicator') || [], function (indicatorOpt) {\n      // PENDING\n      if (indicatorOpt.max != null && indicatorOpt.max > 0 && !indicatorOpt.min) {\n        indicatorOpt.min = 0;\n      } else if (indicatorOpt.min != null && indicatorOpt.min < 0 && !indicatorOpt.max) {\n        indicatorOpt.max = 0;\n      }\n      var iNameTextStyle = nameTextStyle;\n      if (indicatorOpt.color != null) {\n        iNameTextStyle = zrUtil.defaults({\n          color: indicatorOpt.color\n        }, nameTextStyle);\n      }\n      // Use same configuration\n      var innerIndicatorOpt = zrUtil.merge(zrUtil.clone(indicatorOpt), {\n        boundaryGap: boundaryGap,\n        splitNumber: splitNumber,\n        scale: scale,\n        axisLine: axisLine,\n        axisTick: axisTick,\n        // axisType: axisType,\n        axisLabel: axisLabel,\n        // Compatible with 2 and use text\n        name: indicatorOpt.text,\n        showName: showName,\n        nameLocation: 'end',\n        nameGap: nameGap,\n        // min: 0,\n        nameTextStyle: iNameTextStyle,\n        triggerEvent: triggerEvent\n      }, false);\n      if (zrUtil.isString(nameFormatter)) {\n        var indName = innerIndicatorOpt.name;\n        innerIndicatorOpt.name = nameFormatter.replace('{value}', indName != null ? indName : '');\n      } else if (zrUtil.isFunction(nameFormatter)) {\n        innerIndicatorOpt.name = nameFormatter(innerIndicatorOpt.name, innerIndicatorOpt);\n      }\n      var model = new Model(innerIndicatorOpt, null, this.ecModel);\n      zrUtil.mixin(model, AxisModelCommonMixin.prototype);\n      // For triggerEvent.\n      model.mainType = 'radar';\n      model.componentIndex = this.componentIndex;\n      return model;\n    }, this);\n    this._indicatorModels = indicatorModels;\n  };\n  RadarModel.prototype.getIndicatorModels = function () {\n    return this._indicatorModels;\n  };\n  RadarModel.type = 'radar';\n  RadarModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '75%',\n    startAngle: 90,\n    axisName: {\n      show: true\n      // formatter: null\n      // textStyle: {}\n    },\n\n    boundaryGap: [0, 0],\n    splitNumber: 5,\n    axisNameGap: 15,\n    scale: false,\n    // Polygon or circle\n    shape: 'polygon',\n    axisLine: zrUtil.merge({\n      lineStyle: {\n        color: '#bbb'\n      }\n    }, valueAxisDefault.axisLine),\n    axisLabel: defaultsShow(valueAxisDefault.axisLabel, false),\n    axisTick: defaultsShow(valueAxisDefault.axisTick, false),\n    // axisType: 'value',\n    splitLine: defaultsShow(valueAxisDefault.splitLine, true),\n    splitArea: defaultsShow(valueAxisDefault.splitArea, true),\n    // {text, min, max}\n    indicator: []\n  };\n  return RadarModel;\n}(ComponentModel);\nexport default RadarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport * as graphic from '../../util/graphic.js';\nimport ComponentView from '../../view/Component.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar RadarView = /** @class */function (_super) {\n  __extends(RadarView, _super);\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarView.type;\n    return _this;\n  }\n  RadarView.prototype.render = function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    this._buildAxes(radarModel);\n    this._buildSplitLineAndArea(radarModel);\n  };\n  RadarView.prototype._buildAxes = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisName = indicatorAxis.model.get('showName') ? indicatorAxis.name : ''; // hide name\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        axisName: axisName,\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  };\n  RadarView.prototype._buildSplitLineAndArea = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    if (!indicatorAxes.length) {\n      return;\n    }\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    var splitLineColorsArr = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    var splitAreaColorsArr = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i].coord\n            }\n          }));\n        }\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i].coord,\n              r: ticksRadius[i + 1].coord\n            }\n          }));\n        }\n      }\n    }\n    // Polyyon\n    else {\n      var realSplitNumber_1;\n      var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n        var ticksCoords = indicatorAxis.getTicksCoords();\n        realSplitNumber_1 = realSplitNumber_1 == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber_1);\n        return zrUtil.map(ticksCoords, function (tickCoord) {\n          return radar.coordToPoint(tickCoord.coord, idx);\n        });\n      });\n      var prevPoints = [];\n      for (var i = 0; i <= realSplitNumber_1; i++) {\n        var points = [];\n        for (var j = 0; j < indicatorAxes.length; j++) {\n          points.push(axesTicksPoints[j][i]);\n        }\n        // Close\n        if (points[0]) {\n          points.push(points[0].slice());\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.error('Can\\'t draw value axis ' + i);\n          }\n        }\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Polyline({\n            shape: {\n              points: points\n            }\n          }));\n        }\n        if (showSplitArea && prevPoints) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i - 1);\n          splitAreas[colorIndex].push(new graphic.Polygon({\n            shape: {\n              points: points.concat(prevPoints)\n            }\n          }));\n        }\n        prevPoints = points.slice().reverse();\n      }\n    }\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle();\n    // Add splitArea before splitLine\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColorsArr[idx % splitAreaColorsArr.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColorsArr[idx % splitLineColorsArr.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  };\n  RadarView.type = 'radar';\n  return RadarView;\n}(ComponentView);\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar IndicatorAxis = /** @class */function (_super) {\n  __extends(IndicatorAxis, _super);\n  function IndicatorAxis(dim, scale, radiusExtent) {\n    var _this = _super.call(this, dim, scale, radiusExtent) || this;\n    _this.type = 'value';\n    _this.angle = 0;\n    _this.name = '';\n    return _this;\n  }\n  return IndicatorAxis;\n}(Axis);\nexport default IndicatorAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO clockwise\nimport IndicatorAxis from './IndicatorAxis.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport * as numberUtil from '../../util/number.js';\nimport { map, each, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nvar Radar = /** @class */function () {\n  function Radar(radarModel, ecModel, api) {\n    /**\n     *\n     * Radar dimensions\n     */\n    this.dimensions = [];\n    this._model = radarModel;\n    this._indicatorAxes = map(radarModel.getIndicatorModels(), function (indicatorModel, idx) {\n      var dim = 'indicator_' + idx;\n      var indicatorAxis = new IndicatorAxis(dim, new IntervalScale()\n      // (indicatorModel.get('axisType') === 'log') ? new LogScale() : new IntervalScale()\n      );\n\n      indicatorAxis.name = indicatorModel.get('name');\n      // Inject model and axis\n      indicatorAxis.model = indicatorModel;\n      indicatorModel.axis = indicatorAxis;\n      this.dimensions.push(dim);\n      return indicatorAxis;\n    }, this);\n    this.resize(radarModel, api);\n  }\n  Radar.prototype.getIndicatorAxes = function () {\n    return this._indicatorAxes;\n  };\n  Radar.prototype.dataToPoint = function (value, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    return this.coordToPoint(indicatorAxis.dataToCoord(value), indicatorIndex);\n  };\n  // TODO: API should be coordToPoint([coord, indicatorIndex])\n  Radar.prototype.coordToPoint = function (coord, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    var angle = indicatorAxis.angle;\n    var x = this.cx + coord * Math.cos(angle);\n    var y = this.cy - coord * Math.sin(angle);\n    return [x, y];\n  };\n  Radar.prototype.pointToData = function (pt) {\n    var dx = pt[0] - this.cx;\n    var dy = pt[1] - this.cy;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx);\n    // Find the closest angle\n    // FIXME index can calculated directly\n    var minRadianDiff = Infinity;\n    var closestAxis;\n    var closestAxisIdx = -1;\n    for (var i = 0; i < this._indicatorAxes.length; i++) {\n      var indicatorAxis = this._indicatorAxes[i];\n      var diff = Math.abs(radian - indicatorAxis.angle);\n      if (diff < minRadianDiff) {\n        closestAxis = indicatorAxis;\n        closestAxisIdx = i;\n        minRadianDiff = diff;\n      }\n    }\n    return [closestAxisIdx, +(closestAxis && closestAxis.coordToData(radius))];\n  };\n  Radar.prototype.resize = function (radarModel, api) {\n    var center = radarModel.get('center');\n    var viewWidth = api.getWidth();\n    var viewHeight = api.getHeight();\n    var viewSize = Math.min(viewWidth, viewHeight) / 2;\n    this.cx = numberUtil.parsePercent(center[0], viewWidth);\n    this.cy = numberUtil.parsePercent(center[1], viewHeight);\n    this.startAngle = radarModel.get('startAngle') * Math.PI / 180;\n    // radius may be single value like `20`, `'80%'`, or array like `[10, '80%']`\n    var radius = radarModel.get('radius');\n    if (isString(radius) || isNumber(radius)) {\n      radius = [0, radius];\n    }\n    this.r0 = numberUtil.parsePercent(radius[0], viewSize);\n    this.r = numberUtil.parsePercent(radius[1], viewSize);\n    each(this._indicatorAxes, function (indicatorAxis, idx) {\n      indicatorAxis.setExtent(this.r0, this.r);\n      var angle = this.startAngle + idx * Math.PI * 2 / this._indicatorAxes.length;\n      // Normalize to [-PI, PI]\n      angle = Math.atan2(Math.sin(angle), Math.cos(angle));\n      indicatorAxis.angle = angle;\n    }, this);\n  };\n  Radar.prototype.update = function (ecModel, api) {\n    var indicatorAxes = this._indicatorAxes;\n    var radarModel = this._model;\n    each(indicatorAxes, function (indicatorAxis) {\n      indicatorAxis.scale.setExtent(Infinity, -Infinity);\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries, idx) {\n      if (radarSeries.get('coordinateSystem') !== 'radar'\n      // @ts-ignore\n      || ecModel.getComponent('radar', radarSeries.get('radarIndex')) !== radarModel) {\n        return;\n      }\n      var data = radarSeries.getData();\n      each(indicatorAxes, function (indicatorAxis) {\n        indicatorAxis.scale.unionExtentFromData(data, data.mapDimension(indicatorAxis.dim));\n      });\n    }, this);\n    var splitNumber = radarModel.get('splitNumber');\n    var dummyScale = new IntervalScale();\n    dummyScale.setExtent(0, splitNumber);\n    dummyScale.setInterval(1);\n    // Force all the axis fixing the maxSplitNumber.\n    each(indicatorAxes, function (indicatorAxis, idx) {\n      alignScaleTicks(indicatorAxis.scale, indicatorAxis.model, dummyScale);\n    });\n  };\n  Radar.prototype.convertToPixel = function (ecModel, finder, value) {\n    console.warn('Not implemented.');\n    return null;\n  };\n  Radar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    console.warn('Not implemented.');\n    return null;\n  };\n  Radar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  Radar.create = function (ecModel, api) {\n    var radarList = [];\n    ecModel.eachComponent('radar', function (radarModel) {\n      var radar = new Radar(radarModel, ecModel, api);\n      radarList.push(radar);\n      radarModel.coordinateSystem = radar;\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries) {\n      if (radarSeries.get('coordinateSystem') === 'radar') {\n        // Inject coordinate system\n        // @ts-ignore\n        radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0];\n      }\n    });\n    return radarList;\n  };\n  /**\n   * Radar dimensions is based on the data\n   */\n  Radar.dimensions = [];\n  return Radar;\n}();\nexport default Radar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadarModel from '../../coord/radar/RadarModel.js';\nimport RadarView from './RadarView.js';\nimport Radar from '../../coord/radar/Radar.js';\nexport function install(registers) {\n  registers.registerCoordinateSystem('radar', Radar);\n  registers.registerComponentModel(RadarModel);\n  registers.registerComponentView(RadarView);\n  registers.registerVisual({\n    seriesType: 'radar',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      // itemVisual symbol is for selected data\n      data.each(function (idx) {\n        data.setItemVisual(idx, 'legendIcon', 'roundRect');\n      });\n      // visual is for unselected data\n      data.setVisual('legendIcon', 'roundRect');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport radarLayout from '../radar/radarLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport backwardCompat from '../radar/backwardCompat.js';\nimport RadarView from './RadarView.js';\nimport RadarSeriesModel from './RadarSeries.js';\nimport { install as installRadarComponent } from '../../component/radar/install.js';\nexport function install(registers) {\n  use(installRadarComponent);\n  registers.registerChartView(RadarView);\n  registers.registerSeriesModel(RadarSeriesModel);\n  registers.registerLayout(radarLayout);\n  registers.registerProcessor(dataFilter('radar'));\n  registers.registerPreprocessor(backwardCompat);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* The tree layoutHelper implementation was originally copied from\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\n* some modifications made for this project.\n* (see more details in the comment of the specific method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n/**\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\n *       the tree.\n */\nimport * as layout from '../../util/layout.js';\n/**\n * Initialize all computational message for following algorithm.\n */\nexport function init(inRoot) {\n  var root = inRoot;\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n    if (node.isExpand && children.length) {\n      var n = children.length;\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes a preliminary x coordinate for node. Before that, this function is\n * applied recursively to the children of node, as well as the function\n * apportion(). After spacing out the children by calling executeShifts(), the\n * node is placed to the midpoint of its outermost children.\n */\nexport function firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes all real x-coordinates by summing up the modifiers recursively.\n */\nexport function secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\nexport function separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\n * Transform the common coordinate to radial coordinate.\n */\nexport function radialCoordinate(rad, r) {\n  rad -= Math.PI / 2;\n  return {\n    x: r * Math.cos(rad),\n    y: r * Math.sin(rad)\n  };\n}\n/**\n * Get the layout position of the whole view.\n */\nexport function getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\n * All other shifts, applied to the smaller subtrees between w- and w+, are\n * performed by this function.\n *\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * The core of the algorithm. Here, a new subtree is combined with the\n * previous subtrees. Threads are used to traverse the inside and outside\n * contours of the left and right subtree up to the highest common level.\n * Whenever two nodes of the inside contours conflict, we compute the left\n * one of the greatest uncommon ancestors using the function nextAncestor()\n * and call moveSubtree() to shift the subtree and prepare the shifts of\n * smaller subtrees. Finally, we add a new thread (if necessary).\n */\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n  return ancestor;\n}\n/**\n * This function is used to traverse the right contour of a subtree.\n * It returns the rightmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\n * This function is used to traverse the left contour of a subtree (or a subforest).\n * It returns the leftmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\n * If nodeInLefts ancestor is a sibling of node, returns nodeInLefts ancestor.\n * Otherwise, returns the specified ancestor.\n */\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Shifts the current subtree rooted at wr.\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\n */\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport { radialCoordinate } from './layoutHelper.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport View from '../../coord/View.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport { parsePercent } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states.js';\nvar TreeEdgeShape = /** @class */function () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n  return TreeEdgeShape;\n}();\nvar TreePath = /** @class */function (_super) {\n  __extends(TreePath, _super);\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n  return TreePath;\n}(Path);\nvar TreeView = /** @class */function (_super) {\n  __extends(TreeView, _super);\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n    this._updateViewCoordSys(seriesModel, api);\n    this._updateController(seriesModel, ecModel, api);\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      }\n      // Update node and edge\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n    this._updateNodeAndLinkScale(seriesModel);\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n    this._data = data;\n  };\n  TreeView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max);\n    // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n    var oldMin = this._min;\n    var oldMax = this._max;\n    // If width or height is 0\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'), api);\n    viewCoordSys.setZoom(seriesModel.get('zoom'));\n    // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n      _this._updateNodeAndLinkScale(seriesModel);\n      // Only update label layout on zoom\n      api.updateLabelLayout();\n    });\n  };\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1;\n    // Scale node when zoom changes\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n    this._data = null;\n  };\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n    if (targetLayout.x === rootLayout.x && node.isExpand === true && realRoot.children.length) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n      isLeft = center.x < rootLayout.x;\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  }\n  // Handle status\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge;\n  // curve edge from node -> parent\n  // polyline edge from node -> children\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  }\n  // show all edge when edgeShape is 'curve', filter node `isExpand` is false when edgeShape is 'polyline'\n  if (edge && !(edgeShape === 'polyline' && !node.isExpand)) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\n  var virtualRoot = data.tree.root;\n  var _a = getSourceNode(virtualRoot, node),\n    source = _a.source,\n    sourceLayout = _a.sourceLayout;\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\n  if (!symbolEl) {\n    return;\n  }\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge;\n  // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\nfunction getSourceNode(virtualRoot, node) {\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n  return {\n    source: source,\n    sourceLayout: sourceLayout\n  };\n}\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout;\n  // Use same duration and easing with update to have more consistent animation.\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function () {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, data.hostModel, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  });\n  // remove edge as parent node\n  node.children.forEach(function (childNode) {\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\n  });\n  // remove edge as child node\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\n}\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\nexport default TreeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt);\n  // Porxy data original methods.\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  });\n  // Beyond transfer, additional features should be added to `cloneShallow`.\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt));\n  // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  });\n  // Make sure datas contains mainData.\n  assert(datas[mainData.dataType] === mainData);\n}\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n  return res;\n}\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  }\n  // Supplement method.\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Tree data structure\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport linkSeriesData from './helper/linkSeriesData.js';\nimport SeriesData from './SeriesData.js';\nimport prepareSeriesDataSchema from './helper/createDimensions.js';\nimport { convertOptionIdName } from '../util/model.js';\nvar TreeNode = /** @class */function () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\n     * Reference to list item.\n     * Do not persistent dataIndex outside,\n     * besause it may be changed by list.\n     * If dataIndex -1,\n     * this node is logical deleted (filtered) in list.\n     */\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\n   * The node is removed.\n   */\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (zrUtil.isFunction(options)) {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n    options = options || {};\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\n   * Update depth and height of this subtree.\n   */\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n    this.height = height + 1;\n  };\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n      if (res) {\n        return res;\n      }\n    }\n  };\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\n   * @param includeSelf Default false.\n   * @return order: [root, child, grandchild, ...]\n   */\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n    ancestors.reverse();\n    return ancestors;\n  };\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n    indices.reverse();\n    return indices;\n  };\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n  };\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\n   * @return {Object} layout\n   */\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  };\n  // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  // TODO: TYPE More specific model\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\n   * Get item visual\n   * FIXME: make return type better\n   */\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\n   * index in parent's children\n   */\n  TreeNode.prototype.getChildIndex = function () {\n    if (this.parentNode) {\n      var children = this.parentNode.children;\n      for (var i = 0; i < children.length; ++i) {\n        if (children[i] === this) {\n          return i;\n        }\n      }\n      return -1;\n    }\n    return -1;\n  };\n  /**\n   * if this is an ancestor of another node\n   *\n   * @param node another node\n   * @return if is ancestor\n   */\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n      parent = parent.parentNode;\n    }\n    return false;\n  };\n  /**\n   * if this is an descendant of another node\n   *\n   * @param node another node\n   * @return if is descendant\n   */\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n  return TreeNode;\n}();\nexport { TreeNode };\n;\nvar Tree = /** @class */function () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\n   * Clear all layouts\n   */\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\n   * data node format:\n   * {\n   *     name: ...\n   *     value: ...\n   *     children: [\n   *         {\n   *             name: ...\n   *             value: ...\n   *             children: ...\n   *         },\n   *         ...\n   *     ]\n   * }\n   */\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n      tree._nodes.push(node);\n      var children = dataNode.children;\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n    tree.root.updateDepthAndHeight(0);\n    var dimensions = prepareSeriesDataSchema(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    }).dimensions;\n    var list = new SeriesData(dimensions, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkSeriesData({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n  return Tree;\n}();\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n */\nfunction addChild(child, node) {\n  var children = node.children;\n  if (child.parentNode === node) {\n    return;\n  }\n  children.push(child);\n  child.parentNode = node;\n}\nexport default Tree;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n    if (zrUtil.isString(targetNode)) {\n      targetNode = root.getNodeById(targetNode);\n    }\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n    var targetNodeId = payload.targetNodeId;\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n}\n// Not includes the given node at the last item.\nexport function getPathToRoot(node) {\n  var path = [];\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n}\n// From root to the input node (the input node will be included).\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n  treePathInfo.reverse();\n  return treePathInfo;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nvar TreeSeriesModel = /** @class */function (_super) {\n  __extends(TreeSeriesModel, _super);\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.hasSymbolVisual = true;\n    // Do it self.\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\n   * Init a tree data structure from data in option series\n   */\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    // create a virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        if (!(node && node.children.length && node.isExpand)) {\n          model.parentModel = leavesModel;\n        }\n        return model;\n      });\n    }\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex);\n      // Add item.collapsed != null, because users can collapse node original in the series.data.\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\n   * @returns {string} orient\n   */\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n    return orient;\n  };\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  };\n  // Add tree path to tooltip param\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    params.collapsed = !node.isExpand;\n    return params;\n  };\n  TreeSeriesModel.type = 'series.tree';\n  // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\nexport default TreeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Traverse the tree from bottom to top and do something\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n    if (node.isExpand) {\n      var children = node.children;\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\n * Traverse the tree from top to bottom and do something\n */\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n    if (node.isExpand) {\n      var children = node.children;\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\nexport { eachAfter, eachBefore };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { eachAfter, eachBefore } from './traversalHelper.js';\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper.js';\nexport default function treeLayout(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left_1 = realRoot;\n    var right_1 = realRoot;\n    var bottom_1 = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n      if (x < left_1.getLayout().x) {\n        left_1 = node;\n      }\n      if (x > right_1.getLayout().x) {\n        right_1 = node;\n      }\n      if (node.depth > bottom_1.depth) {\n        bottom_1 = node;\n      }\n    });\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\n    var tx_1 = delta - left_1.getLayout().x;\n    var kx_1 = 0;\n    var ky_1 = 0;\n    var coorX_1 = 0;\n    var coorY_1 = 0;\n    if (layout === 'radial') {\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n      // here we use (node.depth - 1), bucause the real root's depth is 1\n      ky_1 = height / (bottom_1.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n        coorY_1 = (node.depth - 1) * ky_1;\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX_1,\n          rawY: coorY_1\n        }, true);\n      });\n    } else {\n      var orient_1 = seriesModel.getOrient();\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\n        kx_1 = width / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n        ky_1 = height / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nexport default function treeVisual(ecModel) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      // TODO Optimize\n      var style = model.getModel('itemStyle').getItemStyle();\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nexport function installTreeAction(registers) {\n  registers.registerAction({\n    type: 'treeExpandAndCollapse',\n    event: 'treeExpandAndCollapse',\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var dataIndex = payload.dataIndex;\n      var tree = seriesModel.getData().tree;\n      var node = tree.getNodeByDataIndex(dataIndex);\n      node.isExpand = !node.isExpand;\n    });\n  });\n  registers.registerAction({\n    type: 'treeRoam',\n    event: 'treeRoam',\n    // Here we set 'none' instead of 'update', because roam action\n    // just need to update the transform matrix without having to recalculate\n    // the layout. So don't need to go through the whole update process, such\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport TreeView from './TreeView.js';\nimport TreeSeriesModel from './TreeSeries.js';\nimport treeLayout from './treeLayout.js';\nimport treeVisual from './treeVisual.js';\nimport { installTreeAction } from './treeAction.js';\nexport function install(registers) {\n  registers.registerChartView(TreeView);\n  registers.registerSeriesModel(TreeSeriesModel);\n  registers.registerLayout(treeLayout);\n  registers.registerVisual(treeVisual);\n  installTreeAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as helper from '../helper/treeHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\nvar TreemapSeriesModel = /** @class */function (_super) {\n  __extends(TreemapSeriesModel, _super);\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || [];\n    // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this);\n    // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = node ? levelModels[node.depth] : null;\n        // If no levelModel, we also need `designatedVisualModel`.\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n    return tree.data;\n  };\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\n   * @override\n   * @param {number} dataIndex\n   * @param {boolean} [mutipleSeries=false]\n   */\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\n   * Add tree path to tooltip param\n   *\n   * @override\n   * @param {number} dataIndex\n   * @return {Object}\n   */\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    // compatitable the previous code.\n    params.treePathInfo = params.treeAncestors;\n    return params;\n  };\n  /**\n   * @public\n   * @param {Object} layoutInfo {\n   *                                x: containerGroup x\n   *                                y: containerGroup y\n   *                                width: containerGroup width\n   *                                height: containerGroup height\n   *                            }\n   */\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\n     * @readOnly\n     * @type {Object}\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\n   * @param  {string} id\n   * @return {number} index\n   */\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n    /**\n     * @private\n     * @type {Object}\n     */\n    var idIndexMap = this._idIndexMap;\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\n       * @private\n       * @type {number}\n       */\n      this._idIndexMapCount = 0;\n    }\n    var index = idIndexMap.get(id);\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n    return index;\n  };\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '',\n    // to align specialized icon. \n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: 'rgba(0,0,0,0.9)' // '#5793f3',\n        }\n      }\n    },\n\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate'\n      // align\n      // verticalAlign\n    },\n\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n    },\n\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        overflow: 'truncate',\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n  };\n\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\n * @param {Object} dataNode\n */\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n  // Value should not less than 0.\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\n * set default to level configuration\n */\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  if (!globalColorList) {\n    return;\n  }\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n  return levels;\n}\nexport default TreemapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport * as layout from '../../util/layout.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { curry, defaults } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName } from '../../util/model.js';\nimport { toggleHoverEmphasis, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\nvar Breadcrumb = /** @class */function () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n    var normalStyleModel = model.getModel('itemStyle');\n    var emphasisModel = model.getModel('emphasis');\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var emphasisTextStyleModel = emphasisModel.getModel(['itemStyle', 'textStyle']);\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n    this._prepare(targetNode, layoutParam, textStyleModel);\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect);\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\n   * Prepare render list and total width\n   * @private\n   */\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\n   * @private\n   */\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n    var emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text;\n      // Hdie text and shorten width if necessary.\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: createTextStyle(textStyleModel, {\n            text: text\n          })\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      el.getTextContent().ensureState('emphasis').style = createTextStyle(emphasisTextStyleModel, {\n        text: text\n      });\n      el.ensureState('emphasis').style = emphasisItemStyle;\n      toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  return Breadcrumb;\n}();\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n}\n// Package custom mouse event.\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.seriesIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\nexport default Breadcrumb;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Animate multiple elements with a single done-callback.\n *\n * @example\n *  animation\n *      .createWrap()\n *      .add(el1, {x: 10, y: 10})\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\n *      .done(function () { // done })\n *      .start('cubicOut');\n */\nvar AnimationWrap = /** @class */function () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\n   * Caution: a el can only be added once, otherwise 'done'\n   * might not be called. This method checks this (by el.id),\n   * suppresses adding and returns false when existing el found.\n   *\n   * @return Whether adding succeeded.\n   */\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n    this._elExistsMap[el.id] = true;\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n    return true;\n  };\n  /**\n   * Only execute when animation done/aborted.\n   */\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\n   * Will stop exist animation firstly.\n   */\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n    var count = this._storage.length;\n    var checkTerminate = function () {\n      count--;\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n    return this;\n  };\n  return AnimationWrap;\n}();\nexport function createWrap() {\n  return new AnimationWrap();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as helper from '../helper/treeHelper.js';\nimport Breadcrumb from './Breadcrumb.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as animationUtil from '../../util/animation.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport ChartView from '../../view/Chart.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner, convertOptionIdName } from '../../util/model.js';\nimport { windowOpen } from '../../util/format.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel';\n// Should larger than emphasis states lift z\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'],\n// `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\n\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model);\n  // Clear styles set by emphasis.\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\nvar inner = makeInner();\nvar TreemapView = /** @class */function (_super) {\n  __extends(TreemapView, _super);\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage;\n    // Mark new root when action is treemapRootToNode.\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n    var hasAnimation = seriesModel.get('animation');\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n    this._resetController(api);\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n    if (!containerGroup) {\n      // FIXME\n      // containerGroupclipclip\n      containerGroup = this._containerGroup = new Group();\n      this._initEvents(containerGroup);\n      this.group.add(containerGroup);\n    }\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree;\n    // Clear last shape records.\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    }\n    // Notice: When thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we cannot find all of the old graphic\n    // elements from tree. So we use this strategy: make element storage, move\n    // from old storage to new storage, clear old storage.\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0);\n    // Process all removing.\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      }\n      // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n        new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n      }\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true;\n        // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n        el.dirty();\n      });\n    }\n  };\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing');\n    // TODO: do not support function until necessary.\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap();\n    // Make delete animations.\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n        var target;\n        var innerStore = inner(parent);\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup\n          // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          }\n          // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        }\n        // TODO: do not support delay until necessary.\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    });\n    // Make other animations\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n        if (!last) {\n          return;\n        }\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          }\n          // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n            target.style = {\n              opacity: 1\n            };\n          }\n        }\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller;\n    // Init controller.\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n      if (!root) {\n        return;\n      }\n      var rootLayout = root.getLayout();\n      if (!rootLayout) {\n        return;\n      }\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n      if (!root) {\n        return;\n      }\n      var rootLayout = root.getLayout();\n      if (!rootLayout) {\n        return;\n      }\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo;\n      // Transform mouse coord from global to containerGroup.\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y;\n      // Scale root bounding rect.\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [e.scale, e.scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n      if (!nodeClick) {\n        return;\n      }\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n      if (!targetInfo) {\n        return;\n      }\n      var node = targetInfo.node;\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      }\n      // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\n   * @override\n   */\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\n   * @public\n   * @param {number} x Global coord x.\n   * @param {number} y Global coord y.\n   * @return {Object} info If not found, return undefined;\n   * @return {number} info.node Target node.\n   * @return {number} info.offsetX x refer to target node.\n   * @return {number} info.offsetY y refer to target node.\n   */\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()];\n      // If invisible, there might be no element.\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape;\n        // For performance consideration, don't use 'getBoundingRect'.\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\n * @inner\n */\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\n * @inner\n * @return Return undefined means do not travel further.\n */\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  }\n  // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel();\n  // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0;\n  // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n  var group = giveGraphic('nodeGroup', Group);\n  if (!group) {\n    return;\n  }\n  parentGroup.add(group);\n  // x,y are not set when el is above view root.\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  }\n  // Background\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var emphasisModel = nodeModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var isDisabled = emphasisModel.get('disabled');\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus;\n  // No children, render content.\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n    if (bg) {\n      setAsHighDownDispatcher(bg, !isDisabled);\n      // Only for enabling highlight/downplay.\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n    bg.disableMorphing = true;\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n    setAsHighDownDispatcher(group, !isDisabled);\n    // Only for enabling highlight/downplay.\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n  return group;\n  // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg);\n    // For tooltip.\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText(\n        // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      }\n      // For old bg.\n      else {\n        bg.removeTextContent();\n      }\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n    group.add(bg);\n  }\n  function renderContent(group, content) {\n    var ecData = getECData(content);\n    // For tooltip.\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      // PENDING: convert ZRColor to ColorString for text.\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n    group.add(content);\n  }\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n  function prepareText(rectEl, visualColor, visualOpacity,\n  // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n    if (!textEl) {\n      return;\n    }\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    }\n    // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n      element = new Ctor();\n      if (element instanceof Displayable) {\n        element.z2 = calculateZ2(depth, z);\n      }\n      prepareAnimationWhenNoOld(lasts, element);\n    }\n    // Set to thisStorage\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  }\n  // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0;\n      // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      }\n      // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    }\n    // Fade in, user can be aware that these nodes are new.\n    lastCfg.fadein = !isGroup;\n  }\n}\n// We cannot set all background with the same z, because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause lower background elements to overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\nexport default TreemapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { each, extend, isArray } from 'zrender/lib/core/util.js';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color.js';\nimport { makeInner } from '../../util/model.js';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n    if (root.isRemoved()) {\n      return;\n    }\n    travelTree(root,\n    // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data;\n  // Optimize\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n  // calculate border color\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals);\n    // Apply visual to this node.\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren);\n    // Designate visual to children.\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n    return color;\n  }\n}\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null\n  // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n  if (!rangeVisual) {\n    return;\n  }\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true;\n    // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n}\n// Notice: If we don't have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node doesn't have children, and its siblings have children,\n// and colorRange is set on level-1, then the node cannot be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exists on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n  return childVisuals;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* The treemap layout implementation was originally copied from\n* \"d3.js\" with some modifications made for this project.\n* (See more details in the comment of the method \"squarify\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from '../helper/treeHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\n * @public\n */\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight);\n    // Fetch payload info.\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      };\n      // layout should be cleared because using updateView but not update.\n      viewRoot.hostTree.clearLayouts();\n      // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0);\n      // Supplement layout.\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo);\n    // FIXME\n    // clipec\n    prunning(treeRoot,\n    // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\n * Layout treemap with squarify algorithm.\n * The original presentation of this algorithm\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\n * The implementation of this algorithm was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * @protected\n * @param {module:echarts/data/Tree~TreeNode} node\n * @param {Object} options\n * @param {string} options.sort 'asc' or 'desc'\n * @param {number} options.squareRatio\n * @param {boolean} hideChildren\n * @param {number} depth\n */\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n  if (node.isRemoved()) {\n    return;\n  }\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height;\n  // Considering border and gap\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n  if (!viewChildren.length) {\n    return;\n  }\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n  var row = [];\n  row.area = 0;\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio);\n    // continue with this orientation\n    if (score <= best) {\n      i++;\n      best = score;\n    }\n    // abort, and try a different orientation\n    else {\n      row.area -= row.pop().getLayout().area;\n      position(row, rowFixedLength, rect, halfGapWidth, false);\n      rowFixedLength = mathMin(rect.width, rect.height);\n      row.length = row.area = 0;\n      best = Infinity;\n    }\n  }\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\n * Set area to each child, and calculate data extent for visual coding.\n */\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth;\n  // leafDepth has higher priority.\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  }\n  // Sort children, order by desc.\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n  // Set area to each child.\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea;\n    // Do not use setLayout({...}, true), because it is needed to clear last layout.\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\n */\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len;\n  // Always travel from little value to big value.\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\n * Sort\n */\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n  return viewChildren;\n}\n/**\n * Statistic\n */\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  }\n  // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent;\n  // The same as area dimension.\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  }\n  // Other dimension.\n  else {\n    dataExtent = [Infinity, -Infinity];\n    each(children, function (child) {\n      var value = child.getValue(dimension);\n      value < dataExtent[0] && (dataExtent[0] = value);\n      value > dataExtent[1] && (dataExtent[1] = value);\n    });\n  }\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\n * Computes the score for the specified row,\n * as the worst aspect ratio.\n */\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\n * Positions the specified row of nodes. Modifies `rect`.\n */\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0);\n    // We use Math.max/min to avoid negative width/height when considering gap width.\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n}\n// Return [containerWidth, containerHeight] as default.\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whole width and height by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n    var currNodeValue = currNode.getValue();\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n    area *= sum / currNodeValue;\n    // Considering border, suppose aspect ratio is 1.\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n}\n// Root position based on coord of containerGroup\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n  if (!targetInfo) {\n    return defaultPosition;\n  }\n  // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n  if (!layout) {\n    return defaultPosition;\n  }\n  // Transform coord from local to container.\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n}\n// Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true);\n  // Transform to child coordinate.\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { installTreemapAction } from './treemapAction.js';\nimport TreemapSeriesModel from './TreemapSeries.js';\nimport TreemapView from './TreemapView.js';\nimport treemapVisual from './treemapVisual.js';\nimport treemapLayout from './treemapLayout.js';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        }\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx);\n      // Add prefix to avoid conflict with Object.prototype.\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    });\n    // Assign category color to visual\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize'));\n    // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      // Edge visual must after node visual\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = [];\n  // handler the function set\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  }\n  // append length\n  if (appendLength > length) {\n    length = appendLength;\n  }\n  // make sure the length is even\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {};\n  // calc the array of curveness List\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)];\n  // set direction\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n  if (!autoCurvenessParams) {\n    return null;\n  }\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n  if (!edgeArray) {\n    return null;\n  }\n  var edgeIndex = -1;\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  }\n  // if totalLen is Longer createCurveness\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {};\n  // if is opposite edge, must set curvenss to opposite number\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList;\n  // if pass array no need parity\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection];\n    // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n          value.push(val);\n        }\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX;\n  // Scale node when zoom changes\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  if (!count) {\n    return;\n  }\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n      tempX = _a[0],\n      tempY = _a[1];\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node);\n      // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r);\n      // when `symbolSize / 2` is bigger than `r`.\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl();\n  // need to check if el exists. '-' value may not create node element.\n  if (!el) {\n    return;\n  }\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n    var isLeft = pos[0] < cx;\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd;\n// function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2];\n  // let scale = opts.scale || 1;\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity;\n  // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  }\n  // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n        if (isNaN(w)) {\n          w = 0;\n        }\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      }\n      // Gravity\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p);\n          // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      }\n      // Repulsive\n      // PENDING\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n      var v = [];\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value');\n      // let edgeDataExtent = edgeData.getDataExtent('value');\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength];\n      // Larger value has smaller length\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      });\n      // let coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1;\n      // Step to get the layout\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max);\n      // If width or height is 0\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]);\n      // FIXME If get view rect after data processed?\n      var viewRect = getViewRect(seriesModel, api, aspect);\n      // Position may be NaN, use view rect instead\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight);\n      // Update roam info\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\nvar StraightLineShape = /** @class */function () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0;\n    // End point\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n  return StraightLineShape;\n}();\nvar CurveShape = /** @class */function (_super) {\n  __extends(CurveShape, _super);\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CurveShape;\n}(StraightLineShape);\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\nvar ECLinePath = /** @class */function (_super) {\n  __extends(ECLinePath, _super);\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-line';\n    return _this;\n  }\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n  return ECLinePath;\n}(graphic.Path);\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\n * @inner\n */\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createLine(lineData, idx, seriesScope);\n    return _this;\n  }\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  // TODO More strict on the List type in parameters?\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory);\n      // Symbol changed\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n      this[key] = symbolType;\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    // Optimization for large dataset\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle;\n    // Update symbol\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent();\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign;\n      // 'start', 'middle', 'end'\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n      label.__labelDistance = distance;\n    }\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n    });\n\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent();\n    // Quick reject\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n    var invScale = 1;\n    var parentNode = this.parent;\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n      parentNode = parentNode.parent;\n    }\n    var line = lineGroup.childOfName('line');\n    // If line not changed\n    // FIXME Parent scale changed\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n      var dir = tangent[0] < 0 ? -1 : 1;\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n        label.rotation = rotation;\n      }\n      var dy = void 0;\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n  return Line;\n}(graphic.Group);\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nvar LineDraw = /** @class */function () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n    // Remove progressive els.\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData;\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldLineData) {\n      group.removeAll();\n    }\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n  ;\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData;\n    // Do not support update layout in incremental mode.\n    if (!lineData) {\n      return;\n    }\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n  ;\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n  return LineDraw;\n}();\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  }\n  // Assume the segment is monotoneFind root through Bisection method\n  // At most 32 iteration\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval;\n    // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    }\n    // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n  return t;\n}\n// Adjust edge to avoid\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n    var originalPoints = linePoints.__original;\n    // Quadratic curve\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale);\n        // Subdivide and get the second\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale);\n        // Subdivide and get the first\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      }\n      // Copy back to layout\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    }\n    // Line\n    else {\n      vec2.copy(pts2[0], originalPoints[0]);\n      vec2.copy(pts2[1], originalPoints[1]);\n      vec2.sub(v, pts2[1], pts2[0]);\n      vec2.normalize(v, v);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n      }\n      vec2.copy(linePoints[0], pts2[0]);\n      vec2.copy(linePoints[1], pts2[1]);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\nvar GraphView = /** @class */function (_super) {\n  __extends(GraphView, _super);\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphView.type;\n    return _this;\n  }\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    }\n    // Fix edge contact point with node\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData();\n    // TODO: TYPE\n    lineDraw.updateData(edgeData);\n    this._updateNodeAndLinkScale();\n    this._updateController(seriesModel, ecModel, api);\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n      if (!el) {\n        return;\n      }\n      // Update draggable\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n              forceLayout.setFixed(idx);\n              // Write position back to layout\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]);\n              // mark node fixed\n              node.setLayout({\n                fixed: true\n              }, true);\n              // recalculate circular layout\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n              _this.updateLayout(seriesModel);\n              break;\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]);\n              // update edge\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n              _this.updateLayout(seriesModel);\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n      if (!el) {\n        return;\n      }\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n  };\n  GraphView.prototype.dispose = function () {\n    this.remove();\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n      _this._updateNodeAndLinkScale();\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n      _this._lineDraw.updateLayout();\n      // Only update label layout on zoom\n      api.updateLabelLayout();\n    });\n  };\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._symbolDraw.updateLayout();\n    this._lineDraw.updateLayout();\n  };\n  GraphView.prototype.remove = function () {\n    clearTimeout(this._layoutTimeout);\n    this._layouting = false;\n    this._layoutTimeout = null;\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// id may be function name of Object, add a prefix to avoid this problem.\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\nvar Graph = /** @class */function () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n  ;\n  /**\n   * Add a new node\n   */\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n      return;\n    }\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n  ;\n  /**\n   * Get node by data index\n   */\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n  ;\n  /**\n   * Get node by id\n   */\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n  ;\n  /**\n   * Add a new edge\n   */\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap;\n    // PENDING\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n    if (!n1 || !n2) {\n      return;\n    }\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n    n1.edges.push(edge);\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n  ;\n  /**\n   * Get edge by data index\n   */\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n    var edgesMap = this._edgesMap;\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n  ;\n  /**\n   * Iterate all nodes\n   */\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n  ;\n  /**\n   * Iterate all edges\n   */\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n    if (!startNode) {\n      return;\n    }\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n    var queue = [startNode];\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n  ;\n  // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    });\n    // Update edge\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n    return graph;\n  };\n  ;\n  return Graph;\n}();\nvar GraphNode = /** @class */function () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n    return dataIndices;\n  };\n  GraphNode.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      connectedEdgesMap.set(adjacentEdge.dataIndex, true);\n      var sourceNodesQueue = [adjacentEdge.node1];\n      var targetNodesQueue = [adjacentEdge.node2];\n      var nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < sourceNodesQueue.length) {\n        var sourceNode = sourceNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(sourceNode.dataIndex, true);\n        for (var j = 0; j < sourceNode.inEdges.length; j++) {\n          connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex, true);\n          sourceNodesQueue.push(sourceNode.inEdges[j].node1);\n        }\n      }\n      nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < targetNodesQueue.length) {\n        var targetNode = targetNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(targetNode.dataIndex, true);\n        for (var j = 0; j < targetNode.outEdges.length; j++) {\n          connectedEdgesMap.set(targetNode.outEdges[j].dataIndex, true);\n          targetNodesQueue.push(targetNode.outEdges[j].node2);\n        }\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphNode;\n}();\nvar GraphEdge = /** @class */function () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n  GraphEdge.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    connectedEdgesMap.set(this.dataIndex, true);\n    var sourceNodes = [this.node1];\n    var targetNodes = [this.node2];\n    var nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < sourceNodes.length) {\n      var sourceNode = sourceNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(sourceNode.dataIndex, true);\n      for (var j = 0; j < sourceNode.inEdges.length; j++) {\n        connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex, true);\n        sourceNodes.push(sourceNode.inEdges[j].node1);\n      }\n    }\n    nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < targetNodes.length) {\n      var targetNode = targetNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(targetNode.dataIndex, true);\n      for (var j = 0; j < targetNode.outEdges.length; j++) {\n        connectedEdgesMap.set(targetNode.outEdges[j].dataIndex, true);\n        targetNodes.push(targetNode.outEdges[j].node2);\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphEdge;\n}();\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve(\n    // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target;\n    // addEdge may fail when source or target not exists\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : [];\n    // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  });\n  // Update dataIndex of nodes and edges because invalid edge may be removed\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\nvar GraphSeriesModel = /** @class */function (_super) {\n  __extends(GraphSeriesModel, _super);\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    var self = this;\n    function getCategoriesData() {\n      return self._categoriesData;\n    }\n    // Provide data for legend select\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n        return model;\n      });\n      // TODO Inherit resolveParentPath by default in Model#getModel?\n      var oldGetModel = Model.prototype.getModel;\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n          return newPathArr;\n        }\n        return pathArr;\n      }\n    }\n  };\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    }\n    // dataType === 'node' or empty\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this)\n    // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  });\n  // Register legacy focus actions\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop);\n  // Register roam action.\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nvar PointerShape = /** @class */function () {\n  function PointerShape() {\n    this.angle = 0;\n    this.width = 10;\n    this.r = 10;\n    this.x = 0;\n    this.y = 0;\n  }\n  return PointerShape;\n}();\nvar PointerPath = /** @class */function (_super) {\n  __extends(PointerPath, _super);\n  function PointerPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'pointer';\n    return _this;\n  }\n  PointerPath.prototype.getDefaultShape = function () {\n    return new PointerShape();\n  };\n  PointerPath.prototype.buildPath = function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n  };\n  return PointerPath;\n}(Path);\nexport default PointerPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport PointerPath from './PointerPath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle.js';\nimport ChartView from '../../view/Chart.js';\nimport { parsePercent, round, linearMap } from '../../util/number.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { extend, isFunction, isString, isNumber, each } from 'zrender/lib/core/util.js';\nimport { setCommonECData } from '../../util/innerStore.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\nfunction formatLabel(value, labelFormatter) {\n  var label = value == null ? '' : value + '';\n  if (labelFormatter) {\n    if (isString(labelFormatter)) {\n      label = labelFormatter.replace('{value}', label);\n    } else if (isFunction(labelFormatter)) {\n      label = labelFormatter(value);\n    }\n  }\n  return label;\n}\nvar GaugeView = /** @class */function (_super) {\n  __extends(GaugeView, _super);\n  function GaugeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GaugeView.type;\n    return _this;\n  }\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\n    var posInfo = parsePosition(seriesModel, api);\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n    this._data = seriesModel.getData();\n  };\n  GaugeView.prototype.dispose = function () {};\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var roundCap = axisLineModel.get('roundCap');\n    var MainPath = roundCap ? Sausage : graphic.Sector;\n    var showAxis = axisLineModel.get('show');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var axisLineWidth = lineStyleModel.get('width');\n    var angles = [startAngle, endAngle];\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0];\n    endAngle = angles[1];\n    var angleRangeSpan = endAngle - startAngle;\n    var prevEndAngle = startAngle;\n    var sectors = [];\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new MainPath({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle(\n      // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'width']));\n      sectors.push(sector);\n      prevEndAngle = endAngle;\n    }\n    sectors.reverse();\n    each(sectors, function (sector) {\n      return group.add(sector);\n    });\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n      var i;\n      for (i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      }\n      // More than 1\n      return colorList[i - 1][1];\n    };\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\n    this._renderAnchor(seriesModel, posInfo);\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n  };\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n    var splitLineDistance = splitLineModel.get('distance');\n    var unitX;\n    var unitY;\n    for (var i = 0; i <= splitNumber; i++) {\n      unitX = Math.cos(angle);\n      unitY = Math.sin(angle);\n      // Split line\n      if (splitLineModel.get('show')) {\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * (r - distance) + cx,\n            y1: unitY * (r - distance) + cy,\n            x2: unitX * (r - splitLineLen - distance) + cx,\n            y2: unitY * (r - splitLineLen - distance) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n        group.add(splitLine);\n      }\n      // Label\n      if (labelModel.get('show')) {\n        var distance = labelModel.get('distance') + splitLineDistance;\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var autoColor = getColor(i / splitNumber);\n        var textStyleX = unitX * (r - splitLineLen - distance) + cx;\n        var textStyleY = unitY * (r - splitLineLen - distance) + cy;\n        var rotateType = labelModel.get('rotate');\n        var rotate = 0;\n        if (rotateType === 'radial') {\n          rotate = -angle + 2 * Math.PI;\n          if (rotate > Math.PI / 2) {\n            rotate += Math.PI;\n          }\n        } else if (rotateType === 'tangential') {\n          rotate = -angle - Math.PI / 2;\n        } else if (isNumber(rotateType)) {\n          rotate = rotateType * Math.PI / 180;\n        }\n        if (rotate === 0) {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\n              align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true\n          }));\n        } else {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: 'middle',\n              align: 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true,\n            originX: textStyleX,\n            originY: textStyleY,\n            rotation: rotate\n          }));\n        }\n      }\n      // Axis tick\n      if (tickModel.get('show') && i !== splitNumber) {\n        var distance = tickModel.get('distance');\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\n        for (var j = 0; j <= subSplitNumber; j++) {\n          unitX = Math.cos(angle);\n          unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * (r - distance) + cx,\n              y1: unitY * (r - distance) + cy,\n              x2: unitX * (r - tickLen - distance) + cx,\n              y2: unitY * (r - tickLen - distance) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n          group.add(tickLine);\n          angle += subStep;\n        }\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  };\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var oldData = this._data;\n    var oldProgressData = this._progressEls;\n    var progressList = [];\n    var showPointer = seriesModel.get(['pointer', 'show']);\n    var progressModel = seriesModel.getModel('progress');\n    var showProgress = progressModel.get('show');\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var valueExtent = [minVal, maxVal];\n    var angleExtent = [startAngle, endAngle];\n    function createPointer(idx, angle) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\n      var pointerOffset = pointerModel.get('offsetCenter');\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\n      var pointerKeepAspect = pointerModel.get('keepAspect');\n      var pointer;\n      // not exist icon type will be set 'rect'\n      if (pointerStr) {\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\n      } else {\n        pointer = new PointerPath({\n          shape: {\n            angle: -Math.PI / 2,\n            width: pointerWidth,\n            r: pointerLength,\n            x: pointerOffsetX,\n            y: pointerOffsetY\n          }\n        });\n      }\n      pointer.rotation = -(angle + Math.PI / 2);\n      pointer.x = posInfo.cx;\n      pointer.y = posInfo.cy;\n      return pointer;\n    }\n    function createProgress(idx, endAngle) {\n      var roundCap = progressModel.get('roundCap');\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\n      var isOverlap = progressModel.get('overlap');\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\n      var progress = new ProgressPath({\n        shape: {\n          startAngle: startAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: r0,\n          r: r\n        }\n      });\n      isOverlap && (progress.z2 = maxVal - data.get(valueDim, idx) % maxVal);\n      return progress;\n    }\n    if (showProgress || showPointer) {\n      data.diff(oldData).add(function (idx) {\n        var val = data.get(valueDim, idx);\n        if (showPointer) {\n          var pointer = createPointer(idx, startAngle);\n          // TODO hide pointer on NaN value?\n          graphic.initProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(idx, pointer);\n        }\n        if (showProgress) {\n          var progress = createProgress(idx, startAngle);\n          var isClip = progressModel.get('clip');\n          graphic.initProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress);\n          // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\n          progressList[idx] = progress;\n        }\n      }).update(function (newIdx, oldIdx) {\n        var val = data.get(valueDim, newIdx);\n        if (showPointer) {\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\n          var pointer = createPointer(newIdx, previousRotate);\n          pointer.rotation = previousRotate;\n          graphic.updateProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(newIdx, pointer);\n        }\n        if (showProgress) {\n          var previousProgress = oldProgressData[oldIdx];\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\n          var progress = createProgress(newIdx, previousEndAngle);\n          var isClip = progressModel.get('clip');\n          graphic.updateProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress);\n          // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\n          progressList[newIdx] = progress;\n        }\n      }).execute();\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        var focus = emphasisModel.get('focus');\n        var blurScope = emphasisModel.get('blurScope');\n        var emphasisDisabled = emphasisModel.get('disabled');\n        if (showPointer) {\n          var pointer = data.getItemGraphicEl(idx);\n          var symbolStyle = data.getItemVisual(idx, 'style');\n          var visualColor = symbolStyle.fill;\n          if (pointer instanceof ZRImage) {\n            var pathStyle = pointer.style;\n            pointer.useStyle(extend({\n              image: pathStyle.image,\n              x: pathStyle.x,\n              y: pathStyle.y,\n              width: pathStyle.width,\n              height: pathStyle.height\n            }, symbolStyle));\n          } else {\n            pointer.useStyle(symbolStyle);\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\n          }\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\n          if (pointer.style.fill === 'auto') {\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n          }\n          pointer.z2EmphasisLift = 0;\n          setStatesStylesFromModel(pointer, itemModel);\n          toggleHoverEmphasis(pointer, focus, blurScope, emphasisDisabled);\n        }\n        if (showProgress) {\n          var progress = progressList[idx];\n          progress.useStyle(data.getItemVisual(idx, 'style'));\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\n          progress.z2EmphasisLift = 0;\n          setStatesStylesFromModel(progress, itemModel);\n          toggleHoverEmphasis(progress, focus, blurScope, emphasisDisabled);\n        }\n      });\n      this._progressEls = progressList;\n    }\n  };\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\n    var anchorModel = seriesModel.getModel('anchor');\n    var showAnchor = anchorModel.get('show');\n    if (showAnchor) {\n      var anchorSize = anchorModel.get('size');\n      var anchorType = anchorModel.get('icon');\n      var offsetCenter = anchorModel.get('offsetCenter');\n      var anchorKeepAspect = anchorModel.get('keepAspect');\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\n      this.group.add(anchor);\n    }\n  };\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\n    var _this = this;\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var contentGroup = new graphic.Group();\n    var newTitleEls = [];\n    var newDetailEls = [];\n    var hasAnimation = seriesModel.isAnimationEnabled();\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\n    data.diff(this._data).add(function (idx) {\n      newTitleEls[idx] = new graphic.Text({\n        silent: true\n      });\n      newDetailEls[idx] = new graphic.Text({\n        silent: true\n      });\n    }).update(function (idx, oldIdx) {\n      newTitleEls[idx] = _this._titleEls[oldIdx];\n      newDetailEls[idx] = _this._detailEls[oldIdx];\n    }).execute();\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var value = data.get(valueDim, idx);\n      var itemGroup = new graphic.Group();\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      var itemTitleModel = itemModel.getModel('title');\n      if (itemTitleModel.get('show')) {\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\n        var labelEl = newTitleEls[idx];\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemTitleModel, {\n            x: titleX,\n            y: titleY,\n            text: data.getName(idx),\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: autoColor\n          })\n        });\n        itemGroup.add(labelEl);\n      }\n      var itemDetailModel = itemModel.getModel('detail');\n      if (itemDetailModel.get('show')) {\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\n        var labelEl = newDetailEls[idx];\n        var formatter_1 = itemDetailModel.get('formatter');\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemDetailModel, {\n            x: detailX,\n            y: detailY,\n            text: formatLabel(value, formatter_1),\n            width: isNaN(width) ? null : width,\n            height: isNaN(height) ? null : height,\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: detailColor\n          })\n        });\n        setLabelValueAnimation(labelEl, {\n          normal: itemDetailModel\n        }, value, function (value) {\n          return formatLabel(value, formatter_1);\n        });\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\n          getFormattedLabel: function (labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\n          }\n        });\n        itemGroup.add(labelEl);\n      }\n      contentGroup.add(itemGroup);\n    });\n    this.group.add(contentGroup);\n    this._titleEls = newTitleEls;\n    this._detailEls = newDetailEls;\n  };\n  GaugeView.type = 'gauge';\n  return GaugeView;\n}(ChartView);\nexport default GaugeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\nvar GaugeSeriesModel = /** @class */function (_super) {\n  __extends(GaugeSeriesModel, _super);\n  function GaugeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GaugeSeriesModel.type;\n    _this.visualStyleAccessPath = 'itemStyle';\n    return _this;\n  }\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, ['value']);\n  };\n  GaugeSeriesModel.type = 'series.gauge';\n  GaugeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    // \n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // \n    min: 0,\n    // \n    max: 100,\n    // 10\n    splitNumber: 10,\n    // \n    axisLine: {\n      // show\n      show: true,\n      roundCap: false,\n      lineStyle: {\n        color: [[1, '#E6EBF8']],\n        width: 10\n      }\n    },\n    // \n    progress: {\n      // show\n      show: false,\n      overlap: true,\n      width: 10,\n      roundCap: false,\n      clip: true\n    },\n    // \n    splitLine: {\n      // show\n      show: true,\n      // length\n      length: 10,\n      distance: 10,\n      // lineStylelineStyle\n      lineStyle: {\n        color: '#63677A',\n        width: 3,\n        type: 'solid'\n      }\n    },\n    // \n    axisTick: {\n      // show\n      show: true,\n      // split\n      splitNumber: 5,\n      // length\n      length: 6,\n      distance: 10,\n      // lineStyle\n      lineStyle: {\n        color: '#63677A',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 15,\n      // formatter: null,\n      color: '#464646',\n      fontSize: 12,\n      rotate: 0\n    },\n    pointer: {\n      icon: null,\n      offsetCenter: [0, 0],\n      show: true,\n      showAbove: true,\n      length: '60%',\n      width: 6,\n      keepAspect: false\n    },\n    anchor: {\n      show: false,\n      showAbove: false,\n      size: 6,\n      icon: 'circle',\n      offsetCenter: [0, 0],\n      keepAspect: false,\n      itemStyle: {\n        color: '#fff',\n        borderWidth: 0,\n        borderColor: '#5470c6'\n      }\n    },\n    title: {\n      show: true,\n      // x, ypx\n      offsetCenter: [0, '20%'],\n      // TEXTSTYLE\n      color: '#464646',\n      fontSize: 16,\n      valueAnimation: false\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      padding: [5, 10],\n      // x, ypx\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#464646',\n      fontSize: 30,\n      fontWeight: 'bold',\n      lineHeight: 30,\n      valueAnimation: false\n    }\n  };\n  return GaugeSeriesModel;\n}(SeriesModel);\nexport default GaugeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GaugeView from './GaugeView.js';\nimport GaugeSeriesModel from './GaugeSeries.js';\nexport function install(registers) {\n  registers.registerChartView(GaugeView);\n  registers.registerSeriesModel(GaugeSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\nvar FunnelPiece = /** @class */function (_super) {\n  __extends(FunnelPiece, _super);\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n    _this.setTextGuideLine(labelLine);\n    _this.updateData(data, idx, true);\n    return _this;\n  }\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    }\n    // Update common style\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n    setStatesStylesFromModel(polygon, itemModel);\n    this._updateLabel(data, idx);\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle(\n    // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    };\n    // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n  return FunnelPiece;\n}(graphic.Polygon);\nvar FunnelView = /** @class */function (_super) {\n  __extends(FunnelView, _super);\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  FunnelView.prototype.dispose = function () {};\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\nexport default FunnelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nvar FunnelSeriesModel = /** @class */function (_super) {\n  __extends(FunnelSeriesModel, _super);\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    // Extend labelLine emphasis\n    this._defaultLabelLine(option);\n  };\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine;\n    // Not show label line if `label.normal.show = false`\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n  // Overwrite\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim);\n    // Percent is 0 if sum is 0\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    // zlevel: 0,                  // \n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // \n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer'\n      // formatter: Tooltip.formatter\n    },\n\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: ,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: ,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\nexport default FunnelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  }\n  // Add custom sortable function & none sortable opetion by \"options.sort\"\n  if (isFunction(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n  return indices;\n}\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n    if (max == null) {\n      max = dataExtent[1];\n    }\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n      indices = indices.reverse();\n    }\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n    labelLayout(data);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport FunnelView from './FunnelView.js';\nimport FunnelSeriesModel from './FunnelSeries.js';\nimport funnelLayout from './funnelLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { numericToNumber } from '../../util/number.js';\nimport { eqNaN } from 'zrender/lib/core/util.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar DEFAULT_SMOOTH = 0.3;\nvar ParallelView = /** @class */function (_super) {\n  __extends(ParallelView, _super);\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelView.type;\n    _this._dataGroup = new graphic.Group();\n    _this._initialized = false;\n    return _this;\n  }\n  ParallelView.prototype.init = function () {\n    this.group.add(this._dataGroup);\n  };\n  /**\n   * @override\n   */\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\n    function add(newDataIndex) {\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, seriesModel, newDataIndex);\n      saveOldStyle(line);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    }\n    // First create\n    if (!this._initialized) {\n      this._initialized = true;\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n    this._data = data;\n  };\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._initialized = true;\n    this._data = null;\n    this._dataGroup.removeAll();\n  };\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    var progressiveEls = this._progressiveEls = [];\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\n      line.incremental = true;\n      updateElCommon(line, data, dataIndex, seriesScope);\n      progressiveEls.push(line);\n    }\n  };\n  ParallelView.prototype.remove = function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  };\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ChartView);\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(data.mapDimension(dimName), dataIndex);\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n  return points;\n}\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    // silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n  return line;\n}\nfunction makeSeriesScope(seriesModel) {\n  var smooth = seriesModel.get('smooth', true);\n  smooth === true && (smooth = DEFAULT_SMOOTH);\n  smooth = numericToNumber(smooth);\n  eqNaN(smooth) && (smooth = 0);\n  return {\n    smooth: smooth\n  };\n}\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.fill = null;\n  el.setShape('smooth', seriesScope.smooth);\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\n// function simpleDiff(oldData, newData, dimensions) {\n//     let oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     let dimLen = dimensions.length;\n//     for (let i = 0; i < oldLen; i++) {\n//         for (let j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME put in common util?\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\n\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, bind } from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nvar ParallelSeriesModel = /** @class */function (_super) {\n  __extends(ParallelSeriesModel, _super);\n  function ParallelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\n    });\n  };\n  /**\n   * User can get data raw indices on 'axisAreaSelected' event received.\n   *\n   * @return Raw indices\n   */\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  };\n  ParallelSeriesModel.type = 'series.parallel';\n  ParallelSeriesModel.dependencies = ['parallel'];\n  ParallelSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      show: false\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      width: 1,\n      opacity: 0.45,\n      type: 'solid'\n    },\n    emphasis: {\n      label: {\n        show: false\n      }\n    },\n    progressive: 500,\n    smooth: false,\n    animationEasing: 'linear'\n  };\n  return ParallelSeriesModel;\n}(SeriesModel);\nfunction makeDefaultEncode(seriesModel) {\n  // The mapping of parallelAxis dimension to data dimension can\n  // be specified in parallelAxis.option.dim. For example, if\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\n  // dimension of data. But `data.encode` has higher priority.\n  // Moreover, parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n  if (!parallelModel) {\n    return;\n  }\n  var encodeDefine = {};\n  each(parallelModel.dimensions, function (axisDim) {\n    var dataDimIndex = convertDimNameToNumber(axisDim);\n    encodeDefine[axisDim] = dataDimIndex;\n  });\n  return encodeDefine;\n}\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\nexport default ParallelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar opacityAccessPath = ['lineStyle', 'opacity'];\nvar parallelVisual = {\n  seriesType: 'parallel',\n  reset: function (seriesModel, ecModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var opacityMap = {\n      normal: seriesModel.get(['lineStyle', 'opacity']),\n      active: seriesModel.get('activeOpacity'),\n      inactive: seriesModel.get('inactiveOpacity')\n    };\n    return {\n      progress: function (params, data) {\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\n          var opacity = opacityMap[activeState];\n          if (activeState === 'normal' && data.hasItemOption) {\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\n            itemOpacity != null && (opacity = itemOpacity);\n          }\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          existsStyle.opacity = opacity;\n        }, params.start, params.end);\n      }\n    };\n  }\n};\nexport default parallelVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nexport default function parallelPreprocessor(option) {\n  createParallelIfNeeded(option);\n  mergeAxisOptionFromParallel(option);\n}\n/**\n * Create a parallel coordinate if not exists.\n * @inner\n */\nfunction createParallelIfNeeded(option) {\n  if (option.parallel) {\n    return;\n  }\n  var hasParallelSeries = false;\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'parallel') {\n      hasParallelSeries = true;\n    }\n  });\n  if (hasParallelSeries) {\n    option.parallel = [{}];\n  }\n}\n/**\n * Merge aixs definition from parallel option (if exists) to axis option.\n * @inner\n */\nfunction mergeAxisOptionFromParallel(option) {\n  var axes = modelUtil.normalizeToArray(option.parallelAxis);\n  zrUtil.each(axes, function (axisOption) {\n    if (!zrUtil.isObject(axisOption)) {\n      return;\n    }\n    var parallelIndex = axisOption.parallelIndex || 0;\n    var parallelOption = modelUtil.normalizeToArray(option.parallel)[parallelIndex];\n    if (parallelOption && parallelOption.parallelAxisDefault) {\n      zrUtil.merge(axisOption, parallelOption.parallelAxisDefault, false);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport { each, bind, extend } from 'zrender/lib/core/util.js';\nimport { createOrUpdate, clear } from '../../util/throttle.js';\nvar CLICK_THRESHOLD = 5; // > 4\nvar ParallelView = /** @class */function (_super) {\n  __extends(ParallelView, _super);\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelView.type;\n    return _this;\n  }\n  ParallelView.prototype.render = function (parallelModel, ecModel, api) {\n    this._model = parallelModel;\n    this._api = api;\n    if (!this._handlers) {\n      this._handlers = {};\n      each(handlers, function (handler, eventName) {\n        api.getZr().on(eventName, this._handlers[eventName] = bind(handler, this));\n      }, this);\n    }\n    createOrUpdate(this, '_throttledDispatchExpand', parallelModel.get('axisExpandRate'), 'fixRate');\n  };\n  ParallelView.prototype.dispose = function (ecModel, api) {\n    clear(this, '_throttledDispatchExpand');\n    each(this._handlers, function (handler, eventName) {\n      api.getZr().off(eventName, handler);\n    });\n    this._handlers = null;\n  };\n  /**\n   * @internal\n   * @param {Object} [opt] If null, cancel the last action triggering for debounce.\n   */\n  ParallelView.prototype._throttledDispatchExpand = function (opt) {\n    this._dispatchExpand(opt);\n  };\n  /**\n   * @internal\n   */\n  ParallelView.prototype._dispatchExpand = function (opt) {\n    opt && this._api.dispatchAction(extend({\n      type: 'parallelAxisExpand'\n    }, opt));\n  };\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ComponentView);\nvar handlers = {\n  mousedown: function (e) {\n    if (checkTrigger(this, 'click')) {\n      this._mouseDownPoint = [e.offsetX, e.offsetY];\n    }\n  },\n  mouseup: function (e) {\n    var mouseDownPoint = this._mouseDownPoint;\n    if (checkTrigger(this, 'click') && mouseDownPoint) {\n      var point = [e.offsetX, e.offsetY];\n      var dist = Math.pow(mouseDownPoint[0] - point[0], 2) + Math.pow(mouseDownPoint[1] - point[1], 2);\n      if (dist > CLICK_THRESHOLD) {\n        return;\n      }\n      var result = this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n      result.behavior !== 'none' && this._dispatchExpand({\n        axisExpandWindow: result.axisExpandWindow\n      });\n    }\n    this._mouseDownPoint = null;\n  },\n  mousemove: function (e) {\n    // Should do nothing when brushing.\n    if (this._mouseDownPoint || !checkTrigger(this, 'mousemove')) {\n      return;\n    }\n    var model = this._model;\n    var result = model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n    var behavior = result.behavior;\n    behavior === 'jump' && this._throttledDispatchExpand.debounceNextCall(model.get('axisExpandDebounce'));\n    this._throttledDispatchExpand(behavior === 'none' ? null // Cancel the last trigger, in case that mouse slide out of the area quickly.\n    : {\n      axisExpandWindow: result.axisExpandWindow,\n      // Jumping uses animation, and sliding suppresses animation.\n      animation: behavior === 'jump' ? null : {\n        duration: 0 // Disable animation.\n      }\n    });\n  }\n};\n\nfunction checkTrigger(view, triggerOn) {\n  var model = view._model;\n  return model.get('axisExpandable') && model.get('axisExpandTriggerOn') === triggerOn;\n}\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nvar ParallelModel = /** @class */function (_super) {\n  __extends(ParallelModel, _super);\n  function ParallelModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelModel.type;\n    return _this;\n  }\n  ParallelModel.prototype.init = function () {\n    _super.prototype.init.apply(this, arguments);\n    this.mergeOption({});\n  };\n  ParallelModel.prototype.mergeOption = function (newOption) {\n    var thisOption = this.option;\n    newOption && zrUtil.merge(thisOption, newOption, true);\n    this._initDimensions();\n  };\n  /**\n   * Whether series or axis is in this coordinate system.\n   */\n  ParallelModel.prototype.contains = function (model, ecModel) {\n    var parallelIndex = model.get('parallelIndex');\n    return parallelIndex != null && ecModel.getComponent('parallel', parallelIndex) === this;\n  };\n  ParallelModel.prototype.setAxisExpand = function (opt) {\n    zrUtil.each(['axisExpandable', 'axisExpandCenter', 'axisExpandCount', 'axisExpandWidth', 'axisExpandWindow'], function (name) {\n      if (opt.hasOwnProperty(name)) {\n        // @ts-ignore FIXME: why \"never\" inferred in this.option[name]?\n        this.option[name] = opt[name];\n      }\n    }, this);\n  };\n  ParallelModel.prototype._initDimensions = function () {\n    var dimensions = this.dimensions = [];\n    var parallelAxisIndex = this.parallelAxisIndex = [];\n    var axisModels = zrUtil.filter(this.ecModel.queryComponents({\n      mainType: 'parallelAxis'\n    }), function (axisModel) {\n      // Can not use this.contains here, because\n      // initialization has not been completed yet.\n      return (axisModel.get('parallelIndex') || 0) === this.componentIndex;\n    }, this);\n    zrUtil.each(axisModels, function (axisModel) {\n      dimensions.push('dim' + axisModel.get('dim'));\n      parallelAxisIndex.push(axisModel.componentIndex);\n    });\n  };\n  ParallelModel.type = 'parallel';\n  ParallelModel.dependencies = ['parallelAxis'];\n  ParallelModel.layoutMode = 'box';\n  ParallelModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    layout: 'horizontal',\n    // FIXME\n    // naming?\n    axisExpandable: false,\n    axisExpandCenter: null,\n    axisExpandCount: 0,\n    axisExpandWidth: 50,\n    axisExpandRate: 17,\n    axisExpandDebounce: 50,\n    // [out, in, jumpTarget]. In percentage. If use [null, 0.05], null means full.\n    // Do not doc to user until necessary.\n    axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4],\n    axisExpandTriggerOn: 'click',\n    parallelAxisDefault: null\n  };\n  return ParallelModel;\n}(ComponentModel);\nexport default ParallelModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar ParallelAxis = /** @class */function (_super) {\n  __extends(ParallelAxis, _super);\n  function ParallelAxis(dim, scale, coordExtent, axisType, axisIndex) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    _this.axisIndex = axisIndex;\n    return _this;\n  }\n  ParallelAxis.prototype.isHorizontal = function () {\n    return this.coordinateSystem.getModel().get('layout') !== 'horizontal';\n  };\n  return ParallelAxis;\n}(Axis);\nexport default ParallelAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Parallel Coordinates\n * <https://en.wikipedia.org/wiki/Parallel_coordinates>\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport ParallelAxis from './ParallelAxis.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../../component/helper/sliderMove.js';\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar round = numberUtil.round;\nvar PI = Math.PI;\nvar Parallel = /** @class */function () {\n  function Parallel(parallelModel, ecModel, api) {\n    this.type = 'parallel';\n    /**\n     * key: dimension\n     */\n    this._axesMap = zrUtil.createHashMap();\n    /**\n     * key: dimension\n     * value: {position: [], rotation, }\n     */\n    this._axesLayout = {};\n    this.dimensions = parallelModel.dimensions;\n    this._model = parallelModel;\n    this._init(parallelModel, ecModel, api);\n  }\n  Parallel.prototype._init = function (parallelModel, ecModel, api) {\n    var dimensions = parallelModel.dimensions;\n    var parallelAxisIndex = parallelModel.parallelAxisIndex;\n    each(dimensions, function (dim, idx) {\n      var axisIndex = parallelAxisIndex[idx];\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axis = this._axesMap.set(dim, new ParallelAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisIndex));\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse');\n      // Injection\n      axisModel.axis = axis;\n      axis.model = axisModel;\n      axis.coordinateSystem = axisModel.coordinateSystem = this;\n    }, this);\n  };\n  /**\n   * Update axis scale after data processed\n   */\n  Parallel.prototype.update = function (ecModel, api) {\n    this._updateAxesFromSeries(this._model, ecModel);\n  };\n  Parallel.prototype.containPoint = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n    var axisBase = layoutInfo.axisBase;\n    var layoutBase = layoutInfo.layoutBase;\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var pAxis = point[1 - pixelDimIndex];\n    var pLayout = point[pixelDimIndex];\n    return pAxis >= axisBase && pAxis <= axisBase + layoutInfo.axisLength && pLayout >= layoutBase && pLayout <= layoutBase + layoutInfo.layoutLength;\n  };\n  Parallel.prototype.getModel = function () {\n    return this._model;\n  };\n  /**\n   * Update properties from series\n   */\n  Parallel.prototype._updateAxesFromSeries = function (parallelModel, ecModel) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (!parallelModel.contains(seriesModel, ecModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      each(this.dimensions, function (dim) {\n        var axis = this._axesMap.get(dim);\n        axis.scale.unionExtentFromData(data, data.mapDimension(dim));\n        axisHelper.niceScaleExtent(axis.scale, axis.model);\n      }, this);\n    }, this);\n  };\n  /**\n   * Resize the parallel coordinate system.\n   */\n  Parallel.prototype.resize = function (parallelModel, api) {\n    this._rect = layoutUtil.getLayoutRect(parallelModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._layoutAxes();\n  };\n  Parallel.prototype.getRect = function () {\n    return this._rect;\n  };\n  Parallel.prototype._makeLayoutInfo = function () {\n    var parallelModel = this._model;\n    var rect = this._rect;\n    var xy = ['x', 'y'];\n    var wh = ['width', 'height'];\n    var layout = parallelModel.get('layout');\n    var pixelDimIndex = layout === 'horizontal' ? 0 : 1;\n    var layoutLength = rect[wh[pixelDimIndex]];\n    var layoutExtent = [0, layoutLength];\n    var axisCount = this.dimensions.length;\n    var axisExpandWidth = restrict(parallelModel.get('axisExpandWidth'), layoutExtent);\n    var axisExpandCount = restrict(parallelModel.get('axisExpandCount') || 0, [0, axisCount]);\n    var axisExpandable = parallelModel.get('axisExpandable') && axisCount > 3 && axisCount > axisExpandCount && axisExpandCount > 1 && axisExpandWidth > 0 && layoutLength > 0;\n    // `axisExpandWindow` is According to the coordinates of [0, axisExpandLength],\n    // for sake of consider the case that axisCollapseWidth is 0 (when screen is narrow),\n    // where collapsed axes should be overlapped.\n    var axisExpandWindow = parallelModel.get('axisExpandWindow');\n    var winSize;\n    if (!axisExpandWindow) {\n      winSize = restrict(axisExpandWidth * (axisExpandCount - 1), layoutExtent);\n      var axisExpandCenter = parallelModel.get('axisExpandCenter') || mathFloor(axisCount / 2);\n      axisExpandWindow = [axisExpandWidth * axisExpandCenter - winSize / 2];\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    } else {\n      winSize = restrict(axisExpandWindow[1] - axisExpandWindow[0], layoutExtent);\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    }\n    var axisCollapseWidth = (layoutLength - winSize) / (axisCount - axisExpandCount);\n    // Avoid axisCollapseWidth is too small.\n    axisCollapseWidth < 3 && (axisCollapseWidth = 0);\n    // Find the first and last indices > ewin[0] and < ewin[1].\n    var winInnerIndices = [mathFloor(round(axisExpandWindow[0] / axisExpandWidth, 1)) + 1, mathCeil(round(axisExpandWindow[1] / axisExpandWidth, 1)) - 1];\n    // Pos in ec coordinates.\n    var axisExpandWindow0Pos = axisCollapseWidth / axisExpandWidth * axisExpandWindow[0];\n    return {\n      layout: layout,\n      pixelDimIndex: pixelDimIndex,\n      layoutBase: rect[xy[pixelDimIndex]],\n      layoutLength: layoutLength,\n      axisBase: rect[xy[1 - pixelDimIndex]],\n      axisLength: rect[wh[1 - pixelDimIndex]],\n      axisExpandable: axisExpandable,\n      axisExpandWidth: axisExpandWidth,\n      axisCollapseWidth: axisCollapseWidth,\n      axisExpandWindow: axisExpandWindow,\n      axisCount: axisCount,\n      winInnerIndices: winInnerIndices,\n      axisExpandWindow0Pos: axisExpandWindow0Pos\n    };\n  };\n  Parallel.prototype._layoutAxes = function () {\n    var rect = this._rect;\n    var axes = this._axesMap;\n    var dimensions = this.dimensions;\n    var layoutInfo = this._makeLayoutInfo();\n    var layout = layoutInfo.layout;\n    axes.each(function (axis) {\n      var axisExtent = [0, layoutInfo.axisLength];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(axisExtent[idx], axisExtent[1 - idx]);\n    });\n    each(dimensions, function (dim, idx) {\n      var posInfo = (layoutInfo.axisExpandable ? layoutAxisWithExpand : layoutAxisWithoutExpand)(idx, layoutInfo);\n      var positionTable = {\n        horizontal: {\n          x: posInfo.position,\n          y: layoutInfo.axisLength\n        },\n        vertical: {\n          x: 0,\n          y: posInfo.position\n        }\n      };\n      var rotationTable = {\n        horizontal: PI / 2,\n        vertical: 0\n      };\n      var position = [positionTable[layout].x + rect.x, positionTable[layout].y + rect.y];\n      var rotation = rotationTable[layout];\n      var transform = matrix.create();\n      matrix.rotate(transform, transform, rotation);\n      matrix.translate(transform, transform, position);\n      // TODO\n      // tick layout info\n      // TODO\n      // update dimensions info based on axis order.\n      this._axesLayout[dim] = {\n        position: position,\n        rotation: rotation,\n        transform: transform,\n        axisNameAvailableWidth: posInfo.axisNameAvailableWidth,\n        axisLabelShow: posInfo.axisLabelShow,\n        nameTruncateMaxWidth: posInfo.nameTruncateMaxWidth,\n        tickDirection: 1,\n        labelDirection: 1\n      };\n    }, this);\n  };\n  /**\n   * Get axis by dim.\n   */\n  Parallel.prototype.getAxis = function (dim) {\n    return this._axesMap.get(dim);\n  };\n  /**\n   * Convert a dim value of a single item of series data to Point.\n   */\n  Parallel.prototype.dataToPoint = function (value, dim) {\n    return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value), dim);\n  };\n  /**\n   * Travel data for one time, get activeState of each data item.\n   * @param start the start dataIndex that travel from.\n   * @param end the next dataIndex of the last dataIndex will be travel.\n   */\n  Parallel.prototype.eachActiveState = function (data, callback, start, end) {\n    start == null && (start = 0);\n    end == null && (end = data.count());\n    var axesMap = this._axesMap;\n    var dimensions = this.dimensions;\n    var dataDimensions = [];\n    var axisModels = [];\n    zrUtil.each(dimensions, function (axisDim) {\n      dataDimensions.push(data.mapDimension(axisDim));\n      axisModels.push(axesMap.get(axisDim).model);\n    });\n    var hasActiveSet = this.hasAxisBrushed();\n    for (var dataIndex = start; dataIndex < end; dataIndex++) {\n      var activeState = void 0;\n      if (!hasActiveSet) {\n        activeState = 'normal';\n      } else {\n        activeState = 'active';\n        var values = data.getValues(dataDimensions, dataIndex);\n        for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n          var state = axisModels[j].getActiveState(values[j]);\n          if (state === 'inactive') {\n            activeState = 'inactive';\n            break;\n          }\n        }\n      }\n      callback(activeState, dataIndex);\n    }\n  };\n  /**\n   * Whether has any activeSet.\n   */\n  Parallel.prototype.hasAxisBrushed = function () {\n    var dimensions = this.dimensions;\n    var axesMap = this._axesMap;\n    var hasActiveSet = false;\n    for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n      if (axesMap.get(dimensions[j]).model.getActiveState() !== 'normal') {\n        hasActiveSet = true;\n      }\n    }\n    return hasActiveSet;\n  };\n  /**\n   * Convert coords of each axis to Point.\n   *  Return point. For example: [10, 20]\n   */\n  Parallel.prototype.axisCoordToPoint = function (coord, dim) {\n    var axisLayout = this._axesLayout[dim];\n    return graphic.applyTransform([coord, 0], axisLayout.transform);\n  };\n  /**\n   * Get axis layout.\n   */\n  Parallel.prototype.getAxisLayout = function (dim) {\n    return zrUtil.clone(this._axesLayout[dim]);\n  };\n  /**\n   * @return {Object} {axisExpandWindow, delta, behavior: 'jump' | 'slide' | 'none'}.\n   */\n  Parallel.prototype.getSlidedAxisExpandWindow = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var axisExpandWindow = layoutInfo.axisExpandWindow.slice();\n    var winSize = axisExpandWindow[1] - axisExpandWindow[0];\n    var extent = [0, layoutInfo.axisExpandWidth * (layoutInfo.axisCount - 1)];\n    // Out of the area of coordinate system.\n    if (!this.containPoint(point)) {\n      return {\n        behavior: 'none',\n        axisExpandWindow: axisExpandWindow\n      };\n    }\n    // Convert the point from global to expand coordinates.\n    var pointCoord = point[pixelDimIndex] - layoutInfo.layoutBase - layoutInfo.axisExpandWindow0Pos;\n    // For dragging operation convenience, the window should not be\n    // slided when mouse is the center area of the window.\n    var delta;\n    var behavior = 'slide';\n    var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n    var triggerArea = this._model.get('axisExpandSlideTriggerArea');\n    // But consider touch device, jump is necessary.\n    var useJump = triggerArea[0] != null;\n    if (axisCollapseWidth) {\n      if (useJump && axisCollapseWidth && pointCoord < winSize * triggerArea[0]) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * triggerArea[2];\n      } else if (useJump && axisCollapseWidth && pointCoord > winSize * (1 - triggerArea[0])) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * (1 - triggerArea[2]);\n      } else {\n        (delta = pointCoord - winSize * triggerArea[1]) >= 0 && (delta = pointCoord - winSize * (1 - triggerArea[1])) <= 0 && (delta = 0);\n      }\n      delta *= layoutInfo.axisExpandWidth / axisCollapseWidth;\n      delta ? sliderMove(delta, axisExpandWindow, extent, 'all')\n      // Avoid nonsense triger on mousemove.\n      : behavior = 'none';\n    }\n    // When screen is too narrow, make it visible and slidable, although it is hard to interact.\n    else {\n      var winSize2 = axisExpandWindow[1] - axisExpandWindow[0];\n      var pos = extent[1] * pointCoord / winSize2;\n      axisExpandWindow = [mathMax(0, pos - winSize2 / 2)];\n      axisExpandWindow[1] = mathMin(extent[1], axisExpandWindow[0] + winSize2);\n      axisExpandWindow[0] = axisExpandWindow[1] - winSize2;\n    }\n    return {\n      axisExpandWindow: axisExpandWindow,\n      behavior: behavior\n    };\n  };\n  return Parallel;\n}();\nfunction restrict(len, extent) {\n  return mathMin(mathMax(len, extent[0]), extent[1]);\n}\nfunction layoutAxisWithoutExpand(axisIndex, layoutInfo) {\n  var step = layoutInfo.layoutLength / (layoutInfo.axisCount - 1);\n  return {\n    position: step * axisIndex,\n    axisNameAvailableWidth: step,\n    axisLabelShow: true\n  };\n}\nfunction layoutAxisWithExpand(axisIndex, layoutInfo) {\n  var layoutLength = layoutInfo.layoutLength;\n  var axisExpandWidth = layoutInfo.axisExpandWidth;\n  var axisCount = layoutInfo.axisCount;\n  var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n  var winInnerIndices = layoutInfo.winInnerIndices;\n  var position;\n  var axisNameAvailableWidth = axisCollapseWidth;\n  var axisLabelShow = false;\n  var nameTruncateMaxWidth;\n  if (axisIndex < winInnerIndices[0]) {\n    position = axisIndex * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  } else if (axisIndex <= winInnerIndices[1]) {\n    position = layoutInfo.axisExpandWindow0Pos + axisIndex * axisExpandWidth - layoutInfo.axisExpandWindow[0];\n    axisNameAvailableWidth = axisExpandWidth;\n    axisLabelShow = true;\n  } else {\n    position = layoutLength - (axisCount - 1 - axisIndex) * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  }\n  return {\n    position: position,\n    axisNameAvailableWidth: axisNameAvailableWidth,\n    axisLabelShow: axisLabelShow,\n    nameTruncateMaxWidth: nameTruncateMaxWidth\n  };\n}\nexport default Parallel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Parallel coordinate system creater.\n */\nimport Parallel from './Parallel.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nfunction createParallelCoordSys(ecModel, api) {\n  var coordSysList = [];\n  ecModel.eachComponent('parallel', function (parallelModel, idx) {\n    var coordSys = new Parallel(parallelModel, ecModel, api);\n    coordSys.name = 'parallel_' + idx;\n    coordSys.resize(parallelModel, api);\n    parallelModel.coordinateSystem = coordSys;\n    coordSys.model = parallelModel;\n    coordSysList.push(coordSys);\n  });\n  // Inject the coordinateSystems into seriesModel\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'parallel') {\n      var parallelModel = seriesModel.getReferringComponents('parallel', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = parallelModel.coordinateSystem;\n    }\n  });\n  return coordSysList;\n}\nvar parallelCoordSysCreator = {\n  create: createParallelCoordSys\n};\nexport default parallelCoordSysCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport * as numberUtil from '../../util/number.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nvar ParallelAxisModel = /** @class */function (_super) {\n  __extends(ParallelAxisModel, _super);\n  function ParallelAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelAxisModel.type;\n    /**\n     * @readOnly\n     */\n    _this.activeIntervals = [];\n    return _this;\n  }\n  ParallelAxisModel.prototype.getAreaSelectStyle = function () {\n    return makeStyleMapper([['fill', 'color'], ['lineWidth', 'borderWidth'], ['stroke', 'borderColor'], ['width', 'width'], ['opacity', 'opacity']\n    // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n    // So do not transfer decal directly.\n    ])(this.getModel('areaSelectStyle'));\n  };\n  /**\n   * The code of this feature is put on AxisModel but not ParallelAxis,\n   * because axisModel can be alive after echarts updating but instance of\n   * ParallelAxis having been disposed. this._activeInterval should be kept\n   * when action dispatched (i.e. legend click).\n   *\n   * @param intervals `interval.length === 0` means set all active.\n   */\n  ParallelAxisModel.prototype.setActiveIntervals = function (intervals) {\n    var activeIntervals = this.activeIntervals = zrUtil.clone(intervals);\n    // Normalize\n    if (activeIntervals) {\n      for (var i = activeIntervals.length - 1; i >= 0; i--) {\n        numberUtil.asc(activeIntervals[i]);\n      }\n    }\n  };\n  /**\n   * @param value When only attempting detect whether 'no activeIntervals set',\n   *        `value` is not needed to be input.\n   */\n  ParallelAxisModel.prototype.getActiveState = function (value) {\n    var activeIntervals = this.activeIntervals;\n    if (!activeIntervals.length) {\n      return 'normal';\n    }\n    if (value == null || isNaN(+value)) {\n      return 'inactive';\n    }\n    // Simple optimization\n    if (activeIntervals.length === 1) {\n      var interval = activeIntervals[0];\n      if (interval[0] <= value && value <= interval[1]) {\n        return 'active';\n      }\n    } else {\n      for (var i = 0, len = activeIntervals.length; i < len; i++) {\n        if (activeIntervals[i][0] <= value && value <= activeIntervals[i][1]) {\n          return 'active';\n        }\n      }\n    }\n    return 'inactive';\n  };\n  return ParallelAxisModel;\n}(ComponentModel);\nzrUtil.mixin(ParallelAxisModel, AxisModelCommonMixin);\nexport default ParallelAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\nvar BrushController = /** @class */function (_super) {\n  __extends(BrushController, _super);\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n    _this._track = [];\n    /**\n     * @internal\n     */\n    _this._covers = [];\n    _this._handlers = {};\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr;\n    // Consider roam, which takes globalPan too.\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n    return this;\n  };\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n    this._zr.add(thisGroup);\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  };\n  // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex];\n      // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbidden.\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n    this.enableBrush(false);\n    // container may 'removeAll' outside.\n    clearCovers(this);\n    this._zr.remove(this.group);\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n  return BrushController;\n}(Eventful);\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n  return creatingCover;\n}\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n}\n// return target panel or `true` (means global panel)\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n}\n// Return a panel or true\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId;\n  // User may give cover without coord sys info,\n  // which is then treated as global panel.\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n  if (!track.length) {\n    return false;\n  }\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n;\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\nfunction resetCursor(controller, e, localCursorPoint) {\n  if (\n  // Check active\n  !controller._brushType\n  // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint);\n  // Check whether in covers.\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n  currPanel && zr.setCursorStyle('crosshair');\n}\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n  controller._track.push(localCursorPoint.slice());\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n      controller._covers.push(creatingCover);\n    }\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n  return eventParams;\n}\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n    return panel.defaultBrushType;\n  }\n  return brushType;\n}\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null;\n    // trigger event should be at final, after procedure will be nested.\n    eventParams && trigger(controller, eventParams);\n  }\n}\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group();\n      // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0));\n      // Use graphic.Polygon close the shape.\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent;\n      // If brushWidth not specified, fit the panel.\n      var panel = getPanelByCover(controller, cover);\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n}\n// Consider width/height is negative.\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport BrushController from '../helper/BrushController.js';\nimport * as brushHelper from '../helper/brushHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport ComponentView from '../../view/Component.js';\nvar elementList = ['axisLine', 'axisTickLabel', 'axisName'];\nvar ParallelAxisView = /** @class */function (_super) {\n  __extends(ParallelAxisView, _super);\n  function ParallelAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelAxisView.type;\n    return _this;\n  }\n  ParallelAxisView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.apply(this, arguments);\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this));\n  };\n  ParallelAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    if (fromAxisAreaSelect(axisModel, ecModel, payload)) {\n      return;\n    }\n    this.axisModel = axisModel;\n    this.api = api;\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!axisModel.get('show')) {\n      return;\n    }\n    var coordSysModel = getCoordSysModel(axisModel, ecModel);\n    var coordSys = coordSysModel.coordinateSystem;\n    var areaSelectStyle = axisModel.getAreaSelectStyle();\n    var areaWidth = areaSelectStyle.width;\n    var dim = axisModel.axis.dim;\n    var axisLayout = coordSys.getAxisLayout(dim);\n    var builderOpt = zrUtil.extend({\n      strokeContainThreshold: areaWidth\n    }, axisLayout);\n    var axisBuilder = new AxisBuilder(axisModel, builderOpt);\n    zrUtil.each(elementList, axisBuilder.add, axisBuilder);\n    this._axisGroup.add(axisBuilder.getGroup());\n    this._refreshBrushController(builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n  };\n  // /**\n  //  * @override\n  //  */\n  // updateVisual(axisModel, ecModel, api, payload) {\n  //     this._brushController && this._brushController\n  //         .updateCovers(getCoverInfoList(axisModel));\n  // }\n  ParallelAxisView.prototype._refreshBrushController = function (builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api) {\n    // After filtering, axis may change, select area needs to be update.\n    var extent = axisModel.axis.getExtent();\n    var extentLen = extent[1] - extent[0];\n    var extra = Math.min(30, Math.abs(extentLen) * 0.1); // Arbitrary value.\n    // width/height might be negative, which will be\n    // normalized in BoundingRect.\n    var rect = graphic.BoundingRect.create({\n      x: extent[0],\n      y: -areaWidth / 2,\n      width: extentLen,\n      height: areaWidth\n    });\n    rect.x -= extra;\n    rect.width += 2 * extra;\n    this._brushController.mount({\n      enableGlobalPan: true,\n      rotation: builderOpt.rotation,\n      x: builderOpt.position[0],\n      y: builderOpt.position[1]\n    }).setPanels([{\n      panelId: 'pl',\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect, 0)\n    }]).enableBrush({\n      brushType: 'lineX',\n      brushStyle: areaSelectStyle,\n      removeOnClick: true\n    }).updateCovers(getCoverInfoList(axisModel));\n  };\n  ParallelAxisView.prototype._onBrush = function (eventParam) {\n    var coverInfoList = eventParam.areas;\n    // Do not cache these object, because the mey be changed.\n    var axisModel = this.axisModel;\n    var axis = axisModel.axis;\n    var intervals = zrUtil.map(coverInfoList, function (coverInfo) {\n      return [axis.coordToData(coverInfo.range[0], true), axis.coordToData(coverInfo.range[1], true)];\n    });\n    // If realtime is true, action is not dispatched on drag end, because\n    // the drag end emits the same params with the last drag move event,\n    // and may have some delay when using touch pad.\n    if (!axisModel.option.realtime === eventParam.isEnd || eventParam.removeOnClick) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'axisAreaSelect',\n        parallelAxisId: axisModel.id,\n        intervals: intervals\n      });\n    }\n  };\n  ParallelAxisView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n  ParallelAxisView.type = 'parallelAxis';\n  return ParallelAxisView;\n}(ComponentView);\nfunction fromAxisAreaSelect(axisModel, ecModel, payload) {\n  return payload && payload.type === 'axisAreaSelect' && ecModel.findComponents({\n    mainType: 'parallelAxis',\n    query: payload\n  })[0] === axisModel;\n}\nfunction getCoverInfoList(axisModel) {\n  var axis = axisModel.axis;\n  return zrUtil.map(axisModel.activeIntervals, function (interval) {\n    return {\n      brushType: 'lineX',\n      panelId: 'pl',\n      range: [axis.dataToCoord(interval[0], true), axis.dataToCoord(interval[1], true)]\n    };\n  });\n}\nfunction getCoordSysModel(axisModel, ecModel) {\n  return ecModel.getComponent('parallel', axisModel.get('parallelIndex'));\n}\nexport default ParallelAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'axisAreaSelect',\n  event: 'axisAreaSelected'\n  // update: 'updateVisual'\n};\n\nexport function installParallelActions(registers) {\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallelAxis',\n      query: payload\n    }, function (parallelAxisModel) {\n      parallelAxisModel.axis.model.setActiveIntervals(payload.intervals);\n    });\n  });\n  /**\n   * @payload\n   */\n  registers.registerAction('parallelAxisExpand', function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallel',\n      query: payload\n    }, function (parallelModel) {\n      parallelModel.setAxisExpand(payload);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport parallelPreprocessor from '../../coord/parallel/parallelPreprocessor.js';\nimport ParallelView from './ParallelView.js';\nimport ParallelModel from '../../coord/parallel/ParallelModel.js';\nimport parallelCoordSysCreator from '../../coord/parallel/parallelCreator.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport ParallelAxisModel from '../../coord/parallel/AxisModel.js';\nimport ParallelAxisView from '../axis/ParallelAxisView.js';\nimport { installParallelActions } from '../axis/parallelAxisAction.js';\nvar defaultAxisOption = {\n  type: 'value',\n  areaSelectStyle: {\n    width: 20,\n    borderWidth: 1,\n    borderColor: 'rgba(160,197,232)',\n    color: 'rgba(160,197,232)',\n    opacity: 0.3\n  },\n  realtime: true,\n  z: 10\n};\nexport function install(registers) {\n  registers.registerComponentView(ParallelView);\n  registers.registerComponentModel(ParallelModel);\n  registers.registerCoordinateSystem('parallel', parallelCoordSysCreator);\n  registers.registerPreprocessor(parallelPreprocessor);\n  registers.registerComponentModel(ParallelAxisModel);\n  registers.registerComponentView(ParallelAxisView);\n  axisModelCreator(registers, 'parallel', ParallelAxisModel, defaultAxisOption);\n  installParallelActions(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ParallelView from './ParallelView.js';\nimport ParallelSeriesModel from './ParallelSeries.js';\nimport parallelVisual from './parallelVisual.js';\nimport { install as installParallelComponent } from '../../component/parallel/install.js';\nexport function install(registers) {\n  use(installParallelComponent);\n  registers.registerChartView(ParallelView);\n  registers.registerSeriesModel(ParallelSeriesModel);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\nvar SankeyPathShape = /** @class */function () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n  return SankeyPathShape;\n}();\nvar SankeyPath = /** @class */function (_super) {\n  __extends(SankeyPath, _super);\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n    ctx.closePath();\n  };\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  return SankeyPath;\n}(graphic.Path);\nvar SankeyView = /** @class */function (_super) {\n  __extends(SankeyView, _super);\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo;\n    // view width\n    var width = layoutInfo.width;\n    // view height\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y;\n    // generate a bezire Curve for each edge\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle());\n      // Special color, use source node color or target node color\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex,\n            // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    // Generate a rect for each node\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n    this._data = seriesModel.getData();\n  };\n  SankeyView.prototype.dispose = function () {};\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\n * Special color, use source node color or target node color\n * @param curveProps curve's style to parse\n * @param orient direction\n * @param edge current curve data\n */\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n  }\n}\n// Add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default SankeyView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar SankeySeriesModel = /** @class */function (_super) {\n  __extends(SankeySeriesModel, _super);\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   */\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n        return model;\n      });\n    }\n  };\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    }\n    // dataType === 'node' or empty do not show tooltip by default\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    }\n    // dataType === 'node'\n    else {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var value = node.getLayout().value;\n      var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n      return createTooltipMarkup('nameValue', {\n        name: name_1 != null ? name_1 + '' : null,\n        value: value,\n        noValue: noValue(value)\n      });\n    }\n  };\n  SankeySeriesModel.prototype.optionUpdated = function () {};\n  // Override Series.getDataParams()\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n    return params;\n  };\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    edgeLabel: {\n      show: false,\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\nexport default SankeySeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData } from '../../util/model.js';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\n * Get the layout position of the whole view\n */\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\n * Compute the value of each node by summing the associated edge's value\n */\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\n * Compute the x-position for each node.\n *\n * Here we use Kahn algorithm to detect cycle when we traverse\n * the node to computer the initial x position.\n */\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = [];\n  // Storage each node's indegree.\n  var indegreeArr = [];\n  // Used to storage the node with indegree is equal to 0.\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0;\n  // let kx = 0;\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n  var maxNodeDepth = -1;\n  // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\n * All the node without outEgdes are assigned maximum x-position and\n *     be aligned in the last column.\n *\n * @param nodes.  node of sankey view.\n * @param maxDepth.  use to assign to node without outEdges as x-position.\n */\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\n * Scale node x-position to the width\n *\n * @param nodes  node of sankey view\n * @param kx   multiple used to scale nodes\n */\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\n *\n * @param nodes  node of sankey view\n * @param edges  edge of sankey view\n * @param height  the whole height of the area to draw the view\n * @param nodeGap  the vertical distance between two nodes\n *     in the same column.\n * @param iterations  the number of iterations for the algorithm\n */\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\n * Compute the original y-position for each node\n */\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\n * Resolve the collision of initialized depth (y-position)\n */\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n    var viewWidth = orient === 'vertical' ? width : height;\n    // If the bottommost node goes outside the bounds, push it back up\n    dy = y0 - nodeGap - viewWidth;\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\n * Change the y-position of the nodes, except most the right side nodes\n * @param nodesByBreadth\n * @param alpha  parameter used to adjust the nodes y-position\n */\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n  return sum;\n}\n/**\n * Change the y-position of the nodes, except most the left side nodes\n */\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\n * Compute the depth(y-position) of each edge\n */\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n    if (edges.length) {\n      zrUtil.each(edges, function (edge) {\n        var edgeStyle = edge.getModel().get('lineStyle');\n        edge.setVisual('style', edgeStyle);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SankeyView from './SankeyView.js';\nimport SankeySeriesModel from './SankeySeries.js';\nimport sankeyLayout from './sankeyLayout.js';\nimport sankeyVisual from './sankeyVisual.js';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nvar WhiskerBoxCommonMixin = /** @class */function () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal;\n    // FIXME\n    // Consider time axis.\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data;\n    // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice();\n          // Modify current using data.\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice();\n          // Modify current using data.\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n  return WhiskerBoxCommonMixin;\n}();\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar BoxplotSeriesModel = /** @class */function (_super) {\n  __extends(BoxplotSeriesModel, _super);\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BoxplotSeriesModel.type;\n    // TODO\n    // box width represents group size, so dimension should have 'size'.\n    /**\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\n     * The meanings of 'min' and 'max' depend on user,\n     * and echarts do not need to know it.\n     * @readOnly\n     */\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar BoxplotView = /** @class */function (_super) {\n  __extends(BoxplotView, _super);\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data;\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        saveOldStyle(symbolEl);\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\nvar BoxPathShape = /** @class */function () {\n  function BoxPathShape() {}\n  return BoxPathShape;\n}();\nvar BoxPath = /** @class */function (_super) {\n  __extends(BoxPath, _super);\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n    ctx.closePath();\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n  return BoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\nexport default BoxplotView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../../util/number.js';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n    if (!seriesModels.length) {\n      return;\n    }\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\n * Group series by axis.\n */\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\n * Calculate offset and box width for each series.\n */\nfunction calculateBase(groupItem) {\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    var extent = baseAxis.getExtent();\n    bandWidth = Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\n * Calculate points location for each series.\n */\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n    return point;\n  }\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { quantile, asc } from '../../util/number.js';\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\n/**\n * See:\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\n *\n * Helper method for preparing data.\n *\n * @param rawData like\n *        [\n *            [12,232,443], (raw data set for the first box)\n *            [3843,5545,1232], (raw data set for the second box)\n *            ...\n *        ]\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\n *      If 'none'/0 passed, min bound will not be used.\n */\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareBoxplotData from './prepareBoxplotData.js';\nimport { throwError, makePrintable } from '../../util/log.js';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n      throwError(errMsg);\n    }\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoxplotSeriesModel from './BoxplotSeries.js';\nimport BoxplotView from './BoxplotView.js';\nimport boxplotLayout from './boxplotLayout.js';\nimport { boxplotTransform } from './boxplotTransform.js';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\nvar CandlestickView = /** @class */function (_super) {\n  __extends(CandlestickView, _super);\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this._updateDrawMode(seriesModel);\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n  };\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea();\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n      this._progressiveEls.push(el);\n    }\n  };\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\nvar NormalBoxPathShape = /** @class */function () {\n  function NormalBoxPathShape() {}\n  return NormalBoxPathShape;\n}();\nvar NormalBoxPath = /** @class */function (_super) {\n  __extends(NormalBoxPath, _super);\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n  return NormalBoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n  return clipped;\n}\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\nvar LargeBoxPathShape = /** @class */function () {\n  function LargeBoxPathShape() {}\n  return LargeBoxPathShape;\n}();\nvar LargeBoxPath = /** @class */function (_super) {\n  __extends(LargeBoxPath, _super);\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n  return LargeBoxPath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0'])\n  // Use color for border color by default.\n  || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']);\n  if (sign === 0) {\n    borderColor = seriesModel.get(['itemStyle', 'borderColorDoji']);\n  }\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar CandlestickSeriesModel = /** @class */function (_super) {\n  __extends(CandlestickSeriesModel, _super);\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  }\n  // Translate 'k' to 'candlestick'.\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n    function getBorderColor(sign, model) {\n      return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    }\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\n * Get the sign of a single data.\n *\n * @returns 0 for doji with hasDojiColor: true,\n *          1 for positive,\n *          -1 for negative.\n */\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor\n    // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0\n    // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1\n    // No record of previous, set to be positive\n    : 1;\n  }\n  return sign;\n}\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth)\n  // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport SymbolClz from './Symbol.js';\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\nvar EffectSymbol = /** @class */function (_super) {\n  __extends(EffectSymbol, _super);\n  function EffectSymbol(data, idx) {\n    var _this = _super.call(this) || this;\n    var symbol = new SymbolClz(data, idx);\n    var rippleGroup = new Group();\n    _this.add(symbol);\n    _this.add(rippleGroup);\n    _this.updateData(data, idx);\n    return _this;\n  }\n  EffectSymbol.prototype.stopEffectAnimation = function () {\n    this.childAt(1).removeAll();\n  };\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\n    var symbolType = effectCfg.symbolType;\n    var color = effectCfg.color;\n    var rippleNumber = effectCfg.rippleNumber;\n    var rippleGroup = this.childAt(1);\n    for (var i = 0; i < rippleNumber; i++) {\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4136.\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n      ripplePath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 99,\n        silent: true,\n        scaleX: 0.5,\n        scaleY: 0.5\n      });\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\n      ripplePath.animate('', true).when(effectCfg.period, {\n        scaleX: effectCfg.rippleScale / 2,\n        scaleY: effectCfg.rippleScale / 2\n      }).delay(delay).start();\n      ripplePath.animateStyle(true).when(effectCfg.period, {\n        opacity: 0\n      }).delay(delay).start();\n      rippleGroup.add(ripplePath);\n    }\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Update effect symbol\n   */\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\n    var oldEffectCfg = this._effectCfg;\n    var rippleGroup = this.childAt(1);\n    // Must reinitialize effect if following configuration changed\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n      var propName = DIFFICULT_PROPS[i];\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\n        this.stopEffectAnimation();\n        this.startEffectAnimation(effectCfg);\n        return;\n      }\n    }\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Highlight symbol\n   */\n  EffectSymbol.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  /**\n   * Downplay symbol\n   */\n  EffectSymbol.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  EffectSymbol.prototype.getSymbolType = function () {\n    var symbol = this.childAt(0);\n    return symbol && symbol.getSymbolType();\n  };\n  /**\n   * Update symbol properties\n   */\n  EffectSymbol.prototype.updateData = function (data, idx) {\n    var _this = this;\n    var seriesModel = data.hostModel;\n    this.childAt(0).updateData(data, idx);\n    var rippleGroup = this.childAt(1);\n    var itemModel = data.getItemModel(idx);\n    var symbolType = data.getItemVisual(idx, 'symbol');\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var color = symbolStyle && symbolStyle.fill;\n    var emphasisModel = itemModel.getModel('emphasis');\n    rippleGroup.setScale(symbolSize);\n    rippleGroup.traverse(function (ripplePath) {\n      ripplePath.setStyle('fill', color);\n    });\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      rippleGroup.x = symbolOffset[0];\n      rippleGroup.y = symbolOffset[1];\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n    var effectCfg = {};\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\n    effectCfg.effectOffset = idx / data.count();\n    effectCfg.z = seriesModel.getShallow('z') || 0;\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\n    effectCfg.symbolType = symbolType;\n    effectCfg.color = color;\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\n    if (effectCfg.showEffectOn === 'render') {\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n      this._effectCfg = effectCfg;\n    } else {\n      // Not keep old effect config\n      this._effectCfg = null;\n      this.stopEffectAnimation();\n      this.onHoverStateChange = function (toState) {\n        if (toState === 'emphasis') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.startEffectAnimation(effectCfg);\n          }\n        } else if (toState === 'normal') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.stopEffectAnimation();\n          }\n        }\n      };\n    }\n    this._effectCfg = effectCfg;\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  ;\n  EffectSymbol.prototype.fadeOut = function (cb) {\n    cb && cb();\n  };\n  ;\n  return EffectSymbol;\n}(Group);\nexport default EffectSymbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport EffectSymbol from '../helper/EffectSymbol.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\nvar EffectScatterView = /** @class */function (_super) {\n  __extends(EffectScatterView, _super);\n  function EffectScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = EffectScatterView.type;\n    return _this;\n  }\n  EffectScatterView.prototype.init = function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  };\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data, {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this.group.add(effectSymbolDraw.group);\n  };\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count(),\n        count: data.count()\n      }, data);\n    }\n    this._symbolDraw.updateLayout();\n  };\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  };\n  EffectScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n  };\n  EffectScatterView.type = 'effectScatter';\n  return EffectScatterView;\n}(ChartView);\nexport default EffectScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nvar EffectScatterSeriesModel = /** @class */function (_super) {\n  __extends(EffectScatterSeriesModel, _super);\n  function EffectScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = EffectScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n  EffectScatterSeriesModel.type = 'series.effectScatter';\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\n  EffectScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    clip: true,\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill',\n      // Ripple number\n      number: 3\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10 // symbolSize * 2\n    // symbolRotate: null,  // \n    // itemStyle: {\n    //     opacity: 1\n    // }\n  };\n\n  return EffectScatterSeriesModel;\n}(SeriesModel);\nexport default EffectScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport EffectScatterView from './EffectScatterView.js';\nimport EffectScatterSeriesModel from './EffectScatterSeries.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  registers.registerChartView(EffectScatterView);\n  registers.registerSeriesModel(EffectScatterSeriesModel);\n  registers.registerLayout(layoutPoints('effectScatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Provide effect for line\n */\nimport * as graphic from '../../util/graphic.js';\nimport Line from './Line.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as curveUtil from 'zrender/lib/core/curve.js';\nvar EffectLine = /** @class */function (_super) {\n  __extends(EffectLine, _super);\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n    _this._updateEffectSymbol(lineData, idx);\n    return _this;\n  }\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    }\n    // Symbol may be removed if loop is false\n    if (!symbol) {\n      return;\n    }\n    // Shadow color is same with color in default\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n    if (!symbol) {\n      return;\n    }\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var roundTrip = effectModel.get('roundTrip');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    });\n    // Ignore when updating\n    symbol.ignore = true;\n    this._updateAnimationPoints(symbol, points);\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n    if (period !== this._period || loop !== this._loop || roundTrip !== this._roundTrip) {\n      symbol.stopAnimation();\n      var delayNum = void 0;\n      if (zrUtil.isFunction(delayExpr)) {\n        delayNum = delayExpr(idx);\n      } else {\n        delayNum = delayExpr;\n      }\n      if (symbol.__t > 0) {\n        delayNum = -period * symbol.__t;\n      }\n      this._animateSymbol(symbol, period, delayNum, loop, roundTrip);\n    }\n    this._period = period;\n    this._loop = loop;\n    this._roundTrip = roundTrip;\n  };\n  EffectLine.prototype._animateSymbol = function (symbol, period, delayNum, loop, roundTrip) {\n    if (period > 0) {\n      symbol.__t = 0;\n      var self_1 = this;\n      var animator = symbol.animate('', loop).when(roundTrip ? period * 2 : period, {\n        __t: roundTrip ? 2 : 1\n      }).delay(delayNum).during(function () {\n        self_1._updateSymbolPosition(symbol);\n      });\n      if (!loop) {\n        animator.done(function () {\n          self_1.remove(symbol);\n        });\n      }\n      animator.start();\n    }\n  };\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n    this._updateEffectSymbol(lineData, idx);\n  };\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t);\n    // Tangent\n    var tx = symbol.__t < 1 ? quadraticDerivativeAt(p1[0], cp1[0], p2[0], t) : quadraticDerivativeAt(p2[0], cp1[0], p1[0], 1 - t);\n    var ty = symbol.__t < 1 ? quadraticDerivativeAt(p1[1], cp1[1], p2[1], t) : quadraticDerivativeAt(p2[1], cp1[1], p1[1], 1 - t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05;\n        // make sure the last segment render within endPoint\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n  return EffectLine;\n}(graphic.Group);\nexport default EffectLine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nvar Polyline = /** @class */function (_super) {\n  __extends(Polyline, _super);\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createPolyline(lineData, idx, seriesScope);\n    return _this;\n  }\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    if (!seriesScope || lineData.hasItemOption) {\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n    }\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = emphasisLineStyle;\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  ;\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n  ;\n  return Polyline;\n}(graphic.Group);\nexport default Polyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline.js';\nimport EffectLine from './EffectLine.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar EffectPolyline = /** @class */function (_super) {\n  __extends(EffectPolyline, _super);\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  }\n  // Override\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n    var lastFrame = this._lastFrame;\n    var frame;\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      }\n      // PENDING really need to do this ?\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n      frame = Math.min(frame - 1, len - 2);\n    }\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = symbol.__t < 1 ? p1[0] - p0[0] : p0[0] - p1[0];\n    var ty = symbol.__t < 1 ? p1[1] - p0[1] : p0[1] - p1[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n  ;\n  return EffectPolyline;\n}(EffectLine);\nexport default EffectPolyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport * as lineContain from 'zrender/lib/contain/line.js';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic.js';\nimport { getECData } from '../../util/innerStore.js';\nvar LargeLinesPathShape = /** @class */function () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n  return LargeLinesPathShape;\n}();\nvar LargeLinesPath = /** @class */function (_super) {\n  __extends(LargeLinesPath, _super);\n  function LargeLinesPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeLinesPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var i;\n    if (shape.polyline) {\n      for (i = this._off; i < segs.length;) {\n        var count = segs[i++];\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (i = this._off; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n    if (shape.polyline) {\n      var dataIndex = 0;\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n        dataIndex++;\n      }\n    }\n    return -1;\n  };\n  LargeLinesPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeLinesPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.segs;\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX, minY, maxX, maxY);\n    }\n    return rect;\n  };\n  return LargeLinesPath;\n}(graphic.Path);\nvar LargeLineDraw = /** @class */function () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  LargeLineDraw.prototype.updateData = function (data) {\n    this._clear();\n    var lineEl = this._create();\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n    this._setCommon(lineEl, data);\n  };\n  ;\n  /**\n   * @override\n   */\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n    this._clear();\n  };\n  ;\n  /**\n   * @override\n   */\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lastAdded = this._newAdded[0];\n    var linePoints = data.getLayout('linesPoints');\n    var oldSegs = lastAdded && lastAdded.shape.segs;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldSegs && oldSegs.length < 2e4) {\n      var oldLen = oldSegs.length;\n      var newSegs = new Float32Array(oldLen + linePoints.length);\n      // Concat two array\n      newSegs.set(oldSegs);\n      newSegs.set(linePoints, oldLen);\n      lastAdded.setShape({\n        segs: newSegs\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var lineEl = this._create();\n      lineEl.incremental = true;\n      lineEl.setShape({\n        segs: linePoints\n      });\n      this._setCommon(lineEl, data);\n      lineEl.__startIndex = taskParams.start;\n    }\n  };\n  /**\n   * @override\n   */\n  LargeLineDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeLineDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeLineDraw.prototype._create = function () {\n    var lineEl = new LargeLinesPath({\n      cursor: 'default',\n      ignoreCoarsePointer: true\n    });\n    this._newAdded.push(lineEl);\n    this.group.add(lineEl);\n    return lineEl;\n  };\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n    lineEl.setStyle('fill', null);\n    var ecData = getECData(lineEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    lineEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = lineEl.hoverDataIdx;\n      if (dataIndex > 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + lineEl.__startIndex;\n      }\n    });\n  };\n  ;\n  LargeLineDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  ;\n  return LargeLineDraw;\n}();\nexport default LargeLineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/* global Float32Array */\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { error } from '../../util/log.js';\nvar linesLayout = {\n  seriesType: 'lines',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (!coordSys) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('The lines series must have a coordinate system.');\n      }\n      return;\n    }\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.pipelineContext.large;\n    return {\n      progress: function (params, lineData) {\n        var lineCoords = [];\n        if (isLarge) {\n          var points = void 0;\n          var segCount = params.end - params.start;\n          if (isPolyline) {\n            var totalCoordsCount = 0;\n            for (var i = params.start; i < params.end; i++) {\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\n            }\n            points = new Float32Array(segCount + totalCoordsCount * 2);\n          } else {\n            points = new Float32Array(segCount * 4);\n          }\n          var offset = 0;\n          var pt = [];\n          for (var i = params.start; i < params.end; i++) {\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            if (isPolyline) {\n              points[offset++] = len;\n            }\n            for (var k = 0; k < len; k++) {\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\n              points[offset++] = pt[0];\n              points[offset++] = pt[1];\n            }\n          }\n          lineData.setLayout('linesPoints', points);\n        } else {\n          for (var i = params.start; i < params.end; i++) {\n            var itemModel = lineData.getItemModel(i);\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            var pts = [];\n            if (isPolyline) {\n              for (var j = 0; j < len; j++) {\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\n              }\n            } else {\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\n              if (+curveness) {\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n              }\n            }\n            lineData.setItemLayout(i, pts);\n          }\n        }\n      }\n    };\n  }\n};\nexport default linesLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LineDraw from '../helper/LineDraw.js';\nimport EffectLine from '../helper/EffectLine.js';\nimport Line from '../helper/Line.js';\nimport Polyline from '../helper/Polyline.js';\nimport EffectPolyline from '../helper/EffectPolyline.js';\nimport LargeLineDraw from '../helper/LargeLineDraw.js';\nimport linesLayout from './linesLayout.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport ChartView from '../../view/Chart.js';\nvar LinesView = /** @class */function (_super) {\n  __extends(LinesView, _super);\n  function LinesView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LinesView.type;\n    return _this;\n  }\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\n    var zr = api.getZr();\n    // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n    var isSvg = zr.painter.getType() === 'svg';\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    }\n    // Config layer with motion blur\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n    if (this._showEffect(seriesModel) && trailLength > 0) {\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.warn('SVG render mode doesn\\'t support lines with trail effect');\n      }\n    }\n    lineDraw.updateData(data);\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n    this._lastZlevel = zlevel;\n    this._finished = true;\n  };\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n    lineDraw.incrementalPrepareUpdate(data);\n    this._clearLayer(api);\n    this._finished = false;\n  };\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n  LinesView.prototype.eachRendered = function (cb) {\n    this._lineDraw && this._lineDraw.eachRendered(cb);\n  };\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var pipelineContext = seriesModel.pipelineContext;\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\n      return {\n        update: true\n      };\n    } else {\n      // TODO Use same logic with ScatterView.\n      // Manually update layout\n      var res = linesLayout.reset(seriesModel, ecModel, api);\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n      // Not in large mode\n      this._lineDraw.updateLayout();\n      this._clearLayer(api);\n    }\n  };\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\n    var lineDraw = this._lineDraw;\n    var hasEffect = this._showEffect(seriesModel);\n    var isPolyline = !!seriesModel.get('polyline');\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n    if (process.env.NODE_ENV !== 'production') {\n      if (hasEffect && isLargeDraw) {\n        console.warn('Large lines not support effect');\n      }\n    }\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLargeDraw = isLargeDraw;\n    }\n    this.group.add(lineDraw.group);\n    return lineDraw;\n  };\n  LinesView.prototype._showEffect = function (seriesModel) {\n    return !!seriesModel.get(['effect', 'show']);\n  };\n  LinesView.prototype._clearLayer = function (api) {\n    // Not use motion when dragging or zooming\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n    if (!isSvg && this._lastZlevel != null) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  };\n  LinesView.prototype.remove = function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove();\n    this._lineDraw = null;\n    // Clear motion when lineDraw is removed\n    this._clearLayer(api);\n  };\n  LinesView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  LinesView.type = 'lines';\n  return LinesView;\n}(ChartView);\nexport default LinesView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\nimport SeriesModel from '../../model/Series.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\nvar LinesSeriesModel = /** @class */function (_super) {\n  __extends(LinesSeriesModel, _super);\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || [];\n    // Not using preprocessor because mergeOption may not have series.type\n    compatEc2(option);\n    var result = this._processFlatCoordsArray(option.data);\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n    _super.prototype.init.apply(this, arguments);\n  };\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n      params.data = new Float32Array(result.count);\n    }\n    this.getRawData().appendData(params.data);\n  };\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n    return coords;\n  };\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n      return coords.length;\n    }\n  };\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    }\n    // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n    if (isNumber(data[0])) {\n      var len = data.length;\n      // Store offset and len of each segment\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++];\n        // Offset\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset;\n        // Len\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n      if (!CoordSys) {\n        throw new Error('Unknown coordinate system ' + option.coordinateSystem);\n      }\n    }\n    var lineData = new SeriesData(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n    if (name) {\n      return name;\n    }\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n    return progressive;\n  };\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n    return progressiveThreshold;\n  };\n  LinesSeriesModel.prototype.getZLevelKey = function () {\n    var effectModel = this.getModel('effect');\n    var trailLength = effectModel.get('trailLength');\n    return this.getData().count() > this.getProgressiveThreshold()\n    // Each progressive series has individual key.\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\n  };\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end'\n      // distance: 5,\n      // formatter: Tooltip.formatter\n    },\n\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\nexport default LinesSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nvar linesVisual = {\n  seriesType: 'lines',\n  reset: function (seriesModel) {\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var data = seriesModel.getData();\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n    }\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport default linesVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LinesView from './LinesView.js';\nimport LinesSeriesModel from './LinesSeries.js';\nimport linesLayout from './linesLayout.js';\nimport linesVisual from './linesVisual.js';\nexport function install(registers) {\n  registers.registerChartView(LinesView);\n  registers.registerSeriesModel(LinesSeriesModel);\n  registers.registerLayout(linesLayout);\n  registers.registerVisual(linesVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/* global Uint8ClampedArray */\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar GRADIENT_LEVELS = 256;\nvar HeatmapLayer = /** @class */function () {\n  function HeatmapLayer() {\n    this.blurSize = 30;\n    this.pointSize = 20;\n    this.maxOpacity = 1;\n    this.minOpacity = 0;\n    this._gradientPixels = {\n      inRange: null,\n      outOfRange: null\n    };\n    var canvas = platformApi.createCanvas();\n    this.canvas = canvas;\n  }\n  /**\n   * Renders Heatmap and returns the rendered canvas\n   * @param data array of data, each has x, y, value\n   * @param width canvas width\n   * @param height canvas height\n   */\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2];\n      // calculate alpha using value\n      var alpha = normalize(value);\n      // draw with the circle brush with alpha\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    }\n    // colorize the canvas using alpha value and set with gradient\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4;\n      // Simple optimize to ignore the empty data\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange;\n        // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  /**\n   * get canvas of a black circle brush used for canvas to draw later\n   */\n  HeatmapLayer.prototype._getBrush = function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = platformApi.createCanvas());\n    // set brush size\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d);\n    // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize;\n    // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n    ctx.shadowColor = '#000';\n    // draw circle in the left to the canvas\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  };\n  /**\n   * get gradient color map\n   * @private\n   */\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n    return pixelsSingleState;\n  };\n  return HeatmapLayer;\n}();\nexport default HeatmapLayer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport HeatmapLayer from './HeatmapLayer.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    var i;\n    // Try to find in the location of the last found\n    for (i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n    if (i === len) {\n      // Not found, back interation\n      for (i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n    return i >= 0 && i < len && selected[i];\n  };\n}\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions;\n  // Not use coordSys.type === 'geo' because coordSys maybe extended\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\nvar HeatmapView = /** @class */function (_super) {\n  __extends(HeatmapView, _super);\n  function HeatmapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = HeatmapView.type;\n    return _this;\n  }\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n    if (process.env.NODE_ENV !== 'production') {\n      if (!visualMapOfThisSeries) {\n        throw new Error('Heatmap must use with visualMap');\n      }\n    }\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this.group.removeAll();\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  };\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  };\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys) {\n      // geo does not support incremental rendering?\n      if (isGeoCoordSys(coordSys)) {\n        this.render(seriesModel, ecModel, api);\n      } else {\n        this._progressiveEls = [];\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n      }\n    }\n  };\n  HeatmapView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isCartesian2d = isCoordinateSystemType(coordSys, 'cartesian2d');\n    var width;\n    var height;\n    var xAxisExtent;\n    var yAxisExtent;\n    if (isCartesian2d) {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      if (process.env.NODE_ENV !== 'production') {\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\n          throw new Error('Heatmap on cartesian must have two category axes');\n        }\n        if (!(xAxis.onBand && yAxis.onBand)) {\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\n        }\n      }\n      // add 0.5px to avoid the gaps\n      width = xAxis.getBandWidth() + .5;\n      height = yAxis.getBandWidth() + .5;\n      xAxisExtent = xAxis.scale.getExtent();\n      yAxisExtent = yAxis.scale.getExtent();\n    }\n    var group = this.group;\n    var data = seriesModel.getData();\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\n    var borderRadius = seriesModel.get(['itemStyle', 'borderRadius']);\n    var labelStatesModels = getLabelStatesModels(seriesModel);\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    var dataDims = isCartesian2d ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n    for (var idx = start; idx < end; idx++) {\n      var rect = void 0;\n      var style = data.getItemVisual(idx, 'style');\n      if (isCartesian2d) {\n        var dataDimX = data.get(dataDims[0], idx);\n        var dataDimY = data.get(dataDims[1], idx);\n        // Ignore empty data and out of extent data\n        if (isNaN(data.get(dataDims[2], idx)) || isNaN(dataDimX) || isNaN(dataDimY) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\n          continue;\n        }\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\n        rect = new graphic.Rect({\n          shape: {\n            x: point[0] - width / 2,\n            y: point[1] - height / 2,\n            width: width,\n            height: height\n          },\n          style: style\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: style\n        });\n      }\n      // Optimization for large dataset\n      if (data.hasItemOption) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel_1 = itemModel.getModel('emphasis');\n        emphasisStyle = emphasisModel_1.getModel('itemStyle').getItemStyle();\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n        // Each item value struct in the data would be firstly\n        // {\n        //     itemStyle: { borderRadius: [30, 30] },\n        //     value: [2022, 02, 22]\n        // }\n        borderRadius = itemModel.get(['itemStyle', 'borderRadius']);\n        focus = emphasisModel_1.get('focus');\n        blurScope = emphasisModel_1.get('blurScope');\n        emphasisDisabled = emphasisModel_1.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n      }\n      rect.shape.r = borderRadius;\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2] + '';\n      }\n      setLabelStyle(rect, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultOpacity: style.opacity,\n        defaultText: defaultText\n      });\n      rect.ensureState('emphasis').style = emphasisStyle;\n      rect.ensureState('blur').style = blurStyle;\n      rect.ensureState('select').style = selectStyle;\n      toggleHoverEmphasis(rect, focus, blurScope, emphasisDisabled);\n      rect.incremental = incremental;\n      // PENDING\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.states.emphasis.hoverLayer = true;\n      }\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n      if (this._progressiveEls) {\n        this._progressiveEls.push(rect);\n      }\n    }\n  };\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange;\n    // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform);\n    // Clamp on viewport\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  };\n  HeatmapView.type = 'heatmap';\n  return HeatmapView;\n}(ChartView);\nexport default HeatmapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nvar HeatmapSeriesModel = /** @class */function (_super) {\n  __extends(HeatmapSeriesModel, _super);\n  function HeatmapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = HeatmapSeriesModel.type;\n    return _this;\n  }\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      generateCoord: 'value'\n    });\n  };\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  };\n  HeatmapSeriesModel.type = 'series.heatmap';\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\n  HeatmapSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return HeatmapSeriesModel;\n}(SeriesModel);\nexport default HeatmapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport HeatmapView from './HeatmapView.js';\nimport HeatmapSeriesModel from './HeatmapSeries.js';\nexport function install(registers) {\n  registers.registerChartView(HeatmapView);\n  registers.registerSeriesModel(HeatmapSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport { parsePercent, isNumeric } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth'];\n// index: +isHorizontal\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\nvar PictorialBarView = /** @class */function (_super) {\n  __extends(PictorialBarView, _super);\n  function PictorialBarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PictorialBarView.type;\n    return _this;\n  }\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var coordSysRect = cartesian.master.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta;\n      // Add back\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    // Do clipping\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n    return this.group;\n  };\n  PictorialBarView.prototype.remove = function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  };\n  PictorialBarView.type = 'pictorialBar';\n  return PictorialBarView;\n}(ChartView);\n// Set or calculate default value about symbol, and calculate layout info.\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    style: data.getItemVisual(dataIndex, 'style'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = normalizeSymbolOffset(itemModel.get('symbolOffset'), symbolSize);\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n}\n// bar length can be negative.\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n  outputSymbolMeta.boundingLength = boundingLength;\n  if (symbolRepeat) {\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\n  }\n  // if 'pxSign' means sign of pixel,  it can't be zero, or symbolScale will be zero\n  // and when borderWidth be settled, the actual linewidth will be NaN\n  outputSymbolMeta.pxSign = boundingLength > 0 ? 1 : -1;\n}\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n}\n// Support ['100%', '100%']\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n  var parsedSymbolSize;\n  if (zrUtil.isArray(symbolSize)) {\n    parsedSymbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      // will parse to number below\n      parsedSymbolSize = ['100%', '100%'];\n    } else {\n      parsedSymbolSize = [symbolSize, symbolSize];\n    }\n  }\n  // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  outputSymbolMeta.symbolSize = parsedSymbolSize;\n  // If x or y is less than zero, show reversed shape.\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize];\n  // Follow convention, 'right' and 'top' is the normal scale.\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scaleX: symbolScale[0],\n      scaleY: symbolScale[1],\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n  outputSymbolMeta.valueLineWidth = valueLineWidth || 0;\n}\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = outputSymbolMeta.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength;\n  // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0);\n    // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2;\n    // Both final repeatTimes and final symbolMarginNumeric area calculated based on\n    // boundingLength.\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin);\n    // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : Math.max(repeatTimes - 1, 1));\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2;\n    // Update repeatTimes when not all symbol will be shown.\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    outputSymbolMeta.repeatTimes = repeatTimes;\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\n  }\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = outputSymbolMeta.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = outputSymbolMeta.clipShape = {};\n  // Consider that symbol may be overflow layout rect.\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol(\n  // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scaleX: 0,\n        scaleY: 0\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    }\n    // updateHoverAnimation(path, symbolMeta);\n    index++;\n  });\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      x: target.x,\n      y: target.y,\n      scaleX: 0,\n      scaleY: 0\n    }, {\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate);\n  }\n  function makeTarget(index) {\n    var position = pathPosition.slice();\n    // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      x: position[0],\n      y: position[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    };\n  }\n}\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: 0,\n      scaleY: 0,\n      rotation: symbolMeta.rotation\n    }, {\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1]\n    }, symbolMeta, isUpdate);\n  } else {\n    updateAttr(mainPath, null, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n}\n// bar rect is used for label.\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    barRect.disableMorphing = true;\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n      bar.__pictorialBundle.setClipPath(clipPath);\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group();\n  // bundle is used for location and clip.\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.x = symbolMeta.bundlePosition[0];\n  bundle.y = symbolMeta.bundlePosition[1];\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    x: symbolMeta.bundlePosition[0],\n    y: symbolMeta.bundlePosition[1]\n  }, animationModel, dataIndex);\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && labelRect.removeTextContent();\n  var paths = [];\n  eachPath(bar, function (path) {\n    paths.push(path);\n  });\n  bar.__pictorialMainPath && paths.push(bar.__pictorialMainPath);\n  // I do not find proper remove animation for clip yet.\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(paths, function (path) {\n    graphic.removeElement(path, {\n      scaleX: 0,\n      scaleY: 0\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs);\n  // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\nfunction updateCommon(bar, opt, symbolMeta) {\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel;\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var emphasisModel = itemModel.getModel('emphasis');\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var hoverScale = emphasisModel.get('scale');\n  eachPath(bar, function (path) {\n    if (path instanceof ZRImage) {\n      var pathStyle = path.style;\n      path.useStyle(zrUtil.extend({\n        // TODO other properties like dx, dy ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolMeta.style));\n    } else {\n      path.useStyle(symbolMeta.style);\n    }\n    var emphasisState = path.ensureState('emphasis');\n    emphasisState.style = emphasisStyle;\n    if (hoverScale) {\n      // NOTE: Must after scale is set after updateAttr\n      emphasisState.scaleX = path.scaleX * 1.1;\n      emphasisState.scaleY = path.scaleY * 1.1;\n    }\n    path.ensureState('blur').style = blurStyle;\n    path.ensureState('select').style = selectStyle;\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  barRect.ignoreClip = true;\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\n    labelFetcher: opt.seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\n    inheritColor: symbolMeta.style.fill,\n    defaultOpacity: symbolMeta.style.opacity,\n    defaultOutsidePosition: barPositionOutside\n  });\n  toggleHoverEmphasis(bar, focus, blurScope, emphasisModel.get('disabled'));\n}\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times);\n  // Escapse accurate error\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\nexport default PictorialBarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PictorialBarSeriesModel = /** @class */function (_super) {\n  __extends(PictorialBarSeriesModel, _super);\n  function PictorialBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PictorialBarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    _this.defaultSymbol = 'roundRect';\n    return _this;\n  }\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\n    // Disable stack.\n    option.stack = null;\n    return _super.prototype.getInitialData.apply(this, arguments);\n  };\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\n  PictorialBarSeriesModel.dependencies = ['grid'];\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    symbol: 'circle',\n    symbolSize: null,\n    symbolRotate: null,\n    symbolPosition: null,\n    symbolOffset: null,\n    symbolMargin: null,\n    symbolRepeat: false,\n    symbolRepeatDirection: 'end',\n    symbolClip: false,\n    symbolBoundingData: null,\n    symbolPatternSize: 400,\n    barGap: '-100%',\n    // Pictorial bar do not clip by default because in many cases\n    // xAxis and yAxis are not displayed and it's expected not to clip\n    clip: false,\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    emphasis: {\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\n      // for the case that both has foreground and background.\n      scale: false\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  });\n  return PictorialBarSeriesModel;\n}(BaseBarSeriesModel);\nexport default PictorialBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PictorialBarView from './PictorialBarView.js';\nimport PictorialBarSeriesModel from './PictorialBarSeries.js';\nimport { createProgressiveLayout, layout } from '../../layout/barGrid.js';\nimport { curry } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerChartView(PictorialBarView);\n  registers.registerSeriesModel(PictorialBarSeriesModel);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'pictorialBar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('pictorialBar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar ThemeRiverView = /** @class */function (_super) {\n  __extends(ThemeRiverView, _super);\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n    function keyGetter(item) {\n      return item.name;\n    }\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle'\n          // align: 'right'\n        }\n      });\n\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent();\n      // TODO More label position options.\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n;\n// add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default ThemeRiverView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar DATA_NAME_INDEX = 2;\nvar ThemeRiverSeriesModel = /** @class */function (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments);\n    // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\n     * Make sure every layer data get the same keys.\n     * The value index tells which layer has visited.\n     * {\n     *  2014/01/01: -1\n     * }\n     */\n    var timeValueKeys = {};\n    // grouped data by name\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n    return data;\n  };\n  /**\n   * @override\n   * @param  option  the initial option that user gave\n   * @param  ecModel  the model object for themeRiver option\n   */\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type');\n    // filter the data item with the value of label is undefined\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    });\n    // ??? TODO design a stage to transfer data for themeRiver and lines?\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   */\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n    var timeDim = data.mapDimension('single');\n    // data group by name\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\n   * Get data indices for show tooltip content\n   */\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n      indices.push(nearestIdx);\n    }\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\nexport default ThemeRiverSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {};\n    // use the axis boundingRect for view\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param data  data in the series\n * @param seriesModel  the model object of themeRiver series\n * @param height  value used to compute every series height\n */\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n  var coordSys = seriesModel.coordinateSystem;\n  // the data in each layer are organized into a series.\n  var layerSeries = seriesModel.getLayerSeries();\n  // the points in each layer.\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max;\n  // set layout information for each item.\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  data  the points in each layer\n */\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n    if (temp > max) {\n      max = temp;\n    }\n    sums.push(temp);\n  }\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n  max = 0;\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n    if (sum > max) {\n      max = sum;\n    }\n  }\n  return {\n    y0: y0,\n    max: max\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView.js';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\nimport themeRiverLayout from './themeRiverLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nimport { isRadianAroundZero } from '../../util/number.js';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\n * Sunburstce of Sunburst including Sector, Label, LabelLine\n */\nvar SunburstPiece = /** @class */function (_super) {\n  __extends(SunburstPiece, _super);\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n    _this.setTextContent(text);\n    _this.updateData(true, node, seriesModel, ecModel, api);\n    return _this;\n  }\n  SunburstPiece.prototype.updateData = function (firstCreate, node,\n  // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle();\n      // border radius\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n      saveOldStyle(sector);\n    }\n    sector.useStyle(normalStyle);\n    this._updateLabel(seriesModel);\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    toggleHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown;\n    // TODO use setLabelStyle\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n      if (text) {\n        state.style.text = text;\n      }\n      // Not displaying text when angle is too small\n      var isShown = labelStateModel.get('show');\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var flipStartAngle = Math.PI * 0.5;\n      var flipEndAngle = Math.PI * 1.5;\n      var midAngleNormal = normalizeRadian(rotateType === 'tangential' ? Math.PI / 2 - midAngle : midAngle);\n      // For text that is up-side down, rotate 180 degrees to make sure\n      // it's readable\n      var needsFlip = midAngleNormal > flipStartAngle && !isRadianAroundZero(midAngleNormal - flipStartAngle) && midAngleNormal < flipEndAngle;\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = needsFlip ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          // Put label in the center if it's a circle\n          if (angle === 2 * Math.PI && layout.r0 === 0) {\n            r = 0;\n          } else {\n            r = (layout.r + layout.r0) / 2;\n          }\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n          textAlign = needsFlip ? 'right' : 'left';\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n          textAlign = needsFlip ? 'left' : 'right';\n        }\n      }\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotate = 0;\n      if (rotateType === 'radial') {\n        rotate = normalizeRadian(-midAngle) + (needsFlip ? Math.PI : 0);\n      } else if (rotateType === 'tangential') {\n        rotate = normalizeRadian(Math.PI / 2 - midAngle) + (needsFlip ? Math.PI : 0);\n      } else if (zrUtil.isNumber(rotateType)) {\n        rotate = rotateType * Math.PI / 180;\n      }\n      state.rotation = normalizeRadian(rotate);\n    });\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n      return stateAttr;\n    }\n    label.dirtyStyle();\n  };\n  return SunburstPiece;\n}(graphic.Sector);\nexport default SunburstPiece;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog } from '../../util/log.js';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper.js';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstHighlight', 'highlight');\n    }\n    // Fast forward action\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstUnhighlight', 'downplay');\n    }\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport SunburstPiece from './SunburstPiece.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction.js';\nimport { windowOpen } from '../../util/format.js';\nvar SunburstView = /** @class */function (_super) {\n  __extends(SunburstView, _super);\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SunburstView.type;\n    return _this;\n  }\n  SunburstView.prototype.render = function (seriesModel, ecModel, api,\n  // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n    this._initEvents();\n    this._oldChildren = newChildren;\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n      function getKey(node) {\n        return node.getId();\n      }\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api);\n            // For tooltip\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece);\n          // For tooltip\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        }\n        // TODO event scope\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n      var viewRoot = _this.seriesModel.getViewRoot();\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\n   * @private\n   */\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\n   * @implement\n   */\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\nexport default SunburstView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport Model from '../../model/Model.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\nvar SunburstSeriesModel = /** @class */function (_super) {\n  __extends(SunburstSeriesModel, _super);\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this);\n    // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n    return tree.data;\n  };\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\n   * @override\n   */\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\n    return this._levelModels && this._levelModels[node.depth];\n  };\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    // 0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outer\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type can be expansion, scale.\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n    /**\n     * Sort order.\n     *\n     * Valid values: 'desc', 'asc', null, or callback function.\n     * 'desc' and 'asc' for descend and ascendant order;\n     * null for not sorting;\n     * example of callback function:\n     * function(nodeA, nodeB) {\n     *     return nodeA.getValue() - nodeB.getValue();\n     * }\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    // TODO First value of array must be a number\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n  // Value should not less than 0.\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\nexport default SunburstSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent } from '../../util/number.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// let PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue();\n    // Sum may be 0\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum');\n    // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n    var dir = clockwise ? 1 : -1;\n    /**\n     * Render a tree\n     * @return increased angle\n     */\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n      var endAngle = startAngle;\n      // Render self\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n        if (angle < minAngle) {\n          angle = minAngle;\n          // restAngle -= minAngle;\n        }\n        // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var levelModel = seriesModel.getLevelModel(node);\n        if (levelModel) {\n          var r0_1 = levelModel.get('r0', true);\n          var r_1 = levelModel.get('r', true);\n          var radius_1 = levelModel.get('radius', true);\n          if (radius_1 != null) {\n            r0_1 = radius_1[0];\n            r_1 = radius_1[1];\n          }\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\n        }\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      }\n      // Render children\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n      return endAngle - startAngle;\n    };\n    // Virtual root node for roll up\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\n * Init node children by order and update visual\n */\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder);\n  // Init children recursively\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\n * Sort children nodes\n *\n * @param {TreeNode[]}               children children of node to be sorted\n * @param {string | function | null} sort sort method\n *                                   See SunburstSeries.js for details.\n */\nfunction sort(children, sortOrder) {\n  if (zrUtil.isFunction(sortOrder)) {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function () {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { lift } from 'zrender/lib/tool/color.js';\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {};\n  // Default color strategy\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n    if (node.depth > 1 && isString(color)) {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n    return color;\n  }\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SunburstView from './SunburstView.js';\nimport SunburstSeriesModel from './SunburstSeries.js';\nimport sunburstLayout from './sunburstLayout.js';\nimport sunburstVisual from './sunburstVisual.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport { installSunburstAction } from './sunburstAction.js';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { makeInner } from '../../util/model.js';\nimport SeriesModel from '../../model/Series.js';\n// Also compat with ec4, where\n// `visual('color') visual('borderColor')` is supported.\nexport var STYLE_VISUAL_TYPE = {\n  color: 'fill',\n  borderColor: 'stroke'\n};\nexport var NON_STYLE_VISUAL_PROPS = {\n  symbol: 1,\n  symbolSize: 1,\n  symbolKeepAspect: 1,\n  legendIcon: 1,\n  visualMeta: 1,\n  liftZ: 1,\n  decal: 1\n};\n;\nexport var customInnerStore = makeInner();\nvar CustomSeriesModel = /** @class */function (_super) {\n  __extends(CustomSeriesModel, _super);\n  function CustomSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CustomSeriesModel.type;\n    return _this;\n  }\n  CustomSeriesModel.prototype.optionUpdated = function () {\n    this.currentZLevel = this.get('zlevel', true);\n    this.currentZ = this.get('z', true);\n  };\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this);\n  };\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n    el && (params.info = customInnerStore(el).info);\n    return params;\n  };\n  CustomSeriesModel.type = 'series.custom';\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  CustomSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    clip: false\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n  };\n\n  return CustomSeriesModel;\n}(SeriesModel);\nexport default CustomSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\n    var axis = this.getAxis(dim);\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n  }, this);\n}\nexport default function cartesianPrepareCustom(coordSys) {\n  var rect = coordSys.master.getRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'cartesian2d',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\nexport default function geoPrepareCustom(coordSys) {\n  var rect = coordSys.getBoundingRect();\n  return {\n    coordSys: {\n      type: 'geo',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      zoom: coordSys.getZoom()\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" and noRoam param,\n        // Compatible with this usage:\n        // echarts.util.map(item.points, api.coord)\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { bind } from 'zrender/lib/core/util.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  var axis = this.getAxis();\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n}\nexport default function singlePrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  return {\n    coordSys: {\n      type: 'singleAxis',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (val) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(val);\n      },\n      size: bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// import AngleAxis from './AngleAxis.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\n    var getterName = 'get' + dim + 'Axis';\n    // TODO: TYPE Check Angle Axis\n    var axis = this[getterName]();\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n    if (dim === 'Angle') {\n      result = result * Math.PI / 180;\n    }\n    return result;\n  }, this);\n}\nexport default function polarPrepareCustom(coordSys) {\n  var radiusAxis = coordSys.getRadiusAxis();\n  var angleAxis = coordSys.getAngleAxis();\n  var radius = radiusAxis.getExtent();\n  radius[0] > radius[1] && radius.reverse();\n  return {\n    coordSys: {\n      type: 'polar',\n      cx: coordSys.cx,\n      cy: coordSys.cy,\n      r: radius[1],\n      r0: radius[0]\n    },\n    api: {\n      coord: function (data) {\n        var radius = radiusAxis.dataToRadius(data[0]);\n        var angle = angleAxis.dataToAngle(data[1]);\n        var coord = coordSys.coordToPoint([radius, angle]);\n        coord.push(radius, angle * Math.PI / 180);\n        return coord;\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function calendarPrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  var rangeInfo = coordSys.getRangeInfo();\n  return {\n    coordSys: {\n      type: 'calendar',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      cellWidth: coordSys.getCellWidth(),\n      cellHeight: coordSys.getCellHeight(),\n      rangeInfo: {\n        start: rangeInfo.start,\n        end: rangeInfo.end,\n        weeks: rangeInfo.weeks,\n        dayCount: rangeInfo.allDay\n      }\n    },\n    api: {\n      coord: function (data, clamp) {\n        return coordSys.dataToPoint(data, clamp);\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, hasOwn } from 'zrender/lib/core/util.js';\nvar deprecatedLogs = {};\n/**\n * Whether need to call `convertEC4CompatibleStyle`.\n */\nexport function isEC4CompatibleStyle(style, elType, hasOwnTextContentOption, hasOwnTextConfig) {\n  // Since echarts5, `RectText` is separated from its host element and style.text\n  // does not exist any more. The compat work brings some extra burden on performance.\n  // So we provide:\n  // `legacy: true` force make compat.\n  // `legacy: false`, force do not compat.\n  // `legacy` not set: auto detect whether legacy.\n  //     But in this case we do not compat (difficult to detect and rare case):\n  //     Becuse custom series and graphic component support \"merge\", users may firstly\n  //     only set `textStrokeWidth` style or secondly only set `text`.\n  return style && (style.legacy || style.legacy !== false && !hasOwnTextContentOption && !hasOwnTextConfig && elType !== 'tspan'\n  // Difficult to detect whether legacy for a \"text\" el.\n  && (elType === 'text' || hasOwn(style, 'text')));\n}\n/**\n * `EC4CompatibleStyle` is style that might be in echarts4 format or echarts5 format.\n * @param hostStyle The properties might be modified.\n * @return If be text el, `textContentStyle` and `textConfig` will not be returned.\n *         Otherwise a `textContentStyle` and `textConfig` will be created, whose props area\n *         retried from the `hostStyle`.\n */\nexport function convertFromEC4CompatibleStyle(hostStyle, elType, isNormal) {\n  var srcStyle = hostStyle;\n  var textConfig;\n  var textContent;\n  var textContentStyle;\n  if (elType === 'text') {\n    textContentStyle = srcStyle;\n  } else {\n    textContentStyle = {};\n    hasOwn(srcStyle, 'text') && (textContentStyle.text = srcStyle.text);\n    hasOwn(srcStyle, 'rich') && (textContentStyle.rich = srcStyle.rich);\n    hasOwn(srcStyle, 'textFill') && (textContentStyle.fill = srcStyle.textFill);\n    hasOwn(srcStyle, 'textStroke') && (textContentStyle.stroke = srcStyle.textStroke);\n    hasOwn(srcStyle, 'fontFamily') && (textContentStyle.fontFamily = srcStyle.fontFamily);\n    hasOwn(srcStyle, 'fontSize') && (textContentStyle.fontSize = srcStyle.fontSize);\n    hasOwn(srcStyle, 'fontStyle') && (textContentStyle.fontStyle = srcStyle.fontStyle);\n    hasOwn(srcStyle, 'fontWeight') && (textContentStyle.fontWeight = srcStyle.fontWeight);\n    textContent = {\n      type: 'text',\n      style: textContentStyle,\n      // ec4 does not support rectText trigger.\n      // And when text position is different in normal and emphasis\n      // => hover text trigger emphasis;\n      // => text position changed, leave mouse pointer immediately;\n      // That might cause incorrect state.\n      silent: true\n    };\n    textConfig = {};\n    var hasOwnPos = hasOwn(srcStyle, 'textPosition');\n    if (isNormal) {\n      textConfig.position = hasOwnPos ? srcStyle.textPosition : 'inside';\n    } else {\n      hasOwnPos && (textConfig.position = srcStyle.textPosition);\n    }\n    hasOwn(srcStyle, 'textPosition') && (textConfig.position = srcStyle.textPosition);\n    hasOwn(srcStyle, 'textOffset') && (textConfig.offset = srcStyle.textOffset);\n    hasOwn(srcStyle, 'textRotation') && (textConfig.rotation = srcStyle.textRotation);\n    hasOwn(srcStyle, 'textDistance') && (textConfig.distance = srcStyle.textDistance);\n  }\n  convertEC4CompatibleRichItem(textContentStyle, hostStyle);\n  each(textContentStyle.rich, function (richItem) {\n    convertEC4CompatibleRichItem(richItem, richItem);\n  });\n  return {\n    textConfig: textConfig,\n    textContent: textContent\n  };\n}\n/**\n * The result will be set to `out`.\n */\nfunction convertEC4CompatibleRichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n  // (1) For simplicity, make textXXX properties (deprecated since ec5) has\n  // higher priority. For example, consider in ec4 `borderColor: 5, textBorderColor: 10`\n  // on a rect means `borderColor: 4` on the rect and `borderColor: 10` on an attached\n  // richText in ec5.\n  // (2) `out === richItem` if and only if `out` is text el or rich item.\n  // So we can overwrite existing props in `out` since textXXX has higher priority.\n  richItem.font = richItem.textFont || richItem.font;\n  hasOwn(richItem, 'textStrokeWidth') && (out.lineWidth = richItem.textStrokeWidth);\n  hasOwn(richItem, 'textAlign') && (out.align = richItem.textAlign);\n  hasOwn(richItem, 'textVerticalAlign') && (out.verticalAlign = richItem.textVerticalAlign);\n  hasOwn(richItem, 'textLineHeight') && (out.lineHeight = richItem.textLineHeight);\n  hasOwn(richItem, 'textWidth') && (out.width = richItem.textWidth);\n  hasOwn(richItem, 'textHeight') && (out.height = richItem.textHeight);\n  hasOwn(richItem, 'textBackgroundColor') && (out.backgroundColor = richItem.textBackgroundColor);\n  hasOwn(richItem, 'textPadding') && (out.padding = richItem.textPadding);\n  hasOwn(richItem, 'textBorderColor') && (out.borderColor = richItem.textBorderColor);\n  hasOwn(richItem, 'textBorderWidth') && (out.borderWidth = richItem.textBorderWidth);\n  hasOwn(richItem, 'textBorderRadius') && (out.borderRadius = richItem.textBorderRadius);\n  hasOwn(richItem, 'textBoxShadowColor') && (out.shadowColor = richItem.textBoxShadowColor);\n  hasOwn(richItem, 'textBoxShadowBlur') && (out.shadowBlur = richItem.textBoxShadowBlur);\n  hasOwn(richItem, 'textBoxShadowOffsetX') && (out.shadowOffsetX = richItem.textBoxShadowOffsetX);\n  hasOwn(richItem, 'textBoxShadowOffsetY') && (out.shadowOffsetY = richItem.textBoxShadowOffsetY);\n}\n/**\n * Convert to pure echarts4 format style.\n * `itemStyle` will be modified, added with ec4 style properties from\n * `textStyle` and `textConfig`.\n *\n * [Caveat]: For simplicity, `insideRollback` in ec4 does not compat, where\n * `styleEmphasis: {textFill: 'red'}` will remove the normal auto added stroke.\n */\nexport function convertToEC4StyleForCustomSerise(itemStl, txStl, txCfg) {\n  var out = itemStl;\n  // See `custom.ts`, a trick to set extra `textPosition` firstly.\n  out.textPosition = out.textPosition || txCfg.position || 'inside';\n  txCfg.offset != null && (out.textOffset = txCfg.offset);\n  txCfg.rotation != null && (out.textRotation = txCfg.rotation);\n  txCfg.distance != null && (out.textDistance = txCfg.distance);\n  var isInside = out.textPosition.indexOf('inside') >= 0;\n  var hostFill = itemStl.fill || '#000';\n  convertToEC4RichItem(out, txStl);\n  var textFillNotSet = out.textFill == null;\n  if (isInside) {\n    if (textFillNotSet) {\n      out.textFill = txCfg.insideFill || '#fff';\n      !out.textStroke && txCfg.insideStroke && (out.textStroke = txCfg.insideStroke);\n      !out.textStroke && (out.textStroke = hostFill);\n      out.textStrokeWidth == null && (out.textStrokeWidth = 2);\n    }\n  } else {\n    if (textFillNotSet) {\n      out.textFill = itemStl.fill || txCfg.outsideFill || '#000';\n    }\n    !out.textStroke && txCfg.outsideStroke && (out.textStroke = txCfg.outsideStroke);\n  }\n  out.text = txStl.text;\n  out.rich = txStl.rich;\n  each(txStl.rich, function (richItem) {\n    convertToEC4RichItem(richItem, richItem);\n  });\n  return out;\n}\nfunction convertToEC4RichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n  hasOwn(richItem, 'fill') && (out.textFill = richItem.fill);\n  hasOwn(richItem, 'stroke') && (out.textStroke = richItem.fill);\n  hasOwn(richItem, 'lineWidth') && (out.textStrokeWidth = richItem.lineWidth);\n  hasOwn(richItem, 'font') && (out.font = richItem.font);\n  hasOwn(richItem, 'fontStyle') && (out.fontStyle = richItem.fontStyle);\n  hasOwn(richItem, 'fontWeight') && (out.fontWeight = richItem.fontWeight);\n  hasOwn(richItem, 'fontSize') && (out.fontSize = richItem.fontSize);\n  hasOwn(richItem, 'fontFamily') && (out.fontFamily = richItem.fontFamily);\n  hasOwn(richItem, 'align') && (out.textAlign = richItem.align);\n  hasOwn(richItem, 'verticalAlign') && (out.textVerticalAlign = richItem.verticalAlign);\n  hasOwn(richItem, 'lineHeight') && (out.textLineHeight = richItem.lineHeight);\n  hasOwn(richItem, 'width') && (out.textWidth = richItem.width);\n  hasOwn(richItem, 'height') && (out.textHeight = richItem.height);\n  hasOwn(richItem, 'backgroundColor') && (out.textBackgroundColor = richItem.backgroundColor);\n  hasOwn(richItem, 'padding') && (out.textPadding = richItem.padding);\n  hasOwn(richItem, 'borderColor') && (out.textBorderColor = richItem.borderColor);\n  hasOwn(richItem, 'borderWidth') && (out.textBorderWidth = richItem.borderWidth);\n  hasOwn(richItem, 'borderRadius') && (out.textBorderRadius = richItem.borderRadius);\n  hasOwn(richItem, 'shadowColor') && (out.textBoxShadowColor = richItem.shadowColor);\n  hasOwn(richItem, 'shadowBlur') && (out.textBoxShadowBlur = richItem.shadowBlur);\n  hasOwn(richItem, 'shadowOffsetX') && (out.textBoxShadowOffsetX = richItem.shadowOffsetX);\n  hasOwn(richItem, 'shadowOffsetY') && (out.textBoxShadowOffsetY = richItem.shadowOffsetY);\n  hasOwn(richItem, 'textShadowColor') && (out.textShadowColor = richItem.textShadowColor);\n  hasOwn(richItem, 'textShadowBlur') && (out.textShadowBlur = richItem.textShadowBlur);\n  hasOwn(richItem, 'textShadowOffsetX') && (out.textShadowOffsetX = richItem.textShadowOffsetX);\n  hasOwn(richItem, 'textShadowOffsetY') && (out.textShadowOffsetY = richItem.textShadowOffsetY);\n}\nexport function warnDeprecated(deprecated, insteadApproach) {\n  if (process.env.NODE_ENV !== 'production') {\n    var key = deprecated + '^_^' + insteadApproach;\n    if (!deprecatedLogs[key]) {\n      console.warn(\"[ECharts] DEPRECATED: \\\"\" + deprecated + \"\\\" has been deprecated. \" + insteadApproach);\n      deprecatedLogs[key] = true;\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { assert, bind, each, eqNaN, extend, hasOwn, indexOf, isArrayLike, keys, reduce } from 'zrender/lib/core/util.js';\nimport { cloneValue } from 'zrender/lib/animation/Animator.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { Path } from '../util/graphic.js';\nimport { warn } from '../util/log.js';\nimport { TRANSFORMABLE_PROPS } from 'zrender/lib/core/Transformable.js';\nvar LEGACY_TRANSFORM_PROPS_MAP = {\n  position: ['x', 'y'],\n  scale: ['scaleX', 'scaleY'],\n  origin: ['originX', 'originY']\n};\nvar LEGACY_TRANSFORM_PROPS = keys(LEGACY_TRANSFORM_PROPS_MAP);\nvar TRANSFORM_PROPS_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n  obj[key] = 1;\n  return obj;\n}, {});\nvar transformPropNamesStr = TRANSFORMABLE_PROPS.join(', ');\n// '' means root\nexport var ELEMENT_ANIMATABLE_PROPS = ['', 'style', 'shape', 'extra'];\n;\nvar transitionInnerStore = makeInner();\n;\nfunction getElementAnimationConfig(animationType, el, elOption, parentModel, dataIndex) {\n  var animationProp = animationType + \"Animation\";\n  var config = getAnimationConfig(animationType, parentModel, dataIndex) || {};\n  var userDuring = transitionInnerStore(el).userDuring;\n  // Only set when duration is > 0 and it's need to be animated.\n  if (config.duration > 0) {\n    // For simplicity, if during not specified, the previous during will not work any more.\n    config.during = userDuring ? bind(duringCall, {\n      el: el,\n      userDuring: userDuring\n    }) : null;\n    config.setToFinal = true;\n    config.scope = animationType;\n  }\n  extend(config, elOption[animationProp]);\n  return config;\n}\nexport function applyUpdateTransition(el, elOption, animatableModel, opts) {\n  opts = opts || {};\n  var dataIndex = opts.dataIndex,\n    isInit = opts.isInit,\n    clearStyle = opts.clearStyle;\n  var hasAnimation = animatableModel.isAnimationEnabled();\n  // Save the meta info for further morphing. Like apply on the sub morphing elements.\n  var store = transitionInnerStore(el);\n  var styleOpt = elOption.style;\n  store.userDuring = elOption.during;\n  var transFromProps = {};\n  var propsToSet = {};\n  prepareTransformAllPropsFinal(el, elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('shape', elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('extra', elOption, propsToSet);\n  if (!isInit && hasAnimation) {\n    prepareTransformTransitionFrom(el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('shape', el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('extra', el, elOption, transFromProps);\n    prepareStyleTransitionFrom(el, elOption, styleOpt, transFromProps);\n  }\n  propsToSet.style = styleOpt;\n  applyPropsDirectly(el, propsToSet, clearStyle);\n  applyMiscProps(el, elOption);\n  if (hasAnimation) {\n    if (isInit) {\n      var enterFromProps_1 = {};\n      each(ELEMENT_ANIMATABLE_PROPS, function (propName) {\n        var prop = propName ? elOption[propName] : elOption;\n        if (prop && prop.enterFrom) {\n          if (propName) {\n            enterFromProps_1[propName] = enterFromProps_1[propName] || {};\n          }\n          extend(propName ? enterFromProps_1[propName] : enterFromProps_1, prop.enterFrom);\n        }\n      });\n      var config = getElementAnimationConfig('enter', el, elOption, animatableModel, dataIndex);\n      if (config.duration > 0) {\n        el.animateFrom(enterFromProps_1, config);\n      }\n    } else {\n      applyPropsTransition(el, elOption, dataIndex || 0, animatableModel, transFromProps);\n    }\n  }\n  // Store leave to be used in leave transition.\n  updateLeaveTo(el, elOption);\n  styleOpt ? el.dirty() : el.markRedraw();\n}\nexport function updateLeaveTo(el, elOption) {\n  // Try merge to previous set leaveTo\n  var leaveToProps = transitionInnerStore(el).leaveToProps;\n  for (var i = 0; i < ELEMENT_ANIMATABLE_PROPS.length; i++) {\n    var propName = ELEMENT_ANIMATABLE_PROPS[i];\n    var prop = propName ? elOption[propName] : elOption;\n    if (prop && prop.leaveTo) {\n      if (!leaveToProps) {\n        leaveToProps = transitionInnerStore(el).leaveToProps = {};\n      }\n      if (propName) {\n        leaveToProps[propName] = leaveToProps[propName] || {};\n      }\n      extend(propName ? leaveToProps[propName] : leaveToProps, prop.leaveTo);\n    }\n  }\n}\nexport function applyLeaveTransition(el, elOption, animatableModel, onRemove) {\n  if (el) {\n    var parent_1 = el.parent;\n    var leaveToProps = transitionInnerStore(el).leaveToProps;\n    if (leaveToProps) {\n      // TODO TODO use leave after leaveAnimation in series is introduced\n      // TODO Data index?\n      var config = getElementAnimationConfig('update', el, elOption, animatableModel, 0);\n      config.done = function () {\n        parent_1.remove(el);\n        onRemove && onRemove();\n      };\n      el.animateTo(leaveToProps, config);\n    } else {\n      parent_1.remove(el);\n      onRemove && onRemove();\n    }\n  }\n}\nexport function isTransitionAll(transition) {\n  return transition === 'all';\n}\nfunction applyPropsDirectly(el,\n// Can be null/undefined\nallPropsFinal, clearStyle) {\n  var styleOpt = allPropsFinal.style;\n  if (!el.isGroup && styleOpt) {\n    if (clearStyle) {\n      el.useStyle({});\n      // When style object changed, how to trade the existing animation?\n      // It is probably complicated and not needed to cover all the cases.\n      // But still need consider the case:\n      // (1) When using init animation on `style.opacity`, and before the animation\n      //     ended users triggers an update by mousewhel. At that time the init\n      //     animation should better be continued rather than terminated.\n      //     So after `useStyle` called, we should change the animation target manually\n      //     to continue the effect of the init animation.\n      // (2) PENDING: If the previous animation targeted at a `val1`, and currently we need\n      //     to update the value to `val2` and no animation declared, should be terminate\n      //     the previous animation or just modify the target of the animation?\n      //     Therotically That will happen not only on `style` but also on `shape` and\n      //     `transfrom` props. But we haven't handle this case at present yet.\n      // (3) PENDING: Is it proper to visit `animators` and `targetName`?\n      var animators = el.animators;\n      for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        // targetName is the \"topKey\".\n        if (animator.targetName === 'style') {\n          animator.changeTarget(el.style);\n        }\n      }\n    }\n    el.setStyle(styleOpt);\n  }\n  if (allPropsFinal) {\n    // Not set style here.\n    allPropsFinal.style = null;\n    // Set el to the final state firstly.\n    allPropsFinal && el.attr(allPropsFinal);\n    allPropsFinal.style = styleOpt;\n  }\n}\nfunction applyPropsTransition(el, elOption, dataIndex, model,\n// Can be null/undefined\ntransFromProps) {\n  if (transFromProps) {\n    var config = getElementAnimationConfig('update', el, elOption, model, dataIndex);\n    if (config.duration > 0) {\n      el.animateFrom(transFromProps, config);\n    }\n  }\n}\nfunction applyMiscProps(el, elOption) {\n  // Merge by default.\n  hasOwn(elOption, 'silent') && (el.silent = elOption.silent);\n  hasOwn(elOption, 'ignore') && (el.ignore = elOption.ignore);\n  if (el instanceof Displayable) {\n    hasOwn(elOption, 'invisible') && (el.invisible = elOption.invisible);\n  }\n  if (el instanceof Path) {\n    hasOwn(elOption, 'autoBatch') && (el.autoBatch = elOption.autoBatch);\n  }\n}\n// Use it to avoid it be exposed to user.\nvar tmpDuringScope = {};\nvar transitionDuringAPI = {\n  // Usually other props do not need to be changed in animation during.\n  setTransform: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `setTransform`.');\n    }\n    tmpDuringScope.el[key] = val;\n    return this;\n  },\n  getTransform: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `getTransform`.');\n    }\n    return tmpDuringScope.el[key];\n  },\n  setShape: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var el = tmpDuringScope.el;\n    var shape = el.shape || (el.shape = {});\n    shape[key] = val;\n    el.dirtyShape && el.dirtyShape();\n    return this;\n  },\n  getShape: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var shape = tmpDuringScope.el.shape;\n    if (shape) {\n      return shape[key];\n    }\n  },\n  setStyle: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var el = tmpDuringScope.el;\n    var style = el.style;\n    if (style) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (eqNaN(val)) {\n          warn('style.' + key + ' must not be assigned with NaN.');\n        }\n      }\n      style[key] = val;\n      el.dirtyStyle && el.dirtyStyle();\n    }\n    return this;\n  },\n  getStyle: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var style = tmpDuringScope.el.style;\n    if (style) {\n      return style[key];\n    }\n  },\n  setExtra: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var extra = tmpDuringScope.el.extra || (tmpDuringScope.el.extra = {});\n    extra[key] = val;\n    return this;\n  },\n  getExtra: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var extra = tmpDuringScope.el.extra;\n    if (extra) {\n      return extra[key];\n    }\n  }\n};\nfunction assertNotReserved(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (key === 'transition' || key === 'enterFrom' || key === 'leaveTo') {\n      throw new Error('key must not be \"' + key + '\"');\n    }\n  }\n}\nfunction duringCall() {\n  // Do not provide \"percent\" until some requirements come.\n  // Because consider thies case:\n  // enterFrom: {x: 100, y: 30}, transition: 'x'.\n  // And enter duration is different from update duration.\n  // Thus it might be confused about the meaning of \"percent\" in during callback.\n  var scope = this;\n  var el = scope.el;\n  if (!el) {\n    return;\n  }\n  // If el is remove from zr by reason like legend, during still need to called,\n  // because el will be added back to zr and the prop value should not be incorrect.\n  var latestUserDuring = transitionInnerStore(el).userDuring;\n  var scopeUserDuring = scope.userDuring;\n  // Ensured a during is only called once in each animation frame.\n  // If a during is called multiple times in one frame, maybe some users' calculation logic\n  // might be wrong (not sure whether this usage exists).\n  // The case of a during might be called twice can be: by default there is a animator for\n  // 'x', 'y' when init. Before the init animation finished, call `setOption` to start\n  // another animators for 'style'/'shape'/'extra'.\n  if (latestUserDuring !== scopeUserDuring) {\n    // release\n    scope.el = scope.userDuring = null;\n    return;\n  }\n  tmpDuringScope.el = el;\n  // Give no `this` to user in \"during\" calling.\n  scopeUserDuring(transitionDuringAPI);\n  // FIXME: if in future meet the case that some prop will be both modified in `during` and `state`,\n  // consider the issue that the prop might be incorrect when return to \"normal\" state.\n}\n\nfunction prepareShapeOrExtraTransitionFrom(mainAttr, fromEl, elOption, transFromProps) {\n  var attrOpt = elOption[mainAttr];\n  if (!attrOpt) {\n    return;\n  }\n  var elPropsInAttr = fromEl[mainAttr];\n  var transFromPropsInAttr;\n  if (elPropsInAttr) {\n    var transition = elOption.transition;\n    var attrTransition = attrOpt.transition;\n    if (attrTransition) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      if (isTransitionAll(attrTransition)) {\n        extend(transFromPropsInAttr, elPropsInAttr);\n      } else {\n        var transitionKeys = normalizeToArray(attrTransition);\n        for (var i = 0; i < transitionKeys.length; i++) {\n          var key = transitionKeys[i];\n          var elVal = elPropsInAttr[key];\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    } else if (isTransitionAll(transition) || indexOf(transition, mainAttr) >= 0) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var elPropsInAttrKeys = keys(elPropsInAttr);\n      for (var i = 0; i < elPropsInAttrKeys.length; i++) {\n        var key = elPropsInAttrKeys[i];\n        var elVal = elPropsInAttr[key];\n        if (isNonStyleTransitionEnabled(attrOpt[key], elVal)) {\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    }\n  }\n}\nfunction prepareShapeOrExtraAllPropsFinal(mainAttr, elOption, allProps) {\n  var attrOpt = elOption[mainAttr];\n  if (!attrOpt) {\n    return;\n  }\n  var allPropsInAttr = allProps[mainAttr] = {};\n  var keysInAttr = keys(attrOpt);\n  for (var i = 0; i < keysInAttr.length; i++) {\n    var key = keysInAttr[i];\n    // To avoid share one object with different element, and\n    // to avoid user modify the object inexpectedly, have to clone.\n    allPropsInAttr[key] = cloneValue(attrOpt[key]);\n  }\n}\nfunction prepareTransformTransitionFrom(el, elOption, transFromProps) {\n  var transition = elOption.transition;\n  var transitionKeys = isTransitionAll(transition) ? TRANSFORMABLE_PROPS : normalizeToArray(transition || []);\n  for (var i = 0; i < transitionKeys.length; i++) {\n    var key = transitionKeys[i];\n    if (key === 'style' || key === 'shape' || key === 'extra') {\n      continue;\n    }\n    var elVal = el[key];\n    if (process.env.NODE_ENV !== 'production') {\n      checkTransformPropRefer(key, 'el.transition');\n    }\n    // Do not clone, animator will perform that clone.\n    transFromProps[key] = elVal;\n  }\n}\nfunction prepareTransformAllPropsFinal(el, elOption, allProps) {\n  for (var i = 0; i < LEGACY_TRANSFORM_PROPS.length; i++) {\n    var legacyName = LEGACY_TRANSFORM_PROPS[i];\n    var xyName = LEGACY_TRANSFORM_PROPS_MAP[legacyName];\n    var legacyArr = elOption[legacyName];\n    if (legacyArr) {\n      allProps[xyName[0]] = legacyArr[0];\n      allProps[xyName[1]] = legacyArr[1];\n    }\n  }\n  for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n    var key = TRANSFORMABLE_PROPS[i];\n    if (elOption[key] != null) {\n      allProps[key] = elOption[key];\n    }\n  }\n}\nfunction prepareStyleTransitionFrom(fromEl, elOption, styleOpt, transFromProps) {\n  if (!styleOpt) {\n    return;\n  }\n  var fromElStyle = fromEl.style;\n  var transFromStyleProps;\n  if (fromElStyle) {\n    var styleTransition = styleOpt.transition;\n    var elTransition = elOption.transition;\n    if (styleTransition && !isTransitionAll(styleTransition)) {\n      var transitionKeys = normalizeToArray(styleTransition);\n      !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = fromElStyle[key];\n        // Do not clone, see `checkNonStyleTansitionRefer`.\n        transFromStyleProps[key] = elVal;\n      }\n    } else if (fromEl.getAnimationStyleProps && (isTransitionAll(elTransition) || isTransitionAll(styleTransition) || indexOf(elTransition, 'style') >= 0)) {\n      var animationProps = fromEl.getAnimationStyleProps();\n      var animationStyleProps = animationProps ? animationProps.style : null;\n      if (animationStyleProps) {\n        !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n        var styleKeys = keys(styleOpt);\n        for (var i = 0; i < styleKeys.length; i++) {\n          var key = styleKeys[i];\n          if (animationStyleProps[key]) {\n            var elVal = fromElStyle[key];\n            transFromStyleProps[key] = elVal;\n          }\n        }\n      }\n    }\n  }\n}\nfunction isNonStyleTransitionEnabled(optVal, elVal) {\n  // The same as `checkNonStyleTansitionRefer`.\n  return !isArrayLike(optVal) ? optVal != null && isFinite(optVal) : optVal !== elVal;\n}\nvar checkTransformPropRefer;\nif (process.env.NODE_ENV !== 'production') {\n  checkTransformPropRefer = function (key, usedIn) {\n    if (!hasOwn(TRANSFORM_PROPS_MAP, key)) {\n      warn('Prop `' + key + '` is not a permitted in `' + usedIn + '`. ' + 'Only `' + keys(TRANSFORM_PROPS_MAP).join('`, `') + '` are permitted.');\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, filter, each, isArray, indexOf } from 'zrender/lib/core/util.js';\nimport { ELEMENT_ANIMATABLE_PROPS } from './customGraphicTransition.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { warn } from '../util/log.js';\nimport { makeInner } from '../util/model.js';\nvar getStateToRestore = makeInner();\nvar KEYFRAME_EXCLUDE_KEYS = ['percent', 'easing', 'shape', 'style', 'extra'];\n/**\n * Stop previous keyframe animation and restore the attributes.\n * Avoid new keyframe animation starts with wrong internal state when the percent: 0 is not set.\n */\nexport function stopPreviousKeyframeAnimationAndRestore(el) {\n  // Stop previous keyframe animation.\n  el.stopAnimation('keyframe');\n  // Restore\n  el.attr(getStateToRestore(el));\n}\nexport function applyKeyframeAnimation(el, animationOpts, animatableModel) {\n  if (!animatableModel.isAnimationEnabled() || !animationOpts) {\n    return;\n  }\n  if (isArray(animationOpts)) {\n    each(animationOpts, function (singleAnimationOpts) {\n      applyKeyframeAnimation(el, singleAnimationOpts, animatableModel);\n    });\n    return;\n  }\n  var keyframes = animationOpts.keyframes;\n  var duration = animationOpts.duration;\n  if (animatableModel && duration == null) {\n    // Default to use duration of config.\n    // NOTE: animation config from payload will be ignored because they are mainly for transitions.\n    var config = getAnimationConfig('enter', animatableModel, 0);\n    duration = config && config.duration;\n  }\n  if (!keyframes || !duration) {\n    return;\n  }\n  var stateToRestore = getStateToRestore(el);\n  each(ELEMENT_ANIMATABLE_PROPS, function (targetPropName) {\n    if (targetPropName && !el[targetPropName]) {\n      return;\n    }\n    var animator;\n    var endFrameIsSet = false;\n    // Sort keyframes by percent.\n    keyframes.sort(function (a, b) {\n      return a.percent - b.percent;\n    });\n    each(keyframes, function (kf) {\n      // Stop current animation.\n      var animators = el.animators;\n      var kfValues = targetPropName ? kf[targetPropName] : kf;\n      if (process.env.NODE_ENV !== 'production') {\n        if (kf.percent >= 1) {\n          endFrameIsSet = true;\n        }\n      }\n      if (!kfValues) {\n        return;\n      }\n      var propKeys = keys(kfValues);\n      if (!targetPropName) {\n        // PENDING performance?\n        propKeys = filter(propKeys, function (key) {\n          return indexOf(KEYFRAME_EXCLUDE_KEYS, key) < 0;\n        });\n      }\n      if (!propKeys.length) {\n        return;\n      }\n      if (!animator) {\n        animator = el.animate(targetPropName, animationOpts.loop, true);\n        animator.scope = 'keyframe';\n      }\n      for (var i = 0; i < animators.length; i++) {\n        // Stop all other animation that is not keyframe.\n        if (animators[i] !== animator && animators[i].targetName === animator.targetName) {\n          animators[i].stopTracks(propKeys);\n        }\n      }\n      targetPropName && (stateToRestore[targetPropName] = stateToRestore[targetPropName] || {});\n      var savedTarget = targetPropName ? stateToRestore[targetPropName] : stateToRestore;\n      each(propKeys, function (key) {\n        // Save original value.\n        savedTarget[key] = ((targetPropName ? el[targetPropName] : el) || {})[key];\n      });\n      animator.whenWithKeys(duration * kf.percent, kfValues, propKeys, kf.easing);\n    });\n    if (!animator) {\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (!endFrameIsSet) {\n        warn('End frame with percent: 1 is missing in the keyframeAnimation.', true);\n      }\n    }\n    animator.delay(animationOpts.delay || 0).duration(duration).start(animationOpts.easing);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\nimport * as labelStyleHelper from '../../label/labelStyle.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\nimport preparePolar from '../../coord/polar/prepareCustom.js';\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\nimport { throwError } from '../../util/log.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y'];\n// Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  single: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\nvar CustomChartView = /** @class */function (_super) {\n  __extends(CustomChartView, _super);\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && applyLeaveTransition(el, customInnerStore(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute();\n    // Do clipping\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n  };\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    }\n    // Enable to give a name on a group made by `renderItem`, and listen\n    // events that are triggered by its descendents.\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n    return false;\n  };\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\nexport default CustomChartView;\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el;\n  // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  if (graphicType === 'path') {\n    var shape = elOption.shape;\n    // Using pathRect brings convenience to users sacle svg path.\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape);\n    // Path is also used for icon, so layout 'center' by default.\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n    if (!Clz) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n      throwError(errMsg);\n    }\n    el = new Clz();\n  }\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name;\n  // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\nfunction updateElNormal(\n// Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  stopPreviousKeyframeAnimationAndRestore(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  }\n  // Default transition ['x', 'y']\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  }\n  // Do some normalization on style.\n  var styleOpt = elOption && elOption.style;\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt;\n      // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    }\n    // Always overwrite in case user specify this prop.\n    styleOpt.__decalPattern = decalPattern;\n  }\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n  applyUpdateTransition(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\n}\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg;\n  // PENDING:5.0 support customize scale change and transition animation?\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable default emphasis.\n      stateObj.style = styleOpt || null;\n    }\n    // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n    setDefaultStateProxy(elDisplayable);\n  }\n}\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel;\n  // Always erase.\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel;\n  // z2 must not be null/undefined, otherwise sort error may occur.\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    }\n    // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  };\n  // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\n   * @deprecated The original intention of `api.style` is enable to set itemStyle\n   * like other series. But it is not necessary and not easy to give a strict definition\n   * of what it returns. And since echarts5 it needs to be make compat work. So\n   * deprecates it since echarts5.\n   *\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   *\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\n   * any more. But `series.label` config is never published in doc.\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\n   * to pulish it to doc.\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL);\n    // Now that the feature of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\n   * @deprecated The reason see `api.style()`\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    }\n    // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\n   * @public\n   * @return If not support, return undefined.\n   */\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\n   * @public\n   */\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @return font string\n   */\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel)\n  // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n  var isInit = !existsEl;\n  var el = existsEl;\n  if (!el) {\n    el = createEl(elOption);\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  }\n  // Need to set morph: false explictly to disable automatically morphing.\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit);\n  // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n  updateZ(el, elOption, seriesModel);\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n  return el;\n}\n// `el` must not be null/undefined.\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (\n    // Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled()\n    // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath\n    // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n      el.setClipPath(clipPath);\n    }\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  }\n  // If not define `clipPath` in option, do nothing unnecessary.\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // Group does not support textContent temporarily until necessary.\n  if (el.isGroup) {\n    return;\n  }\n  // Normal must be called before emphasis, for `isLegacy` detection.\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo);\n  // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sense.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n  if (styleOpt && (\n  // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state);\n    // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt;\n    // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorrcet type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n  return style;\n}\n// Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates\n//     that the existing children will not be removed, and enables the feature\n//     that update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will\n//     happen.\n// (5) If `elOption.$mergeChildren` is not `false` neither `'byName'` and the\n//     `el` is a group, and if any of the new child is null, it means to remove\n//     the element at the same index, if exists. On the other hand, if the new\n//     child is and empty object `{}`, it means to keep the element not changed.\n//\n// For implementation simpleness, do not provide a direct way to remove single\n// child (otherwise the total indices of the children array have to be modified).\n// User can remove a single child by setting its `ignore` to `true`.\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren;\n  // `diffChildrenByName` has been deprecated.\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false;\n  // For better performance on roam update, only enter if necessary.\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n  notMerge && el.removeAll();\n  // Mapping children of a group simply by index, which\n  // might be better performance.\n  var index = 0;\n  for (; index < newLen; index++) {\n    var newChild = newChildren[index];\n    var oldChild = el.childAt(index);\n    if (newChild) {\n      if (newChild.ignore == null) {\n        // The old child is set to be ignored if null (see comments\n        // below). So we need to set ignore to be false back.\n        newChild.ignore = false;\n      }\n      doCreateOrUpdateEl(api, oldChild, dataIndex, newChild, seriesModel, el);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(oldChild, 'renderItem should not return a group containing elements' + ' as null/undefined/{} if they do not exist before.');\n      }\n      // If the new element option is null, it means to remove the old\n      // element. But we cannot really remove the element from the group\n      // directly, because the element order may not be stable when this\n      // element is added back. So we set the element to be ignored.\n      oldChild.ignore = true;\n    }\n  }\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    var child = el.childAt(i);\n    removeChildFromGroup(el, child, seriesModel);\n  }\n}\nfunction removeChildFromGroup(group, child, seriesModel) {\n  // Do not support leave elements that are not mentioned in the latest\n  // `renderItem` return. Otherwise users may not have a clear and simple\n  // concept that how to control all of the elements.\n  child && applyLeaveTransition(child, customInnerStore(group).option, seriesModel);\n}\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\n}\n/**\n * @return SVG Path data.\n */\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CustomSeriesModel from './CustomSeries.js';\nimport CustomChartView from './CustomView.js';\nexport function install(registers) {\n  registers.registerChartView(CustomChartView);\n  registers.registerSeriesModel(CustomSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nvar PolarAxisPointer = /** @class */function (_super) {\n  __extends(PolarAxisPointer, _super);\n  function PolarAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n  PolarAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    if (axis.dim === 'angle') {\n      this.animationThreshold = Math.PI / 18;\n    }\n    var polar = axis.polar;\n    var otherAxis = polar.getOtherAxis(axis);\n    var otherExtent = otherAxis.getExtent();\n    var coordValue = axis.dataToCoord(value);\n    var axisPointerType = axisPointerModel.get('type');\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, polar, coordValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var labelMargin = axisPointerModel.get(['label', 'margin']);\n    var labelPos = getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin);\n    viewHelper.buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos);\n  };\n  return PolarAxisPointer;\n}(BaseAxisPointer);\n;\nfunction getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin) {\n  var axis = axisModel.axis;\n  var coord = axis.dataToCoord(value);\n  var axisAngle = polar.getAngleAxis().getExtent()[0];\n  axisAngle = axisAngle / 180 * Math.PI;\n  var radiusExtent = polar.getRadiusAxis().getExtent();\n  var position;\n  var align;\n  var verticalAlign;\n  if (axis.dim === 'radius') {\n    var transform = matrix.create();\n    matrix.rotate(transform, transform, axisAngle);\n    matrix.translate(transform, transform, [polar.cx, polar.cy]);\n    position = graphic.applyTransform([coord, -labelMargin], transform);\n    var labelRotation = axisModel.getModel('axisLabel').get('rotate') || 0;\n    // @ts-ignore\n    var labelLayout = AxisBuilder.innerTextLayout(axisAngle, labelRotation * Math.PI / 180, -1);\n    align = labelLayout.textAlign;\n    verticalAlign = labelLayout.textVerticalAlign;\n  } else {\n    // angle axis\n    var r = radiusExtent[1];\n    position = polar.coordToPoint([r + labelMargin, coord]);\n    var cx = polar.cx;\n    var cy = polar.cy;\n    align = Math.abs(position[0] - cx) / r < 0.3 ? 'center' : position[0] > cx ? 'left' : 'right';\n    verticalAlign = Math.abs(position[1] - cy) / r < 0.3 ? 'middle' : position[1] > cy ? 'top' : 'bottom';\n  }\n  return {\n    position: position,\n    align: align,\n    verticalAlign: verticalAlign\n  };\n}\nvar pointerShapeBuilder = {\n  line: function (axis, polar, coordValue, otherExtent) {\n    return axis.dim === 'angle' ? {\n      type: 'Line',\n      shape: viewHelper.makeLineShape(polar.coordToPoint([otherExtent[0], coordValue]), polar.coordToPoint([otherExtent[1], coordValue]))\n    } : {\n      type: 'Circle',\n      shape: {\n        cx: polar.cx,\n        cy: polar.cy,\n        r: coordValue\n      }\n    };\n  },\n  shadow: function (axis, polar, coordValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var radian = Math.PI / 180;\n    return axis.dim === 'angle' ? {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, otherExtent[0], otherExtent[1],\n      // In ECharts y is negative if angle is positive\n      (-coordValue - bandWidth / 2) * radian, (-coordValue + bandWidth / 2) * radian)\n    } : {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, coordValue - bandWidth / 2, coordValue + bandWidth / 2, 0, Math.PI * 2)\n    };\n  }\n};\nexport default PolarAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar PolarModel = /** @class */function (_super) {\n  __extends(PolarModel, _super);\n  function PolarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PolarModel.type;\n    return _this;\n  }\n  PolarModel.prototype.findAxisModel = function (axisType) {\n    var foundAxisModel;\n    var ecModel = this.ecModel;\n    ecModel.eachComponent(axisType, function (axisModel) {\n      if (axisModel.getCoordSysModel() === this) {\n        foundAxisModel = axisModel;\n      }\n    }, this);\n    return foundAxisModel;\n  };\n  PolarModel.type = 'polar';\n  PolarModel.dependencies = ['radiusAxis', 'angleAxis'];\n  PolarModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '80%'\n  };\n  return PolarModel;\n}(ComponentModel);\nexport default PolarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar PolarAxisModel = /** @class */function (_super) {\n  __extends(PolarAxisModel, _super);\n  function PolarAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PolarAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n  };\n  PolarAxisModel.type = 'polarAxis';\n  return PolarAxisModel;\n}(ComponentModel);\nzrUtil.mixin(PolarAxisModel, AxisModelCommonMixin);\nexport { PolarAxisModel };\nvar AngleAxisModel = /** @class */function (_super) {\n  __extends(AngleAxisModel, _super);\n  function AngleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AngleAxisModel.type;\n    return _this;\n  }\n  AngleAxisModel.type = 'angleAxis';\n  return AngleAxisModel;\n}(PolarAxisModel);\nexport { AngleAxisModel };\nvar RadiusAxisModel = /** @class */function (_super) {\n  __extends(RadiusAxisModel, _super);\n  function RadiusAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadiusAxisModel.type;\n    return _this;\n  }\n  RadiusAxisModel.type = 'radiusAxis';\n  return RadiusAxisModel;\n}(PolarAxisModel);\nexport { RadiusAxisModel };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar RadiusAxis = /** @class */function (_super) {\n  __extends(RadiusAxis, _super);\n  function RadiusAxis(scale, radiusExtent) {\n    return _super.call(this, 'radius', scale, radiusExtent) || this;\n  }\n  RadiusAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n  return RadiusAxis;\n}(Axis);\nRadiusAxis.prototype.dataToRadius = Axis.prototype.dataToCoord;\nRadiusAxis.prototype.radiusToData = Axis.prototype.coordToData;\nexport default RadiusAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport Axis from '../Axis.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar AngleAxis = /** @class */function (_super) {\n  __extends(AngleAxis, _super);\n  function AngleAxis(scale, angleExtent) {\n    return _super.call(this, 'angle', scale, angleExtent || [0, 360]) || this;\n  }\n  AngleAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n  /**\n   * Only be called in category axis.\n   * Angle axis uses text height to decide interval\n   *\n   * @override\n   * @return {number} Auto interval for cateogry axis tick and label\n   */\n  AngleAxis.prototype.calculateCategoryInterval = function () {\n    var axis = this;\n    var labelModel = axis.getLabelModel();\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent();\n    // Providing this method is for optimization:\n    // avoid generating a long array by `getTicks`\n    // in large category data case.\n    var tickCount = ordinalScale.count();\n    if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n      return 0;\n    }\n    var tickValue = ordinalExtent[0];\n    var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n    var unitH = Math.abs(unitSpan);\n    // Not precise, just use height as text width\n    // and each distance from axis line yet.\n    var rect = textContain.getBoundingRect(tickValue == null ? '' : tickValue + '', labelModel.getFont(), 'center', 'top');\n    var maxH = Math.max(rect.height, 7);\n    var dh = maxH / unitH;\n    // 0/0 is NaN, 1/0 is Infinity.\n    isNaN(dh) && (dh = Infinity);\n    var interval = Math.max(0, Math.floor(dh));\n    var cache = inner(axis.model);\n    var lastAutoInterval = cache.lastAutoInterval;\n    var lastTickCount = cache.lastTickCount;\n    // Use cache to keep interval stable while moving zoom window,\n    // otherwise the calculated interval might jitter when the zoom\n    // window size is close to the interval-changing size.\n    if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\n    // Always choose the bigger one, otherwise the critical\n    // point is not the same when zooming in or zooming out.\n    && lastAutoInterval > interval) {\n      interval = lastAutoInterval;\n    }\n    // Only update cache if cache not used, otherwise the\n    // changing of interval is too insensitive.\n    else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n    }\n    return interval;\n  };\n  return AngleAxis;\n}(Axis);\nAngleAxis.prototype.dataToAngle = Axis.prototype.dataToCoord;\nAngleAxis.prototype.angleToData = Axis.prototype.coordToData;\nexport default AngleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadiusAxis from './RadiusAxis.js';\nimport AngleAxis from './AngleAxis.js';\nexport var polarDimensions = ['radius', 'angle'];\nvar Polar = /** @class */function () {\n  function Polar(name) {\n    this.dimensions = polarDimensions;\n    this.type = 'polar';\n    /**\n     * x of polar center\n     */\n    this.cx = 0;\n    /**\n     * y of polar center\n     */\n    this.cy = 0;\n    this._radiusAxis = new RadiusAxis();\n    this._angleAxis = new AngleAxis();\n    this.axisPointerEnabled = true;\n    this.name = name || '';\n    this._radiusAxis.polar = this._angleAxis.polar = this;\n  }\n  /**\n   * If contain coord\n   */\n  Polar.prototype.containPoint = function (point) {\n    var coord = this.pointToCoord(point);\n    return this._radiusAxis.contain(coord[0]) && this._angleAxis.contain(coord[1]);\n  };\n  /**\n   * If contain data\n   */\n  Polar.prototype.containData = function (data) {\n    return this._radiusAxis.containData(data[0]) && this._angleAxis.containData(data[1]);\n  };\n  Polar.prototype.getAxis = function (dim) {\n    var key = '_' + dim + 'Axis';\n    return this[key];\n  };\n  Polar.prototype.getAxes = function () {\n    return [this._radiusAxis, this._angleAxis];\n  };\n  /**\n   * Get axes by type of scale\n   */\n  Polar.prototype.getAxesByScale = function (scaleType) {\n    var axes = [];\n    var angleAxis = this._angleAxis;\n    var radiusAxis = this._radiusAxis;\n    angleAxis.scale.type === scaleType && axes.push(angleAxis);\n    radiusAxis.scale.type === scaleType && axes.push(radiusAxis);\n    return axes;\n  };\n  Polar.prototype.getAngleAxis = function () {\n    return this._angleAxis;\n  };\n  Polar.prototype.getRadiusAxis = function () {\n    return this._radiusAxis;\n  };\n  Polar.prototype.getOtherAxis = function (axis) {\n    var angleAxis = this._angleAxis;\n    return axis === angleAxis ? this._radiusAxis : angleAxis;\n  };\n  /**\n   * Base axis will be used on stacking.\n   *\n   */\n  Polar.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAngleAxis();\n  };\n  Polar.prototype.getTooltipAxes = function (dim) {\n    var baseAxis = dim != null && dim !== 'auto' ? this.getAxis(dim) : this.getBaseAxis();\n    return {\n      baseAxes: [baseAxis],\n      otherAxes: [this.getOtherAxis(baseAxis)]\n    };\n  };\n  /**\n   * Convert a single data item to (x, y) point.\n   * Parameter data is an array which the first element is radius and the second is angle\n   */\n  Polar.prototype.dataToPoint = function (data, clamp) {\n    return this.coordToPoint([this._radiusAxis.dataToRadius(data[0], clamp), this._angleAxis.dataToAngle(data[1], clamp)]);\n  };\n  /**\n   * Convert a (x, y) point to data\n   */\n  Polar.prototype.pointToData = function (point, clamp) {\n    var coord = this.pointToCoord(point);\n    return [this._radiusAxis.radiusToData(coord[0], clamp), this._angleAxis.angleToData(coord[1], clamp)];\n  };\n  /**\n   * Convert a (x, y) point to (radius, angle) coord\n   */\n  Polar.prototype.pointToCoord = function (point) {\n    var dx = point[0] - this.cx;\n    var dy = point[1] - this.cy;\n    var angleAxis = this.getAngleAxis();\n    var extent = angleAxis.getExtent();\n    var minAngle = Math.min(extent[0], extent[1]);\n    var maxAngle = Math.max(extent[0], extent[1]);\n    // Fix fixed extent in polarCreator\n    // FIXME\n    angleAxis.inverse ? minAngle = maxAngle - 360 : maxAngle = minAngle + 360;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx) / Math.PI * 180;\n    // move to angleExtent\n    var dir = radian < minAngle ? 1 : -1;\n    while (radian < minAngle || radian > maxAngle) {\n      radian += dir * 360;\n    }\n    return [radius, radian];\n  };\n  /**\n   * Convert a (radius, angle) coord to (x, y) point\n   */\n  Polar.prototype.coordToPoint = function (coord) {\n    var radius = coord[0];\n    var radian = coord[1] / 180 * Math.PI;\n    var x = Math.cos(radian) * radius + this.cx;\n    // Inverse the y\n    var y = -Math.sin(radian) * radius + this.cy;\n    return [x, y];\n  };\n  /**\n   * Get ring area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n  Polar.prototype.getArea = function () {\n    var angleAxis = this.getAngleAxis();\n    var radiusAxis = this.getRadiusAxis();\n    var radiusExtent = radiusAxis.getExtent().slice();\n    radiusExtent[0] > radiusExtent[1] && radiusExtent.reverse();\n    var angleExtent = angleAxis.getExtent();\n    var RADIAN = Math.PI / 180;\n    return {\n      cx: this.cx,\n      cy: this.cy,\n      r0: radiusExtent[0],\n      r: radiusExtent[1],\n      startAngle: -angleExtent[0] * RADIAN,\n      endAngle: -angleExtent[1] * RADIAN,\n      clockwise: angleAxis.inverse,\n      contain: function (x, y) {\n        // It's a ring shape.\n        // Start angle and end angle don't matter\n        var dx = x - this.cx;\n        var dy = y - this.cy;\n        // minus a tiny value 1e-4 to avoid being clipped unexpectedly\n        var d2 = dx * dx + dy * dy - 1e-4;\n        var r = this.r;\n        var r0 = this.r0;\n        return d2 <= r * r && d2 >= r0 * r0;\n      }\n    };\n  };\n  Polar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n  Polar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n  return Polar;\n}();\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var polarModel = finder.polarModel;\n  return polarModel && polarModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\nexport default Polar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Axis scale\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Polar, { polarDimensions } from './Polar.js';\nimport { parsePercent } from '../../util/number.js';\nimport { createScaleByModel, niceScaleExtent, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\n * Resize method bound to the polar\n */\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = polarModel.get('radius');\n  if (radius == null) {\n    radius = [0, '100%'];\n  } else if (!zrUtil.isArray(radius)) {\n    // r0 = 0\n    radius = [0, radius];\n  }\n  var parsedRadius = [parsePercent(radius[0], size), parsePercent(radius[1], size)];\n  radiusAxis.inverse ? radiusAxis.setExtent(parsedRadius[1], parsedRadius[0]) : radiusAxis.setExtent(parsedRadius[0], parsedRadius[1]);\n}\n/**\n * Update polar\n */\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis();\n  // Reset scale\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data_1 = seriesModel.getData();\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'radius'), function (dim) {\n        radiusAxis.scale.unionExtentFromData(data_1, dim);\n      });\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'angle'), function (dim) {\n        angleAxis.scale.unionExtentFromData(data_1, dim);\n      });\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model);\n  // Fix extent of category angle axis\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\nfunction isAngleAxisModel(axisModel) {\n  return axisModel.mainType === 'angleAxis';\n}\n/**\n * Set common axis properties\n */\nfunction setAxis(axis, axisModel) {\n  var _a;\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n  if (isAngleAxisModel(axisModel)) {\n    axis.inverse = axis.inverse !== axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    var endAngle = (_a = axisModel.get('endAngle')) !== null && _a !== void 0 ? _a : startAngle + (axis.inverse ? -360 : 360);\n    axis.setExtent(startAngle, endAngle);\n  }\n  // Inject axis instance\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\nvar polarCreator = {\n  dimensions: polarDimensions,\n  create: function (ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx + '');\n      // Inject resize and update method\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    });\n    // Inject coordinateSystem to series\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n        if (process.env.NODE_ENV !== 'production') {\n          if (!polarModel) {\n            throw new Error('Polar \"' + zrUtil.retrieve(seriesModel.get('polarIndex'), seriesModel.get('polarId'), 0) + '\" not found');\n          }\n        }\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nexport default polarCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport AxisView from './AxisView.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport { getECData } from '../../util/innerStore.js';\nvar elementList = ['axisLine', 'axisLabel', 'axisTick', 'minorTick', 'splitLine', 'minorSplitLine', 'splitArea'];\nfunction getAxisLineShape(polar, rExtent, angle) {\n  rExtent[1] > rExtent[0] && (rExtent = rExtent.slice().reverse());\n  var start = polar.coordToPoint([rExtent[0], angle]);\n  var end = polar.coordToPoint([rExtent[1], angle]);\n  return {\n    x1: start[0],\n    y1: start[1],\n    x2: end[0],\n    y2: end[1]\n  };\n}\nfunction getRadiusIdx(polar) {\n  var radiusAxis = polar.getRadiusAxis();\n  return radiusAxis.inverse ? 0 : 1;\n}\n// Remove the last tick which will overlap the first tick\nfunction fixAngleOverlap(list) {\n  var firstItem = list[0];\n  var lastItem = list[list.length - 1];\n  if (firstItem && lastItem && Math.abs(Math.abs(firstItem.coord - lastItem.coord) - 360) < 1e-4) {\n    list.pop();\n  }\n}\nvar AngleAxisView = /** @class */function (_super) {\n  __extends(AngleAxisView, _super);\n  function AngleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AngleAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n  AngleAxisView.prototype.render = function (angleAxisModel, ecModel) {\n    this.group.removeAll();\n    if (!angleAxisModel.get('show')) {\n      return;\n    }\n    var angleAxis = angleAxisModel.axis;\n    var polar = angleAxis.polar;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var ticksAngles = angleAxis.getTicksCoords();\n    var minorTickAngles = angleAxis.getMinorTicksCoords();\n    var labels = zrUtil.map(angleAxis.getViewLabels(), function (labelItem) {\n      labelItem = zrUtil.clone(labelItem);\n      var scale = angleAxis.scale;\n      var tickValue = scale.type === 'ordinal' ? scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n      labelItem.coord = angleAxis.dataToCoord(tickValue);\n      return labelItem;\n    });\n    fixAngleOverlap(labels);\n    fixAngleOverlap(ticksAngles);\n    zrUtil.each(elementList, function (name) {\n      if (angleAxisModel.get([name, 'show']) && (!angleAxis.scale.isBlank() || name === 'axisLine')) {\n        angelAxisElementsBuilders[name](this.group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels);\n      }\n    }, this);\n  };\n  AngleAxisView.type = 'angleAxis';\n  return AngleAxisView;\n}(AxisView);\nvar angelAxisElementsBuilders = {\n  axisLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var lineStyleModel = angleAxisModel.getModel(['axisLine', 'lineStyle']);\n    var angleAxis = polar.getAngleAxis();\n    var RADIAN = Math.PI / 180;\n    var angleExtent = angleAxis.getExtent();\n    // extent id of the axis radius (r0 and r)\n    var rId = getRadiusIdx(polar);\n    var r0Id = rId ? 0 : 1;\n    var shape;\n    var shapeType = Math.abs(angleExtent[1] - angleExtent[0]) === 360 ? 'Circle' : 'Arc';\n    if (radiusExtent[r0Id] === 0) {\n      shape = new graphic[shapeType]({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId],\n          startAngle: -angleExtent[0] * RADIAN,\n          endAngle: -angleExtent[1] * RADIAN,\n          clockwise: angleAxis.inverse\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    } else {\n      shape = new graphic.Ring({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId],\n          r0: radiusExtent[r0Id]\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    }\n    shape.style.fill = null;\n    group.add(shape);\n  },\n  axisTick: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * tickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = zrUtil.map(ticksAngles, function (tickAngleItem) {\n      return new graphic.Line({\n        shape: getAxisLineShape(polar, [radius, radius + tickLen], tickAngleItem.coord)\n      });\n    });\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(tickModel.getModel('lineStyle').getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      })\n    }));\n  },\n  minorTick: function (group, angleAxisModel, polar, tickAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var minorTickModel = angleAxisModel.getModel('minorTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * minorTickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = [];\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, [radius, radius + tickLen], minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(minorTickModel.getModel('lineStyle').getLineStyle(), zrUtil.defaults(tickModel.getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      }))\n    }));\n  },\n  axisLabel: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels) {\n    var rawCategoryData = angleAxisModel.getCategories(true);\n    var commonLabelModel = angleAxisModel.getModel('axisLabel');\n    var labelMargin = commonLabelModel.get('margin');\n    var triggerEvent = angleAxisModel.get('triggerEvent');\n    // Use length of ticksAngles because it may remove the last tick to avoid overlapping\n    zrUtil.each(labels, function (labelItem, idx) {\n      var labelModel = commonLabelModel;\n      var tickValue = labelItem.tickValue;\n      var r = radiusExtent[getRadiusIdx(polar)];\n      var p = polar.coordToPoint([r + labelMargin, labelItem.coord]);\n      var cx = polar.cx;\n      var cy = polar.cy;\n      var labelTextAlign = Math.abs(p[0] - cx) / r < 0.3 ? 'center' : p[0] > cx ? 'left' : 'right';\n      var labelTextVerticalAlign = Math.abs(p[1] - cy) / r < 0.3 ? 'middle' : p[1] > cy ? 'top' : 'bottom';\n      if (rawCategoryData && rawCategoryData[tickValue]) {\n        var rawCategoryItem = rawCategoryData[tickValue];\n        if (zrUtil.isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n          labelModel = new Model(rawCategoryItem.textStyle, commonLabelModel, commonLabelModel.ecModel);\n        }\n      }\n      var textEl = new graphic.Text({\n        silent: AxisBuilder.isLabelSilent(angleAxisModel),\n        style: createTextStyle(labelModel, {\n          x: p[0],\n          y: p[1],\n          fill: labelModel.getTextColor() || angleAxisModel.get(['axisLine', 'lineStyle', 'color']),\n          text: labelItem.formattedLabel,\n          align: labelTextAlign,\n          verticalAlign: labelTextVerticalAlign\n        })\n      });\n      group.add(textEl);\n      // Pack data for mouse event\n      if (triggerEvent) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(angleAxisModel);\n        eventData.targetType = 'axisLabel';\n        eventData.value = labelItem.rawLabel;\n        getECData(textEl).eventData = eventData;\n      }\n    }, this);\n  },\n  splitLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var splitLineModel = angleAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n    for (var i = 0; i < ticksAngles.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        shape: getAxisLineShape(polar, radiusExtent, ticksAngles[i].coord)\n      }));\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyleModel.getLineStyle()),\n        silent: true,\n        z: angleAxisModel.get('z')\n      }));\n    }\n  },\n  minorSplitLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n    var minorSplitLineModel = angleAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, radiusExtent, minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n    group.add(graphic.mergePath(lines, {\n      style: lineStyleModel.getLineStyle(),\n      silent: true,\n      z: angleAxisModel.get('z')\n    }));\n  },\n  splitArea: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!ticksAngles.length) {\n      return;\n    }\n    var splitAreaModel = angleAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var RADIAN = Math.PI / 180;\n    var prevAngle = -ticksAngles[0].coord * RADIAN;\n    var r0 = Math.min(radiusExtent[0], radiusExtent[1]);\n    var r1 = Math.max(radiusExtent[0], radiusExtent[1]);\n    var clockwise = angleAxisModel.get('clockwise');\n    for (var i = 1, len = ticksAngles.length; i <= len; i++) {\n      var coord = i === len ? ticksAngles[0].coord : ticksAngles[i].coord;\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: r0,\n          r: r1,\n          startAngle: prevAngle,\n          endAngle: -coord * RADIAN,\n          clockwise: clockwise\n        },\n        silent: true\n      }));\n      prevAngle = -coord * RADIAN;\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\nexport default AngleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitLine', 'splitArea', 'minorSplitLine'];\nvar RadiusAxisView = /** @class */function (_super) {\n  __extends(RadiusAxisView, _super);\n  function RadiusAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadiusAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n  RadiusAxisView.prototype.render = function (radiusAxisModel, ecModel) {\n    this.group.removeAll();\n    if (!radiusAxisModel.get('show')) {\n      return;\n    }\n    var oldAxisGroup = this._axisGroup;\n    var newAxisGroup = this._axisGroup = new graphic.Group();\n    this.group.add(newAxisGroup);\n    var radiusAxis = radiusAxisModel.axis;\n    var polar = radiusAxis.polar;\n    var angleAxis = polar.getAngleAxis();\n    var ticksCoords = radiusAxis.getTicksCoords();\n    var minorTicksCoords = radiusAxis.getMinorTicksCoords();\n    var axisAngle = angleAxis.getExtent()[0];\n    var radiusExtent = radiusAxis.getExtent();\n    var layout = layoutAxis(polar, radiusAxisModel, axisAngle);\n    var axisBuilder = new AxisBuilder(radiusAxisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    newAxisGroup.add(axisBuilder.getGroup());\n    graphic.groupTransition(oldAxisGroup, newAxisGroup, radiusAxisModel);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (radiusAxisModel.get([name, 'show']) && !radiusAxis.scale.isBlank()) {\n        axisElementBuilders[name](this.group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords);\n      }\n    }, this);\n  };\n  RadiusAxisView.type = 'radiusAxis';\n  return RadiusAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    var splitLineModel = radiusAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    var angleAxis = polar.getAngleAxis();\n    var RADIAN = Math.PI / 180;\n    var angleExtent = angleAxis.getExtent();\n    var shapeType = Math.abs(angleExtent[1] - angleExtent[0]) === 360 ? 'Circle' : 'Arc';\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic[shapeType]({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          // ensure circle radius >= 0\n          r: Math.max(ticksCoords[i].coord, 0),\n          startAngle: -angleExtent[0] * RADIAN,\n          endAngle: -angleExtent[1] * RADIAN,\n          clockwise: angleAxis.inverse\n        }\n      }));\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length],\n          fill: null\n        }, lineStyleModel.getLineStyle()),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords) {\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var minorSplitLineModel = radiusAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        lines.push(new graphic.Circle({\n          shape: {\n            cx: polar.cx,\n            cy: polar.cy,\n            r: minorTicksCoords[i][k].coord\n          }\n        }));\n      }\n    }\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults({\n        fill: null\n      }, lineStyleModel.getLineStyle()),\n      silent: true\n    }));\n  },\n  splitArea: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    if (!ticksCoords.length) {\n      return;\n    }\n    var splitAreaModel = radiusAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var prevRadius = ticksCoords[0].coord;\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: prevRadius,\n          r: ticksCoords[i].coord,\n          startAngle: 0,\n          endAngle: Math.PI * 2\n        },\n        silent: true\n      }));\n      prevRadius = ticksCoords[i].coord;\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\n/**\n * @inner\n */\nfunction layoutAxis(polar, radiusAxisModel, axisAngle) {\n  return {\n    position: [polar.cx, polar.cy],\n    rotation: axisAngle / 180 * Math.PI,\n    labelDirection: -1,\n    tickDirection: -1,\n    nameDirection: 1,\n    labelRotate: radiusAxisModel.getModel('axisLabel').get('rotate'),\n    // Over splitLine and splitArea\n    z2: 1\n  };\n}\nexport default RadiusAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || '__ec_stack_' + seriesModel.seriesIndex;\n}\nfunction getAxisKey(polar, axis) {\n  return axis.dim + polar.model.componentIndex;\n}\nfunction barLayoutPolar(seriesType, ecModel, api) {\n  var lastStackCoords = {};\n  var barWidthAndOffset = calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'polar';\n  }));\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for polar only\n    if (seriesModel.coordinateSystem.type !== 'polar') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[axisKey][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = polar.getOtherAxis(baseAxis);\n    var cx = seriesModel.coordinateSystem.cx;\n    var cy = seriesModel.coordinateSystem.cy;\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var barMinAngle = seriesModel.get('barMinAngle') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim /* , baseDim */);\n    var clampLayout = baseAxis.dim !== 'radius' || !seriesModel.get('roundCap', true);\n    var valueAxisStart = valueAxis.dataToCoord(0);\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart;\n      // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n      // Only ordinal axis can be stacked.\n      if (stacked) {\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            n: valueAxisStart // Negative stack\n          };\n        }\n        // Should also consider #4243\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n      var r0 = void 0;\n      var r = void 0;\n      var startAngle = void 0;\n      var endAngle = void 0;\n      // radial sector\n      if (valueAxis.dim === 'radius') {\n        var radiusSpan = valueAxis.dataToCoord(value) - valueAxisStart;\n        var angle = baseAxis.dataToCoord(baseValue);\n        if (Math.abs(radiusSpan) < barMinHeight) {\n          radiusSpan = (radiusSpan < 0 ? -1 : 1) * barMinHeight;\n        }\n        r0 = baseCoord;\n        r = baseCoord + radiusSpan;\n        startAngle = angle - columnOffset;\n        endAngle = startAngle - columnWidth;\n        stacked && (lastStackCoords[stackId][baseValue][sign] = r);\n      }\n      // tangential sector\n      else {\n        var angleSpan = valueAxis.dataToCoord(value, clampLayout) - valueAxisStart;\n        var radius = baseAxis.dataToCoord(baseValue);\n        if (Math.abs(angleSpan) < barMinAngle) {\n          angleSpan = (angleSpan < 0 ? -1 : 1) * barMinAngle;\n        }\n        r0 = radius + columnOffset;\n        r = r0 + columnWidth;\n        startAngle = baseCoord;\n        endAngle = baseCoord + angleSpan;\n        // if the previous stack is at the end of the ring,\n        // add a round to differentiate it from origin\n        // let extent = angleAxis.getExtent();\n        // let stackCoord = angle;\n        // if (stackCoord === extent[0] && value > 0) {\n        //     stackCoord = extent[1];\n        // }\n        // else if (stackCoord === extent[1] && value < 0) {\n        //     stackCoord = extent[0];\n        // }\n        stacked && (lastStackCoords[stackId][baseValue][sign] = endAngle);\n      }\n      data.setItemLayout(idx, {\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: r,\n        // Consider that positive angle is anti-clockwise,\n        // while positive radian of sector is clockwise\n        startAngle: -startAngle * Math.PI / 180,\n        endAngle: -endAngle * Math.PI / 180,\n        /**\n         * Keep the same logic with bar in catesion: use end value to\n         * control direction. Notice that if clockwise is true (by\n         * default), the sector will always draw clockwisely, no matter\n         * whether endAngle is greater or less than startAngle.\n         */\n        clockwise: startAngle >= endAngle\n      });\n    }\n  });\n}\n/**\n * Calculate bar width and offset for radial bar charts\n */\nfunction calRadialBar(barSeries) {\n  // Columns info on each category axis. Key is polar name\n  var columnsMap = {};\n  zrUtil.each(barSeries, function (seriesModel, idx) {\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = getSeriesStackId(seriesModel);\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    if (barWidth && !stacks[stackId].width) {\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      stacks[stackId].width = barWidth;\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    barGap != null && (columnsOnAxis.gap = barGap);\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nexport default barLayoutPolar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension.js';\nimport AxisView from '../axis/AxisView.js';\nimport PolarAxisPointer from '../axisPointer/PolarAxisPointer.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport PolarModel from '../../coord/polar/PolarModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport { AngleAxisModel, RadiusAxisModel } from '../../coord/polar/AxisModel.js';\nimport polarCreator from '../../coord/polar/polarCreator.js';\nimport AngleAxisView from '../axis/AngleAxisView.js';\nimport RadiusAxisView from '../axis/RadiusAxisView.js';\nimport ComponentView from '../../view/Component.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport barLayoutPolar from '../../layout/barPolar.js';\nvar angleAxisExtraOption = {\n  startAngle: 90,\n  clockwise: true,\n  splitNumber: 12,\n  axisLabel: {\n    rotate: 0\n  }\n};\nvar radiusAxisExtraOption = {\n  splitNumber: 5\n};\nvar PolarView = /** @class */function (_super) {\n  __extends(PolarView, _super);\n  function PolarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PolarView.type;\n    return _this;\n  }\n  PolarView.type = 'polar';\n  return PolarView;\n}(ComponentView);\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('PolarAxisPointer', PolarAxisPointer);\n  registers.registerCoordinateSystem('polar', polarCreator);\n  registers.registerComponentModel(PolarModel);\n  registers.registerComponentView(PolarView);\n  // Model and view for angleAxis and radiusAxis\n  axisModelCreator(registers, 'angle', AngleAxisModel, angleAxisExtraOption);\n  axisModelCreator(registers, 'radius', RadiusAxisModel, radiusAxisExtraOption);\n  registers.registerComponentView(AngleAxisView);\n  registers.registerComponentView(RadiusAxisView);\n  registers.registerLayout(curry(barLayoutPolar, 'bar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function layout(axisModel, opt) {\n  opt = opt || {};\n  var single = axisModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var axisPosition = axis.position;\n  var orient = axis.orient;\n  var rect = single.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var positionMap = {\n    horizontal: {\n      top: rectBound[2],\n      bottom: rectBound[3]\n    },\n    vertical: {\n      left: rectBound[0],\n      right: rectBound[1]\n    }\n  };\n  layout.position = [orient === 'vertical' ? positionMap.vertical[axisPosition] : rectBound[0], orient === 'horizontal' ? positionMap.horizontal[axisPosition] : rectBound[3]];\n  var r = {\n    horizontal: 0,\n    vertical: 1\n  };\n  layout.rotation = Math.PI / 2 * r[orient];\n  var directionMap = {\n    top: -1,\n    bottom: 1,\n    right: 1,\n    left: -1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = directionMap[axisPosition];\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  var labelRotation = opt.rotate;\n  labelRotation == null && (labelRotation = axisModel.get(['axisLabel', 'rotate']));\n  layout.labelRotation = axisPosition === 'top' ? -labelRotation : labelRotation;\n  layout.z2 = 1;\n  return layout;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper.js';\nimport AxisView from './AxisView.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine'];\nvar SingleAxisView = /** @class */function (_super) {\n  __extends(SingleAxisView, _super);\n  function SingleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleAxisView.type;\n    _this.axisPointerClass = 'SingleAxisPointer';\n    return _this;\n  }\n  SingleAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    var layout = singleAxisHelper.layout(axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    group.add(this._axisGroup);\n    group.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this.group, this._axisGroup, axisModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  SingleAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  SingleAxisView.type = 'singleAxis';\n  return SingleAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, group, axisGroup, axisModel) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var lineWidth = lineStyleModel.get('width');\n    var gridRect = axisModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var splitLines = [];\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    for (var i = 0; i < ticksCoords.length; ++i) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var line = new graphic.Line({\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineWidth);\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(line);\n    }\n    var lineStyle = lineStyleModel.getLineStyle(['color']);\n    for (var i = 0; i < splitLines.length; ++i) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  splitArea: function (axisView, group, axisGroup, axisModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, axisModel);\n  }\n};\nexport default SingleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar SingleAxisModel = /** @class */function (_super) {\n  __extends(SingleAxisModel, _super);\n  function SingleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleAxisModel.type;\n    return _this;\n  }\n  SingleAxisModel.prototype.getCoordSysModel = function () {\n    return this;\n  };\n  SingleAxisModel.type = 'singleAxis';\n  SingleAxisModel.layoutMode = 'box';\n  SingleAxisModel.defaultOption = {\n    left: '5%',\n    top: '5%',\n    right: '5%',\n    bottom: '5%',\n    type: 'value',\n    position: 'bottom',\n    orient: 'horizontal',\n    axisLine: {\n      show: true,\n      lineStyle: {\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // Single coordinate system and single axis is the,\n    // which is used as the parent tooltip model.\n    // same model, so we set default tooltip show as true.\n    tooltip: {\n      show: true\n    },\n    axisTick: {\n      show: true,\n      length: 6,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      interval: 'auto'\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        type: 'dashed',\n        opacity: 0.2\n      }\n    }\n  };\n  return SingleAxisModel;\n}(ComponentModel);\nmixin(SingleAxisModel, AxisModelCommonMixin.prototype);\nexport default SingleAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar SingleAxis = /** @class */function (_super) {\n  __extends(SingleAxis, _super);\n  function SingleAxis(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  /**\n   * Judge the orient of the axis.\n   */\n  SingleAxis.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  SingleAxis.prototype.pointToData = function (point, clamp) {\n    return this.coordinateSystem.pointToData(point)[0];\n  };\n  return SingleAxis;\n}(Axis);\nexport default SingleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Single coordinates system.\n */\nimport SingleAxis from './SingleAxis.js';\nimport * as axisHelper from '../axisHelper.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport var singleDimensions = ['single'];\n/**\n * Create a single coordinates system.\n */\nvar Single = /** @class */function () {\n  function Single(axisModel, ecModel, api) {\n    this.type = 'single';\n    this.dimension = 'single';\n    /**\n     * Add it just for draw tooltip.\n     */\n    this.dimensions = singleDimensions;\n    this.axisPointerEnabled = true;\n    this.model = axisModel;\n    this._init(axisModel, ecModel, api);\n  }\n  /**\n   * Initialize single coordinate system.\n   */\n  Single.prototype._init = function (axisModel, ecModel, api) {\n    var dim = this.dimension;\n    var axis = new SingleAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisModel.get('position'));\n    var isCategory = axis.type === 'category';\n    axis.onBand = isCategory && axisModel.get('boundaryGap');\n    axis.inverse = axisModel.get('inverse');\n    axis.orient = axisModel.get('orient');\n    axisModel.axis = axis;\n    axis.model = axisModel;\n    axis.coordinateSystem = this;\n    this._axis = axis;\n  };\n  /**\n   * Update axis scale after data processed\n   */\n  Single.prototype.update = function (ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.coordinateSystem === this) {\n        var data_1 = seriesModel.getData();\n        each(data_1.mapDimensionsAll(this.dimension), function (dim) {\n          this._axis.scale.unionExtentFromData(data_1, dim);\n        }, this);\n        axisHelper.niceScaleExtent(this._axis.scale, this._axis.model);\n      }\n    }, this);\n  };\n  /**\n   * Resize the single coordinate system.\n   */\n  Single.prototype.resize = function (axisModel, api) {\n    this._rect = getLayoutRect({\n      left: axisModel.get('left'),\n      top: axisModel.get('top'),\n      right: axisModel.get('right'),\n      bottom: axisModel.get('bottom'),\n      width: axisModel.get('width'),\n      height: axisModel.get('height')\n    }, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._adjustAxis();\n  };\n  Single.prototype.getRect = function () {\n    return this._rect;\n  };\n  Single.prototype._adjustAxis = function () {\n    var rect = this._rect;\n    var axis = this._axis;\n    var isHorizontal = axis.isHorizontal();\n    var extent = isHorizontal ? [0, rect.width] : [0, rect.height];\n    var idx = axis.inverse ? 1 : 0;\n    axis.setExtent(extent[idx], extent[1 - idx]);\n    this._updateAxisTransform(axis, isHorizontal ? rect.x : rect.y);\n  };\n  Single.prototype._updateAxisTransform = function (axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var extentSum = axisExtent[0] + axisExtent[1];\n    var isHorizontal = axis.isHorizontal();\n    axis.toGlobalCoord = isHorizontal ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = isHorizontal ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n  };\n  /**\n   * Get axis.\n   */\n  Single.prototype.getAxis = function () {\n    return this._axis;\n  };\n  /**\n   * Get axis, add it just for draw tooltip.\n   */\n  Single.prototype.getBaseAxis = function () {\n    return this._axis;\n  };\n  Single.prototype.getAxes = function () {\n    return [this._axis];\n  };\n  Single.prototype.getTooltipAxes = function () {\n    return {\n      baseAxes: [this.getAxis()],\n      // Empty otherAxes\n      otherAxes: []\n    };\n  };\n  /**\n   * If contain point.\n   */\n  Single.prototype.containPoint = function (point) {\n    var rect = this.getRect();\n    var axis = this.getAxis();\n    var orient = axis.orient;\n    if (orient === 'horizontal') {\n      return axis.contain(axis.toLocalCoord(point[0])) && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n    } else {\n      return axis.contain(axis.toLocalCoord(point[1])) && point[0] >= rect.y && point[0] <= rect.y + rect.height;\n    }\n  };\n  Single.prototype.pointToData = function (point) {\n    var axis = this.getAxis();\n    return [axis.coordToData(axis.toLocalCoord(point[axis.orient === 'horizontal' ? 0 : 1]))];\n  };\n  /**\n   * Convert the series data to concrete point.\n   * Can be [val] | val\n   */\n  Single.prototype.dataToPoint = function (val) {\n    var axis = this.getAxis();\n    var rect = this.getRect();\n    var pt = [];\n    var idx = axis.orient === 'horizontal' ? 0 : 1;\n    if (val instanceof Array) {\n      val = val[0];\n    }\n    pt[idx] = axis.toGlobalCoord(axis.dataToCoord(+val));\n    pt[1 - idx] = idx === 0 ? rect.y + rect.height / 2 : rect.x + rect.width / 2;\n    return pt;\n  };\n  Single.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n  Single.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n  return Single;\n}();\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var singleModel = finder.singleAxisModel;\n  return singleModel && singleModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\nexport default Single;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Single coordinate system creator.\n */\nimport Single, { singleDimensions } from './Single.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\n * Create single coordinate system and inject it into seriesModel.\n */\nfunction create(ecModel, api) {\n  var singles = [];\n  ecModel.eachComponent('singleAxis', function (axisModel, idx) {\n    var single = new Single(axisModel, ecModel, api);\n    single.name = 'single_' + idx;\n    single.resize(axisModel, api);\n    axisModel.coordinateSystem = single;\n    singles.push(single);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'singleAxis') {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = singleAxisModel && singleAxisModel.coordinateSystem;\n    }\n  });\n  return singles;\n}\nvar singleCreator = {\n  create: create,\n  dimensions: singleDimensions\n};\nexport default singleCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper.js';\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\nvar SingleAxisPointer = /** @class */function (_super) {\n  __extends(SingleAxisPointer, _super);\n  function SingleAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n  SingleAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var otherExtent = getGlobalExtent(coordSys, 1 - getPointDimIndex(axis));\n    var pixelValue = coordSys.dataToPoint(value)[0];\n    var axisPointerType = axisPointerModel.get('type');\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = singleAxisHelper.layout(axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(\n    // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n  SingleAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = singleAxisHelper.layout(axisModel, {\n      labelInside: false\n    });\n    // @ts-ignore\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var position = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: position[0],\n      y: position[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n  SingleAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var dimIndex = getPointDimIndex(axis);\n    var axisExtent = getGlobalExtent(coordSys, dimIndex);\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var otherExtent = getGlobalExtent(coordSys, 1 - dimIndex);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: {\n        verticalAlign: 'middle'\n      }\n    };\n  };\n  return SingleAxisPointer;\n}(BaseAxisPointer);\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getPointDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getPointDimIndex(axis))\n    };\n  }\n};\nfunction getPointDimIndex(axis) {\n  return axis.isHorizontal() ? 0 : 1;\n}\nfunction getGlobalExtent(coordSys, dimIndex) {\n  var rect = coordSys.getRect();\n  return [rect[XY[dimIndex]], rect[XY[dimIndex]] + rect[WH[dimIndex]]];\n}\nexport default SingleAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension.js';\nimport ComponentView from '../../view/Component.js';\nimport SingleAxisView from '../axis/SingleAxisView.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport SingleAxisModel from '../../coord/single/AxisModel.js';\nimport singleCreator from '../../coord/single/singleCreator.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport AxisView from '../axis/AxisView.js';\nimport SingleAxisPointer from '../axisPointer/SingleAxisPointer.js';\nvar SingleView = /** @class */function (_super) {\n  __extends(SingleView, _super);\n  function SingleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleView.type;\n    return _this;\n  }\n  SingleView.type = 'single';\n  return SingleView;\n}(ComponentView);\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\n  registers.registerComponentView(SingleView);\n  // Axis\n  registers.registerComponentView(SingleAxisView);\n  registers.registerComponentModel(SingleAxisModel);\n  axisModelCreator(registers, 'single', SingleAxisModel, SingleAxisModel.defaultOption);\n  registers.registerCoordinateSystem('single', singleCreator);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout.js';\nvar CalendarModel = /** @class */function (_super) {\n  __extends(CalendarModel, _super);\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.apply(this, arguments);\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isString, extend, map, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { formatTplSimple } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getLocaleModel } from '../../core/locale.js';\nvar CalendarView = /** @class */function (_super) {\n  __extends(CalendarView, _super);\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CalendarView.type;\n    return _this;\n  }\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem;\n    // range info\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient();\n    // locale\n    var localeModel = ecModel.getLocaleModel();\n    this._renderDayRect(calendarModel, rangeData, group);\n    // _renderLines must be called prior to following function\n    this._renderLines(calendarModel, rangeData, orient, group);\n    this._renderYearText(calendarModel, rangeData, orient, group);\n    this._renderMonthText(calendarModel, localeModel, orient, group);\n    this._renderWeekText(calendarModel, localeModel, rangeData, orient, group);\n  };\n  // render day rect\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl;\n      // every rect\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  };\n  // render separate line\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n      self._tlpoints.push(points[0]);\n      self._blpoints.push(points[points.length - 1]);\n      show && self._drawSplitline(points, lineStyleModel, group);\n    }\n    // render top/left line\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group);\n    // render bottom/right line\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  };\n  // get points at both ends\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1;\n    // both ends of the line are extend half lineWidth\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  };\n  // render split line\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  };\n  // render month line of one week points\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n    return points;\n  };\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (isString(formatter) && formatter) {\n      return formatTplSimple(formatter, params);\n    }\n    if (isFunction(formatter)) {\n      return formatter(params);\n    }\n    return params.nameMap;\n  };\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n    var rotate = 0;\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  };\n  // render year\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n    if (!yearLabel.get('show')) {\n      return;\n    }\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n    var content = this._formatterLabel(formatter, params);\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      })\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n    if (orient === 'horizontal') {\n      y = y + margin;\n      if (isCenter) {\n        align = 'center';\n      }\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  };\n  // render month and year text\n  CalendarView.prototype._renderMonthText = function (calendarModel, localeModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n    if (!monthLabel.get('show')) {\n      return;\n    }\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      }\n      // PENDING\n      // for ZH locale, original form is `` but current form is `1`\n      nameMap = localeModel.get(['time', 'monthAbbr']) || [];\n    }\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n      var content = this._formatterLabel(formatter, params);\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin))\n      });\n      group.add(monthText);\n    }\n  };\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  };\n  // render weeks\n  CalendarView.prototype._renderWeekText = function (calendarModel, localeModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n    if (!dayLabel.get('show')) {\n      return;\n    }\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      }\n      // Use the first letter of `dayOfWeekAbbr` if `dayOfWeekShort` doesn't exist in the locale file\n      var dayOfWeekShort = localeModel.get(['time', 'dayOfWeekShort']);\n      nameMap = dayOfWeekShort || map(localeModel.get(['time', 'dayOfWeekAbbr']), function (val) {\n        return val[0];\n      });\n    }\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize))\n      });\n      group.add(weekText);\n    }\n  };\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as layout from '../../util/layout.js';\nimport * as numberUtil from '../../util/number.js';\n// (24*60*60*1000)\nvar PROXIMATE_ONE_DAY = 86400000;\nvar Calendar = /** @class */function () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions;\n    // Required in createListFromData\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n    var cellSize = this._model.getCellSize().slice();\n    var layoutParams = this._model.getBoxLayoutParams();\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    }\n    // Has been calculated out number.\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate;\n    // if not in range return [NaN, NaN]\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n    var week = dayInfo.day;\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n    var normalizedRange;\n    // Convert [1990] to 1990\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString();\n      // One year.\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      }\n      // One month\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      }\n      // One day\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      }\n      // Not handling it.\n      return range;\n    }\n    var tmp = this._getRangeInfo(normalizedRange);\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1;\n    // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1);\n    // The bias can not over a month, so just compare date.\n    var dateNum = date.getDate();\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel.js';\nimport CalendarView from './CalendarView.js';\nimport Calendar from '../../coord/calendar/Calendar.js';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport { copyLayoutParams, mergeLayoutParam } from '../../util/layout.js';\n;\n;\n;\nexport function setKeyInfoToNewElOption(resultItem, newElOption) {\n  var existElOption = resultItem.existing;\n  // Set id and type after id assigned.\n  newElOption.id = resultItem.keyInfo.id;\n  !newElOption.type && existElOption && (newElOption.type = existElOption.type);\n  // Set parent id if not specified\n  if (newElOption.parentId == null) {\n    var newElParentOption = newElOption.parentOption;\n    if (newElParentOption) {\n      newElOption.parentId = newElParentOption.id;\n    } else if (existElOption) {\n      newElOption.parentId = existElOption.parentId;\n    }\n  }\n  // Clear\n  newElOption.parentOption = null;\n}\nfunction isSetLoc(obj, props) {\n  var isSet;\n  zrUtil.each(props, function (prop) {\n    obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\n  });\n  return isSet;\n}\nfunction mergeNewElOptionToExist(existList, index, newElOption) {\n  // Update existing options, for `getOption` feature.\n  var newElOptCopy = zrUtil.extend({}, newElOption);\n  var existElOption = existList[index];\n  var $action = newElOption.$action || 'merge';\n  if ($action === 'merge') {\n    if (existElOption) {\n      if (process.env.NODE_ENV !== 'production') {\n        var newType = newElOption.type;\n        zrUtil.assert(!newType || existElOption.type === newType, 'Please set $action: \"replace\" to change `type`');\n      }\n      // We can ensure that newElOptCopy and existElOption are not\n      // the same object, so `merge` will not change newElOptCopy.\n      zrUtil.merge(existElOption, newElOptCopy, true);\n      // Rigid body, use ignoreSize.\n      mergeLayoutParam(existElOption, newElOptCopy, {\n        ignoreSize: true\n      });\n      // Will be used in render.\n      copyLayoutParams(newElOption, existElOption);\n      // Copy transition info to new option so it can be used in the transition.\n      // DO IT AFTER merge\n      copyTransitionInfo(newElOption, existElOption);\n      copyTransitionInfo(newElOption, existElOption, 'shape');\n      copyTransitionInfo(newElOption, existElOption, 'style');\n      copyTransitionInfo(newElOption, existElOption, 'extra');\n      // Copy clipPath\n      newElOption.clipPath = existElOption.clipPath;\n    } else {\n      existList[index] = newElOptCopy;\n    }\n  } else if ($action === 'replace') {\n    existList[index] = newElOptCopy;\n  } else if ($action === 'remove') {\n    // null will be cleaned later.\n    existElOption && (existList[index] = null);\n  }\n}\nvar TRANSITION_PROPS_TO_COPY = ['transition', 'enterFrom', 'leaveTo'];\nvar ROOT_TRANSITION_PROPS_TO_COPY = TRANSITION_PROPS_TO_COPY.concat(['enterAnimation', 'updateAnimation', 'leaveAnimation']);\nfunction copyTransitionInfo(target, source, targetProp) {\n  if (targetProp) {\n    if (!target[targetProp] && source[targetProp]) {\n      // TODO avoid creating this empty object when there is no transition configuration.\n      target[targetProp] = {};\n    }\n    target = target[targetProp];\n    source = source[targetProp];\n  }\n  if (!target || !source) {\n    return;\n  }\n  var props = targetProp ? TRANSITION_PROPS_TO_COPY : ROOT_TRANSITION_PROPS_TO_COPY;\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n    if (target[prop] == null && source[prop] != null) {\n      target[prop] = source[prop];\n    }\n  }\n}\nfunction setLayoutInfoToExist(existItem, newElOption) {\n  if (!existItem) {\n    return;\n  }\n  existItem.hv = newElOption.hv = [\n  // Rigid body, don't care about `width`.\n  isSetLoc(newElOption, ['left', 'right']),\n  // Rigid body, don't care about `height`.\n  isSetLoc(newElOption, ['top', 'bottom'])];\n  // Give default group size. Otherwise layout error may occur.\n  if (existItem.type === 'group') {\n    var existingGroupOpt = existItem;\n    var newGroupOpt = newElOption;\n    existingGroupOpt.width == null && (existingGroupOpt.width = newGroupOpt.width = 0);\n    existingGroupOpt.height == null && (existingGroupOpt.height = newGroupOpt.height = 0);\n  }\n}\nvar GraphicComponentModel = /** @class */function (_super) {\n  __extends(GraphicComponentModel, _super);\n  function GraphicComponentModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphicComponentModel.type;\n    _this.preventAutoZ = true;\n    return _this;\n  }\n  GraphicComponentModel.prototype.mergeOption = function (option, ecModel) {\n    // Prevent default merge to elements\n    var elements = this.option.elements;\n    this.option.elements = null;\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this.option.elements = elements;\n  };\n  GraphicComponentModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    var newList = (isInit ? thisOption : newOption).elements;\n    var existList = thisOption.elements = isInit ? [] : thisOption.elements;\n    var flattenedList = [];\n    this._flatten(newList, flattenedList, null);\n    var mappingResult = modelUtil.mappingToExists(existList, flattenedList, 'normalMerge');\n    // Clear elOptionsToUpdate\n    var elOptionsToUpdate = this._elOptionsToUpdate = [];\n    zrUtil.each(mappingResult, function (resultItem, index) {\n      var newElOption = resultItem.newOption;\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(zrUtil.isObject(newElOption) || resultItem.existing, 'Empty graphic option definition');\n      }\n      if (!newElOption) {\n        return;\n      }\n      elOptionsToUpdate.push(newElOption);\n      setKeyInfoToNewElOption(resultItem, newElOption);\n      mergeNewElOptionToExist(existList, index, newElOption);\n      setLayoutInfoToExist(existList[index], newElOption);\n    }, this);\n    // Clean\n    thisOption.elements = zrUtil.filter(existList, function (item) {\n      // $action should be volatile, otherwise option gotten from\n      // `getOption` will contain unexpected $action.\n      item && delete item.$action;\n      return item != null;\n    });\n  };\n  /**\n   * Convert\n   * [{\n   *  type: 'group',\n   *  id: 'xx',\n   *  children: [{type: 'circle'}, {type: 'polygon'}]\n   * }]\n   * to\n   * [\n   *  {type: 'group', id: 'xx'},\n   *  {type: 'circle', parentId: 'xx'},\n   *  {type: 'polygon', parentId: 'xx'}\n   * ]\n   */\n  GraphicComponentModel.prototype._flatten = function (optionList, result, parentOption) {\n    zrUtil.each(optionList, function (option) {\n      if (!option) {\n        return;\n      }\n      if (parentOption) {\n        option.parentOption = parentOption;\n      }\n      result.push(option);\n      var children = option.children;\n      // here we don't judge if option.type is `group`\n      // when new option doesn't provide `type`, it will cause that the children can't be updated.\n      if (children && children.length) {\n        this._flatten(children, result, option);\n      }\n      // Deleting for JSON output, and for not affecting group creation.\n      delete option.children;\n    }, this);\n  };\n  // FIXME\n  // Pass to view using payload? setOption has a payload?\n  GraphicComponentModel.prototype.useElOptionsToUpdate = function () {\n    var els = this._elOptionsToUpdate;\n    // Clear to avoid render duplicately when zooming.\n    this._elOptionsToUpdate = null;\n    return els;\n  };\n  GraphicComponentModel.type = 'graphic';\n  GraphicComponentModel.defaultOption = {\n    elements: []\n    // parentId: null\n  };\n\n  return GraphicComponentModel;\n}(ComponentModel);\nexport { GraphicComponentModel };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isEC4CompatibleStyle, convertFromEC4CompatibleStyle } from '../../util/styleCompat.js';\nimport { applyLeaveTransition, applyUpdateTransition, isTransitionAll, updateLeaveTo } from '../../animation/customGraphicTransition.js';\nimport { updateProps } from '../../animation/basicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n};\nexport var inner = modelUtil.makeInner();\n// ------------------------\n// View\n// ------------------------\nvar GraphicComponentView = /** @class */function (_super) {\n  __extends(GraphicComponentView, _super);\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n    this._lastGraphicModel = graphicModel;\n    this._updateElements(graphicModel);\n    this._relocate(graphicModel, api);\n  };\n  /**\n   * Update graphic elements.\n   */\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n    if (!elOptionsToUpdate) {\n      return;\n    }\n    var elMap = this._elMap;\n    var rootGroup = this.group;\n    var globalZ = graphicModel.get('z');\n    var globalZLevel = graphicModel.get('zlevel');\n    // Top-down tranverse to assign graphic settings to each elements.\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n      if (elOptionStyle && isEC4CompatibleStyle(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = convertFromEC4CompatibleStyle(elOptionStyle, elType, true);\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      }\n      // Remove unnecessary props to avoid potential problems.\n      var elOptionCleaned = getCleanedElOption(elOption);\n      // For simple, do not support parent change, otherwise reorder is needed.\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n      var $action = elOption.$action || 'merge';\n      var isMerge = $action === 'merge';\n      var isReplace = $action === 'replace';\n      if (isMerge) {\n        var isInit = !elExisting;\n        var el_1 = elExisting;\n        if (isInit) {\n          el_1 = createEl(id, targetElParent, elOption.type, elMap);\n        } else {\n          el_1 && (inner(el_1).isNew = false);\n          // Stop and restore before update any other attributes.\n          stopPreviousKeyframeAnimationAndRestore(el_1);\n        }\n        if (el_1) {\n          applyUpdateTransition(el_1, elOptionCleaned, graphicModel, {\n            isInit: isInit\n          });\n          updateCommonAttrs(el_1, elOption, globalZ, globalZLevel);\n        }\n      } else if (isReplace) {\n        removeEl(elExisting, elOption, elMap, graphicModel);\n        var el_2 = createEl(id, targetElParent, elOption.type, elMap);\n        if (el_2) {\n          applyUpdateTransition(el_2, elOptionCleaned, graphicModel, {\n            isInit: true\n          });\n          updateCommonAttrs(el_2, elOption, globalZ, globalZLevel);\n        }\n      } else if ($action === 'remove') {\n        updateLeaveTo(elExisting, elOption);\n        removeEl(elExisting, elOption, elMap, graphicModel);\n      }\n      var el = elMap.get(id);\n      if (el && textContentOption) {\n        if (isMerge) {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if (isReplace) {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n      if (el) {\n        var clipPathOption = elOption.clipPath;\n        if (clipPathOption) {\n          var clipPathType = clipPathOption.type;\n          var clipPath = void 0;\n          var isInit = false;\n          if (isMerge) {\n            var oldClipPath = el.getClipPath();\n            isInit = !oldClipPath || inner(oldClipPath).type !== clipPathType;\n            clipPath = isInit ? newEl(clipPathType) : oldClipPath;\n          } else if (isReplace) {\n            isInit = true;\n            clipPath = newEl(clipPathType);\n          }\n          el.setClipPath(clipPath);\n          applyUpdateTransition(clipPath, clipPathOption, graphicModel, {\n            isInit: isInit\n          });\n          applyKeyframeAnimation(clipPath, clipPathOption.keyframeAnimation, graphicModel);\n        }\n        var elInner = inner(el);\n        el.setTextConfig(textConfig);\n        elInner.option = elOption;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n        applyKeyframeAnimation(el, elOption.keyframeAnimation, graphicModel);\n      }\n    });\n  };\n  /**\n   * Locate graphic elements.\n   */\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight();\n    var xy = ['x', 'y'];\n    // Top-down to calculate percentage width/height of group\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n      if (!el || !el.isGroup) {\n        continue;\n      }\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup;\n      // Like 'position:absolut' in css, default 0.\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.width = parsePercent(elInner.option.width, isParentRoot ? apiWidth : parentElInner.width) || 0;\n      elInner.height = parsePercent(elInner.option.height, isParentRoot ? apiHeight : parentElInner.height) || 0;\n    }\n    // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n      if (!el) {\n        continue;\n      }\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.width,\n        height: parentElInner.height\n      };\n      // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n      var layoutPos = {};\n      var layouted = layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      }, layoutPos);\n      if (!inner(el).isNew && layouted) {\n        var transition = elOption.transition;\n        var animatePos = {};\n        for (var k = 0; k < xy.length; k++) {\n          var key = xy[k];\n          var val = layoutPos[key];\n          if (transition && (isTransitionAll(transition) || zrUtil.indexOf(transition, key) >= 0)) {\n            animatePos[key] = val;\n          } else {\n            el[key] = val;\n          }\n        }\n        updateProps(el, animatePos, graphicModel, 0);\n      } else {\n        el.attr(layoutPos);\n      }\n    }\n  };\n  /**\n   * Clear all elements.\n   */\n  GraphicComponentView.prototype._clear = function () {\n    var _this = this;\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, inner(el).option, elMap, _this._lastGraphicModel);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(ComponentView);\nexport { GraphicComponentView };\nfunction newEl(graphicType) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n  var Clz = zrUtil.hasOwn(nonShapeGraphicElements, graphicType)\n  // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, \"graphic type \" + graphicType + \" can not be found\");\n  }\n  var el = new Clz({});\n  inner(el).type = graphicType;\n  return el;\n}\nfunction createEl(id, targetElParent, graphicType, elMap) {\n  var el = newEl(graphicType);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).id = id;\n  inner(el).isNew = true;\n  return el;\n}\nfunction removeEl(elExisting, elOption, elMap, graphicModel) {\n  var existElParent = elExisting && elExisting.parent;\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elOption, elMap, graphicModel);\n    });\n    applyLeaveTransition(elExisting, elOption, graphicModel);\n    elMap.removeKey(inner(elExisting).id);\n  }\n}\nfunction updateCommonAttrs(el, elOption, defaultZ, defaultZlevel) {\n  if (!el.isGroup) {\n    zrUtil.each([['cursor', Displayable.prototype.cursor],\n    // We should not support configure z and zlevel in the element level.\n    // But seems we didn't limit it previously. So here still use it to avoid breaking.\n    ['zlevel', defaultZlevel || 0], ['z', defaultZ || 0],\n    // z2 must not be null/undefined, otherwise sort error may occur.\n    ['z2', 0]], function (item) {\n      var prop = item[0];\n      if (zrUtil.hasOwn(elOption, prop)) {\n        el[prop] = zrUtil.retrieve2(elOption[prop], item[1]);\n      } else if (el[prop] == null) {\n        el[prop] = item[1];\n      }\n    });\n  }\n  zrUtil.each(zrUtil.keys(elOption), function (key) {\n    // Assign event handlers.\n    // PENDING: should enumerate all event names or use pattern matching?\n    if (key.indexOf('on') === 0) {\n      var val = elOption[key];\n      el[key] = zrUtil.isFunction(val) ? val : null;\n    }\n  });\n  if (zrUtil.hasOwn(elOption, 'draggable')) {\n    el.draggable = elOption.draggable;\n  }\n  // Other attributes\n  elOption.name != null && (el.name = elOption.name);\n  elOption.id != null && (el.id = elOption.id);\n}\n// Remove unnecessary props to avoid potential problems.\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent', 'clipPath'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = getECData(el).eventData;\n  // Simple optimize for large amount of elements that no need event.\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = getECData(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  }\n  // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { GraphicComponentModel } from './GraphicModel.js';\nimport { GraphicComponentView } from './GraphicView.js';\nexport function install(registers) {\n  registers.registerComponentModel(GraphicComponentModel);\n  registers.registerComponentView(GraphicComponentView);\n  registers.registerPreprocessor(function (option) {\n    var graphicOption = option.graphic;\n    // Convert\n    // {graphic: [{left: 10, type: 'circle'}, ...]}\n    // or\n    // {graphic: {left: 10, type: 'circle'}}\n    // to\n    // {graphic: [{elements: [{left: 10, type: 'circle'}, ...]}]}\n    if (isArray(graphicOption)) {\n      if (!graphicOption[0] || !graphicOption[0].elements) {\n        option.graphic = [{\n          elements: graphicOption\n        }];\n      } else {\n        // Only one graphic instance can be instantiated. (We don't\n        // want that too many views are created in echarts._viewMap.)\n        option.graphic = [option.graphic[0]];\n      }\n    } else if (graphicOption && !graphicOption.elements) {\n      option.graphic = [{\n        elements: [graphicOption]\n      }];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util.js';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single'];\n// Supported coords.\n// FIXME: polar has been broken (but rarely used).\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = [];\n  // Key: uid of dataZoomModel\n  var effectedModelMap = createHashMap();\n  // Find the dataZooms specified by payload.\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  });\n  // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n  var foundNewLink;\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    if (!axisModel) {\n      return;\n    }\n    var coordSysModel = axisModel.getCoordSysModel();\n    if (!coordSysModel) {\n      return;\n    }\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper.js';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model.js';\nvar DataZoomAxisInfo = /** @class */function () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n  return DataZoomAxisInfo;\n}();\nvar DataZoomModel = /** @class */function (_super) {\n  __extends(DataZoomModel, _super);\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption);\n    // FIX #2591\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option;\n    this._setDefaultThrottle(inputRawOption);\n    this._updateRangeUse(inputRawOption);\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      }\n      // Otherwise do nothing and use the merge result.\n    }, this);\n    this._resetTarget();\n  };\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING);\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occurred.\n      if (!refering.specified) {\n        return;\n      }\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true;\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    }\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n      if (!axisModel) {\n        return;\n      }\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false;\n      // Find parallel axes in the same grid.\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim;\n    // Find the first axis\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      }\n      // else remain its original setting.\n    });\n  };\n\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n    this._updateRangeUse(opt);\n  };\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n    // Find the first hosted axisProxy\n    var firstProxy;\n    var axisDimList = this._targetAxisInfoMap.keys();\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    }\n    // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n    return firstProxy;\n  };\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n    return this._orient;\n  };\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve those raw params from option, which will be cached separately,\n * because they will be overwritten by normalized/calculated values in the main\n * process.\n */\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nvar SelectDataZoomModel = /** @class */function (_super) {\n  __extends(SelectDataZoomModel, _super);\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar DataZoomView = /** @class */function (_super) {\n  __extends(DataZoomView, _super);\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nvar SelectDataZoomView = /** @class */function (_super) {\n  __extends(SelectDataZoomView, _super);\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper.js';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo.js';\nimport { getAxisMainType, isCoordSupported } from './helper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\nvar AxisProxy = /** @class */function () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel;\n    // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value'];\n      // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]);\n        // Use scale.parse to math round for category or time axis.\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue);\n        // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      }\n      // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n      // fallback to extent start/end when parsed value or percent is invalid\n      valueWindow[idx] = boundValue == null || isNaN(boundValue) ? dataExtent[idx] : boundValue;\n      percentWindow[idx] = boundPercent == null || isNaN(boundPercent) ? percentExtent[idx] : boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow);\n    // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we don't restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() is called,\n   * so it is recommended to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var targetSeries = this.getTargetSeriesModels();\n    // Culculate data window and data extent, and record them.\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries);\n    // `calculateDataWindow` uses min/maxSpan.\n    this._updateMinMaxSpan();\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow;\n    // Update axis setting then.\n    this._setAxisModel();\n  };\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n    if (filterMode === 'none') {\n      return;\n    }\n    // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n      if (!dataDims.length) {\n        return;\n      }\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          }\n          // If both left out and right out, do not filter.\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow;\n            // console.time('select');\n            seriesData.selectRange(range);\n            // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan));\n      // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n    if (!percentWindow) {\n      return;\n    }\n    // [0, 500]: arbitrary value, guess axis extent.\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20);\n    // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n    rawExtentInfo.freeze();\n  };\n  return AxisProxy;\n}();\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  });\n  // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { getAxisMainType } from './helper.js';\nimport AxisProxy from './AxisProxy.js';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    }\n    // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      });\n      // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor.js';\nimport installDataZoomAction from './dataZoomAction.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature = /** @class */function () {\n  function ToolboxFeature() {}\n  return ToolboxFeature;\n}();\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\nvar ToolboxModel = /** @class */function (_super) {\n  __extends(ToolboxModel, _super);\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getFont } from '../../label/labelStyle.js';\nvar ToolboxView = /** @class */function (_super) {\n  __extends(ToolboxView, _super);\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute();\n    // Keep for diff.\n    this._featureNames = featureNames;\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n      // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n          if (!Feature) {\n            return;\n          }\n          feature = new Feature();\n        }\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName];\n        // If feature does not exist.\n        if (!feature) {\n          return;\n        }\n      }\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n      createIconPaths(featureModel, feature, featureName);\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\n      // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\n        // Text position calculation\n        // TODO: extract `textStyle` from `iconStyle` and use `createTextStyle`\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null,\n            font: getFont({\n              fontStyle: iconStyleEmphasisModel.get('textFontStyle'),\n              fontFamily: iconStyleEmphasisModel.get('textFontFamily'),\n              fontSize: iconStyleEmphasisModel.get('textFontSize'),\n              fontWeight: iconStyleEmphasisModel.get('textFontWeight')\n            }, ecModel)\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle');\n          // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n    listComponentHelper.layout(group, toolboxModel, api);\n    // Render background after group is layout\n    // FIXME\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel));\n    // Adjust icon title positions to avoid them out of screen\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis');\n      // May be background element\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  };\n  // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n/* global window, document */\nvar SaveAsImage = /** @class */function (_super) {\n  __extends(SaveAsImage, _super);\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser;\n    // Chrome, Firefox, New Edge\n    if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    }\n    // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(',');\n        // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg\n        // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1];\n        // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n          var blob = new Blob([u8arr]); // @ts-ignore\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n  return SaveAsImage;\n}(ToolboxFeature);\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack'];\n// stack and tiled appears in pair for the title\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\nvar MagicType = /** @class */function (_super) {\n  __extends(MagicType, _super);\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n      },\n\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]);\n    // Not supported magicType\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n    var newOption = {\n      series: []\n    };\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      }\n      // Modify boundaryGap\n      var coordSys = seriesModel.coordinateSystem;\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type;\n    // Change title of stack\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n  return MagicType;\n}(ToolboxFeature);\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n};\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    // @ts-ignore TODO Polar\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    });\n    // Assemble table content\n    var lines = [headers.join(ITEM_SPLITER)];\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n      lines.push(items.join(ITEM_SPLITER));\n    }\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n  return {\n    series: series,\n    categories: categories\n  };\n}\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n    if (!line) {\n      continue;\n    }\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n  return {\n    name: seriesName,\n    data: data\n  };\n}\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\nvar DataView = /** @class */function (_super) {\n  __extends(DataView, _super);\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n    var root = document.createElement('div');\n    // use padding to avoid 5px whitespace\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff';\n    // Create elements\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style;\n      // eslint-disable-next-line max-len\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0';\n    // eslint-disable-next-line max-len\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n        close();\n        return;\n      }\n      var newOption;\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      }\n      // original data has name but new data has no name\n      var shouldDeleteName = original.name != null && newVal.name == null;\n      // Original data has option\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n}\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  // If previous dataZoom can not be found,\n  // complete an range with current range.\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop();\n  // Find top for all dataZoom.\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar RestoreOption = /** @class */function (_super) {\n  __extends(RestoreOption, _super);\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n  return RestoreOption;\n}(ToolboxFeature);\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js';\n// FIXME\n// how to genarialize to more coordinate systems.\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\nvar BrushTargetManager = /** @class */function () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange);\n      // area.coordRange is the first of area.coordRanges\n      if (!area.coordRange) {\n        area.coordRange = coordRange;\n        // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n      area.range = area.range || [];\n      // convert coordRange to global range and set panelId.\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId;\n        // (1) area.range should always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If return true, global found.\n   * Otherwise nothing found.\n   */\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  return BrushTargetManager;\n}();\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels;\n    // Remove duplicated.\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [\n// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n},\n// geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone();\n    // geo roam and zoom transform\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n}\n// We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO depends on DataZoom and Brush\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\nvar DataZoomFeature = /** @class */function (_super) {\n  __extends(DataZoomFeature, _super);\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n    var snapshot = {};\n    var ecModel = this.ecModel;\n    this._brushController.updateCovers([]); // remove cover\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n      var brushType = area.brushType;\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n    this._dispatchZoomAction(snapshot);\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\n      // Restrict range.\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n  ;\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = [];\n    // Convert from hash map to array.\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n  return DataZoomFeature;\n}(ToolboxFeature);\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  };\n  // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n  return setting;\n}\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js';\n// TODOD: REGISTER IN INSTALL\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nvar DEFAULT_TOOLBOX_BTNS = ['rect', 'polygon', 'keep', 'clear'];\nexport default function brushPreprocessor(option, isNew) {\n  var brushComponents = normalizeToArray(option ? option.brush : []);\n  if (!brushComponents.length) {\n    return;\n  }\n  var brushComponentSpecifiedBtns = [];\n  zrUtil.each(brushComponents, function (brushOpt) {\n    var tbs = brushOpt.hasOwnProperty('toolbox') ? brushOpt.toolbox : [];\n    if (tbs instanceof Array) {\n      brushComponentSpecifiedBtns = brushComponentSpecifiedBtns.concat(tbs);\n    }\n  });\n  var toolbox = option && option.toolbox;\n  if (zrUtil.isArray(toolbox)) {\n    toolbox = toolbox[0];\n  }\n  if (!toolbox) {\n    toolbox = {\n      feature: {}\n    };\n    option.toolbox = [toolbox];\n  }\n  var toolboxFeature = toolbox.feature || (toolbox.feature = {});\n  var toolboxBrush = toolboxFeature.brush || (toolboxFeature.brush = {});\n  var brushTypes = toolboxBrush.type || (toolboxBrush.type = []);\n  brushTypes.push.apply(brushTypes, brushComponentSpecifiedBtns);\n  removeDuplicate(brushTypes);\n  if (isNew && !brushTypes.length) {\n    brushTypes.push.apply(brushTypes, DEFAULT_TOOLBOX_BTNS);\n  }\n}\nfunction removeDuplicate(arr) {\n  var map = {};\n  zrUtil.each(arr, function (val) {\n    map[val] = 1;\n  });\n  arr.length = 0;\n  zrUtil.each(map, function (flag, val) {\n    arr.push(val);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as polygonContain from 'zrender/lib/contain/polygon.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { linePolygonIntersect } from '../../util/graphic.js';\nexport function makeBrushCommonSelectorForSeries(area) {\n  var brushType = area.brushType;\n  // Do not use function binding or curry for performance.\n  var selectors = {\n    point: function (itemLayout) {\n      return selector[brushType].point(itemLayout, selectors, area);\n    },\n    rect: function (itemLayout) {\n      return selector[brushType].rect(itemLayout, selectors, area);\n    }\n  };\n  return selectors;\n}\nvar selector = {\n  lineX: getLineSelectors(0),\n  lineY: getLineSelectors(1),\n  rect: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.intersect(itemLayout);\n    }\n  },\n  polygon: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]) && polygonContain.contain(area.range, itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      var points = area.range;\n      if (!itemLayout || points.length <= 1) {\n        return false;\n      }\n      var x = itemLayout.x;\n      var y = itemLayout.y;\n      var width = itemLayout.width;\n      var height = itemLayout.height;\n      var p = points[0];\n      if (polygonContain.contain(points, x, y) || polygonContain.contain(points, x + width, y) || polygonContain.contain(points, x, y + height) || polygonContain.contain(points, x + width, y + height) || BoundingRect.create(itemLayout).contain(p[0], p[1]) || linePolygonIntersect(x, y, x + width, y, points) || linePolygonIntersect(x, y, x, y + height, points) || linePolygonIntersect(x + width, y, x + width, y + height, points) || linePolygonIntersect(x, y + height, x + width, y + height, points)) {\n        return true;\n      }\n    }\n  }\n};\nfunction getLineSelectors(xyIndex) {\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  return {\n    point: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var p = itemLayout[xyIndex];\n        return inLineRange(p, range);\n      }\n    },\n    rect: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var layoutRange = [itemLayout[xy[xyIndex]], itemLayout[xy[xyIndex]] + itemLayout[wh[xyIndex]]];\n        layoutRange[1] < layoutRange[0] && layoutRange.reverse();\n        return inLineRange(layoutRange[0], range) || inLineRange(layoutRange[1], range) || inLineRange(range[0], layoutRange) || inLineRange(range[1], layoutRange);\n      }\n    }\n  };\n}\nfunction inLineRange(p, range) {\n  return range[0] <= p && p <= range[1];\n}\nexport default selector;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport { makeBrushCommonSelectorForSeries } from './selector.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport BrushTargetManager from '../helper/BrushTargetManager.js';\nvar STATE_LIST = ['inBrush', 'outOfBrush'];\nvar DISPATCH_METHOD = '__ecBrushSelect';\nvar DISPATCH_FLAG = '__ecInBrushSelectEvent';\n;\nexport function layoutCovers(ecModel) {\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    var brushTargetManager = brushModel.brushTargetManager = new BrushTargetManager(brushModel.option, ecModel);\n    brushTargetManager.setInputRanges(brushModel.areas, ecModel);\n  });\n}\n/**\n * Register the visual encoding if this modules required.\n */\nexport default function brushVisual(ecModel, api, payload) {\n  var brushSelected = [];\n  var throttleType;\n  var throttleDelay;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    payload && payload.type === 'takeGlobalCursor' && brushModel.setBrushOption(payload.key === 'brush' ? payload.brushOption : {\n      brushType: false\n    });\n  });\n  layoutCovers(ecModel);\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel, brushIndex) {\n    var thisBrushSelected = {\n      brushId: brushModel.id,\n      brushIndex: brushIndex,\n      brushName: brushModel.name,\n      areas: zrUtil.clone(brushModel.areas),\n      selected: []\n    };\n    // Every brush component exists in event params, convenient\n    // for user to find by index.\n    brushSelected.push(thisBrushSelected);\n    var brushOption = brushModel.option;\n    var brushLink = brushOption.brushLink;\n    var linkedSeriesMap = [];\n    var selectedDataIndexForLink = [];\n    var rangeInfoBySeries = [];\n    var hasBrushExists = false;\n    if (!brushIndex) {\n      // Only the first throttle setting works.\n      throttleType = brushOption.throttleType;\n      throttleDelay = brushOption.throttleDelay;\n    }\n    // Add boundingRect and selectors to range.\n    var areas = zrUtil.map(brushModel.areas, function (area) {\n      var builder = boundingRectBuilders[area.brushType];\n      var selectableArea = zrUtil.defaults({\n        boundingRect: builder ? builder(area) : void 0\n      }, area);\n      selectableArea.selectors = makeBrushCommonSelectorForSeries(selectableArea);\n      return selectableArea;\n    });\n    var visualMappings = visualSolution.createVisualMappings(brushModel.option, STATE_LIST, function (mappingOption) {\n      mappingOption.mappingMethod = 'fixed';\n    });\n    zrUtil.isArray(brushLink) && zrUtil.each(brushLink, function (seriesIndex) {\n      linkedSeriesMap[seriesIndex] = 1;\n    });\n    function linkOthers(seriesIndex) {\n      return brushLink === 'all' || !!linkedSeriesMap[seriesIndex];\n    }\n    // If no supported brush or no brush on the series,\n    // all visuals should be in original state.\n    function brushed(rangeInfoList) {\n      return !!rangeInfoList.length;\n    }\n    /**\n     * Logic for each series: (If the logic has to be modified one day, do it carefully!)\n     *\n     * ( brushed  && hasBrushExist  && linkOthers  ) => StepA: record,  StepB: visualByRecord.\n     *   !brushed    hasBrushExist                             nothing,        visualByRecord.\n     *                !hasBrushExist                                              nothing.\n     * ( !brushed  && hasBrushExist  && linkOthers  ) => StepA:  nothing,  StepB: visualByRecord.\n     *                !hasBrushExist                                              nothing.\n     * ( brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB: visualByCheck.\n     *   !brushed                                                                  nothing.\n     * ( !brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB:  nothing.\n     */\n    // Step A\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var rangeInfoList = rangeInfoBySeries[seriesIndex] = [];\n      seriesModel.subType === 'parallel' ? stepAParallel(seriesModel, seriesIndex) : stepAOthers(seriesModel, seriesIndex, rangeInfoList);\n    });\n    function stepAParallel(seriesModel, seriesIndex) {\n      var coordSys = seriesModel.coordinateSystem;\n      hasBrushExists = hasBrushExists || coordSys.hasAxisBrushed();\n      linkOthers(seriesIndex) && coordSys.eachActiveState(seriesModel.getData(), function (activeState, dataIndex) {\n        activeState === 'active' && (selectedDataIndexForLink[dataIndex] = 1);\n      });\n    }\n    function stepAOthers(seriesModel, seriesIndex, rangeInfoList) {\n      if (!seriesModel.brushSelector || brushModelNotControll(brushModel, seriesIndex)) {\n        return;\n      }\n      zrUtil.each(areas, function (area) {\n        if (brushModel.brushTargetManager.controlSeries(area, seriesModel, ecModel)) {\n          rangeInfoList.push(area);\n        }\n        hasBrushExists = hasBrushExists || brushed(rangeInfoList);\n      });\n      if (linkOthers(seriesIndex) && brushed(rangeInfoList)) {\n        var data_1 = seriesModel.getData();\n        data_1.each(function (dataIndex) {\n          if (checkInRange(seriesModel, rangeInfoList, data_1, dataIndex)) {\n            selectedDataIndexForLink[dataIndex] = 1;\n          }\n        });\n      }\n    }\n    // Step B\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var seriesBrushSelected = {\n        seriesId: seriesModel.id,\n        seriesIndex: seriesIndex,\n        seriesName: seriesModel.name,\n        dataIndex: []\n      };\n      // Every series exists in event params, convenient\n      // for user to find series by seriesIndex.\n      thisBrushSelected.selected.push(seriesBrushSelected);\n      var rangeInfoList = rangeInfoBySeries[seriesIndex];\n      var data = seriesModel.getData();\n      var getValueState = linkOthers(seriesIndex) ? function (dataIndex) {\n        return selectedDataIndexForLink[dataIndex] ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      } : function (dataIndex) {\n        return checkInRange(seriesModel, rangeInfoList, data, dataIndex) ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      };\n      // If no supported brush or no brush, all visuals are in original state.\n      (linkOthers(seriesIndex) ? hasBrushExists : brushed(rangeInfoList)) && visualSolution.applyVisual(STATE_LIST, visualMappings, data, getValueState);\n    });\n  });\n  dispatchAction(api, throttleType, throttleDelay, brushSelected, payload);\n}\n;\nfunction dispatchAction(api, throttleType, throttleDelay, brushSelected, payload) {\n  // This event will not be triggered when `setOpion`, otherwise dead lock may\n  // triggered when do `setOption` in event listener, which we do not find\n  // satisfactory way to solve yet. Some considered resolutions:\n  // (a) Diff with prevoius selected data ant only trigger event when changed.\n  // But store previous data and diff precisely (i.e., not only by dataIndex, but\n  // also detect value changes in selected data) might bring complexity or fragility.\n  // (b) Use spectial param like `silent` to suppress event triggering.\n  // But such kind of volatile param may be weird in `setOption`.\n  if (!payload) {\n    return;\n  }\n  var zr = api.getZr();\n  if (zr[DISPATCH_FLAG]) {\n    return;\n  }\n  if (!zr[DISPATCH_METHOD]) {\n    zr[DISPATCH_METHOD] = doDispatch;\n  }\n  var fn = throttleUtil.createOrUpdate(zr, DISPATCH_METHOD, throttleDelay, throttleType);\n  fn(api, brushSelected);\n}\nfunction doDispatch(api, brushSelected) {\n  if (!api.isDisposed()) {\n    var zr = api.getZr();\n    zr[DISPATCH_FLAG] = true;\n    api.dispatchAction({\n      type: 'brushSelect',\n      batch: brushSelected\n    });\n    zr[DISPATCH_FLAG] = false;\n  }\n}\nfunction checkInRange(seriesModel, rangeInfoList, data, dataIndex) {\n  for (var i = 0, len = rangeInfoList.length; i < len; i++) {\n    var area = rangeInfoList[i];\n    if (seriesModel.brushSelector(dataIndex, data, area.selectors, area)) {\n      return true;\n    }\n  }\n}\nfunction brushModelNotControll(brushModel, seriesIndex) {\n  var seriesIndices = brushModel.option.seriesIndex;\n  return seriesIndices != null && seriesIndices !== 'all' && (zrUtil.isArray(seriesIndices) ? zrUtil.indexOf(seriesIndices, seriesIndex) < 0 : seriesIndex !== seriesIndices);\n}\nvar boundingRectBuilders = {\n  rect: function (area) {\n    return getBoundingRectFromMinMax(area.range);\n  },\n  polygon: function (area) {\n    var minMax;\n    var range = area.range;\n    for (var i = 0, len = range.length; i < len; i++) {\n      minMax = minMax || [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var rg = range[i];\n      rg[0] < minMax[0][0] && (minMax[0][0] = rg[0]);\n      rg[0] > minMax[0][1] && (minMax[0][1] = rg[0]);\n      rg[1] < minMax[1][0] && (minMax[1][0] = rg[1]);\n      rg[1] > minMax[1][1] && (minMax[1][1] = rg[1]);\n    }\n    return minMax && getBoundingRectFromMinMax(minMax);\n  }\n};\nfunction getBoundingRectFromMinMax(minMax) {\n  return new BoundingRect(minMax[0][0], minMax[1][0], minMax[0][1] - minMax[0][0], minMax[1][1] - minMax[1][0]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../helper/BrushController.js';\nimport { layoutCovers } from './visualEncoding.js';\nimport ComponentView from '../../view/Component.js';\nvar BrushView = /** @class */function (_super) {\n  __extends(BrushView, _super);\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BrushView.type;\n    return _this;\n  }\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  };\n  // updateLayout: updateController,\n  // updateVisual: updateController,\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel);\n    // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\nexport default BrushView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport Model from '../../model/Model.js';\nimport ComponentModel from '../../model/Component.js';\nvar DEFAULT_OUT_OF_BRUSH_COLOR = '#ddd';\nvar BrushModel = /** @class */function (_super) {\n  __extends(BrushModel, _super);\n  function BrushModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BrushModel.type;\n    /**\n     * @readOnly\n     */\n    _this.areas = [];\n    /**\n     * Current brush painting area settings.\n     * @readOnly\n     */\n    _this.brushOption = {};\n    return _this;\n  }\n  BrushModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, ['inBrush', 'outOfBrush']);\n    var inBrush = thisOption.inBrush = thisOption.inBrush || {};\n    // Always give default visual, consider setOption at the second time.\n    thisOption.outOfBrush = thisOption.outOfBrush || {\n      color: DEFAULT_OUT_OF_BRUSH_COLOR\n    };\n    if (!inBrush.hasOwnProperty('liftZ')) {\n      // Bigger than the highlight z lift, otherwise it will\n      // be effected by the highlight z when brush.\n      inBrush.liftZ = 5;\n    }\n  };\n  /**\n   * If `areas` is null/undefined, range state remain.\n   */\n  BrushModel.prototype.setAreas = function (areas) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(zrUtil.isArray(areas));\n      zrUtil.each(areas, function (area) {\n        zrUtil.assert(area.brushType, 'Illegal areas');\n      });\n    }\n    // If areas is null/undefined, range state remain.\n    // This helps user to dispatchAction({type: 'brush'}) with no areas\n    // set but just want to get the current brush select info from a `brush` event.\n    if (!areas) {\n      return;\n    }\n    this.areas = zrUtil.map(areas, function (area) {\n      return generateBrushOption(this.option, area);\n    }, this);\n  };\n  /**\n   * Set the current painting brush option.\n   */\n  BrushModel.prototype.setBrushOption = function (brushOption) {\n    this.brushOption = generateBrushOption(this.option, brushOption);\n    this.brushType = this.brushOption.brushType;\n  };\n  BrushModel.type = 'brush';\n  BrushModel.dependencies = ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'];\n  BrushModel.defaultOption = {\n    seriesIndex: 'all',\n    brushType: 'rect',\n    brushMode: 'single',\n    transformable: true,\n    brushStyle: {\n      borderWidth: 1,\n      color: 'rgba(210,219,238,0.3)',\n      borderColor: '#D2DBEE'\n    },\n    throttleType: 'fixRate',\n    throttleDelay: 0,\n    removeOnClick: true,\n    z: 10000\n  };\n  return BrushModel;\n}(ComponentModel);\nfunction generateBrushOption(option, brushOption) {\n  return zrUtil.merge({\n    brushType: option.brushType,\n    brushMode: option.brushMode,\n    transformable: option.transformable,\n    brushStyle: new Model(option.brushStyle).getItemStyle(),\n    removeOnClick: option.removeOnClick,\n    z: option.z\n  }, brushOption, true);\n}\nexport default BrushModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\nvar BrushFeature = /** @class */function (_super) {\n  __extends(BrushFeature, _super);\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  ;\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n  ;\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n        /* eslint-enable */\n      },\n\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocaleModel().get(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n  return BrushFeature;\n}(ToolboxFeature);\nexport default BrushFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport brushPreprocessor from './preprocessor.js';\nimport BrushView from './BrushView.js';\nimport BrushModel from './BrushModel.js';\nimport brushVisual from './visualEncoding.js';\n// TODO\nimport BrushFeature from '../toolbox/feature/Brush.js';\nimport { registerFeature } from '../toolbox/featureManager.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerComponentView(BrushView);\n  registers.registerComponentModel(BrushModel);\n  registers.registerPreprocessor(brushPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, brushVisual);\n  registers.registerAction({\n    type: 'brush',\n    event: 'brush',\n    update: 'updateVisual'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'brush',\n      query: payload\n    }, function (brushModel) {\n      brushModel.setAreas(payload.areas);\n    });\n  });\n  /**\n   * payload: {\n   *      brushComponents: [\n   *          {\n   *              brushId,\n   *              brushIndex,\n   *              brushName,\n   *              series: [\n   *                  {\n   *                      seriesId,\n   *                      seriesIndex,\n   *                      seriesName,\n   *                      rawIndices: [21, 34, ...]\n   *                  },\n   *                  ...\n   *              ]\n   *          },\n   *          ...\n   *      ]\n   * }\n   */\n  registers.registerAction({\n    type: 'brushSelect',\n    event: 'brushSelected',\n    update: 'none'\n  }, noop);\n  registers.registerAction({\n    type: 'brushEnd',\n    event: 'brushEnd',\n    update: 'none'\n  }, noop);\n  registerFeature('brush', BrushFeature);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { each, isObject, clone } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model.js';\nvar TimelineModel = /** @class */function (_super) {\n  __extends(TimelineModel, _super);\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._initData();\n  };\n  /**\n   * @override\n   */\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this._initData();\n  };\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n    var count = this._data.count();\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n  TimelineModel.defaultOption = {\n    // zlevel: 0,                  // \n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar SliderTimelineModel = /** @class */function (_super) {\n  __extends(SliderTimelineModel, _super);\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n    },\n\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar TimelineView = /** @class */function (_super) {\n  __extends(TimelineView, _super);\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineView.type;\n    return _this;\n  }\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis.js';\n/**\n * Extend axis 2d\n */\nvar TimelineAxis = /** @class */function (_super) {\n  __extends(TimelineAxis, _super);\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n  return TimelineAxis;\n}(Axis);\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport * as layout from '../../util/layout.js';\nimport TimelineView from './TimelineView.js';\nimport TimelineAxis from './TimelineAxis.js';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as numberUtil from '../../util/number.js';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../../scale/Ordinal.js';\nimport TimeScale from '../../scale/Time.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../../util/model.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\nvar SliderTimelineView = /** @class */function (_super) {\n  __extends(SliderTimelineView, _super);\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n      var mainGroup_1 = this._createGroup('_mainGroup');\n      var labelGroup = this._createGroup('_labelGroup');\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n      this._position(layoutInfo_1, timelineModel);\n    }\n    this._doPlayStop();\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos;\n    // Auto label offset.\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    };\n    // Position\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap;\n    // Special label rotate.\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength;\n    // position[0] means left, position[1] means middle.\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n    var axisExtent = [xLeft, xRight];\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType);\n    // Customize scale. The `tickValue` is `dataIndex`.\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.calcNiceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var data = timelineModel.getData();\n    // Show all ticks, despite ignoring strategy.\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = [];\n    // The value is dataIndex, see the customized scale.\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n      _this._tickSymbols.push(el);\n    });\n  };\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var labelModel = axis.getLabelModel();\n    if (!labelModel.get('show')) {\n      return;\n    }\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the customized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n      _this._tickLabels.push(textEl);\n    });\n  };\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    };\n    // Reuse when exists, for animation and drag.\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n    this._currentPointer.markRedraw();\n    var progressLine = this._progressLine;\n    if (progressLine) {\n      progressLine.shape.x2 = toCoord;\n      progressLine.dirty();\n    }\n    var targetDataIndex = this._findNearestTick(toCoord);\n    var timelineModel = this.model;\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n    this._clearTimer();\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n    return graphic.applyTransform(vertex, trans, true);\n  };\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3]));\n  // TODO createIcon won't use style in opt.\n  if (style) {\n    icon.setStyle(style);\n  }\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n    callback && callback.onUpdate(symbol);\n  }\n  // Style\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle);\n  // Transform and events.\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt);\n  // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n  symbol.updateTransform();\n  return symbol;\n}\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util.js';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false);\n        // The timeline has played to the end, trigger event\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    }\n    // Set normalized currentIndex to payload.\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n    compatibleEC2(opt);\n  });\n}\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  };\n  // Compatible with ec2\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n  transferItem(opt);\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n    delete opt.controlPosition;\n  }\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n      transferItem(dataItem);\n    }\n  });\n}\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {});\n  // Transfer label out\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel.js';\nimport SliderTimelineView from './SliderTimelineView.js';\nimport { installTimelineAction } from './timelineAction.js';\nimport preprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n  return false;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport ComponentModel from '../../model/Component.js';\nimport { makeInner, defaultEmphasis } from '../../util/model.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n}\n// { [componentType]: MarkerModel }\nvar inner = makeInner();\nvar MarkerModel = /** @class */function (_super) {\n  __extends(MarkerModel, _super);\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkerModel.type;\n    /**\n     * If marker model is created by self from series\n     */\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\n   * @overrite\n   */\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._mergeOption(option, ecModel, false, true);\n  };\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\n   * @overrite\n   */\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel);\n          // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel,\n  // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkPointModel = /** @class */function (_super) {\n  __extends(MarkPointModel, _super);\n  function MarkPointModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkPointModel.type;\n    return _this;\n  }\n  MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkPointModel.type = 'markPoint';\n  MarkPointModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    // symbolRotate: 0,\n    // symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'inside'\n    },\n    itemStyle: {\n      borderWidth: 2\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return MarkPointModel;\n}(MarkerModel);\nexport default MarkPointModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../../util/number.js';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n}\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim /* , otherDataDim */);\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex);\n  // Make it simple, do not visit all stacked value to count precision.\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n  return [coordArr, coordArrValue];\n}\n// TODO Specified percent\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n */\nexport function dataTransform(seriesModel, item) {\n  if (!item) {\n    return;\n  }\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem;\n  var dims = coordSys && coordSys.dimensions;\n  // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n  if (!hasXAndY(item) && !isArray(item.coord) && isArray(dims)) {\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel);\n    // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n    item = clone(item);\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0];\n      // Force to use the value of calculated value.\n      // let item use the value without stack.\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      item.coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis];\n    }\n  }\n  // x y is provided\n  if (item.coord == null || !isArray(dims)) {\n    item.coord = [];\n  } else {\n    // Each coord support max, min, average\n    var coord = item.coord;\n    for (var i = 0; i < 2; i++) {\n      if (markerTypeCalculator[coord[i]]) {\n        coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n      }\n    }\n  }\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n  return ret;\n}\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var dimItem = seriesModel.getData().getDimensionInfo(dataDim);\n  return dimItem && dimItem.coordDim;\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n */\nexport function dataFilter(\n// Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function zoneFilter(\n// Currently only polar and cartesian has containData.\ncoordSys, item1, item2) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containZone && item1.coord && item2.coord && !hasXOrY(item1) && !hasXOrY(item2) ? coordSys.containZone(item1.coord, item2.coord) : true;\n}\nexport function createMarkerDimValueGetter(inCoordSys, dims) {\n  return inCoordSys ? function (item, dimName, dataIndex, dimIndex) {\n    var rawVal = dimIndex < 2\n    // x, y, radius, angle\n    ? item.coord && item.coord[dimIndex] : item.value;\n    return parseDataValue(rawVal, dims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dims[dimIndex]);\n  };\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { enterBlur, leaveBlur } from '../../util/states.js';\nvar inner = makeInner();\nvar MarkerView = /** @class */function (_super) {\n  __extends(MarkerView, _super);\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkerView.type;\n    return _this;\n  }\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n  MarkerView.prototype.toggleBlurSeries = function (seriesModelList, isBlur) {\n    var _this = this;\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            isBlur ? enterBlur(el) : leaveBlur(el);\n          }\n        });\n      }\n    });\n  };\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../../chart/helper/SymbolDraw.js';\nimport * as numberUtil from '../../util/number.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isFunction, map, filter, curry, extend } from 'zrender/lib/core/util.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    }\n    // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n    } else if (coordSys) {\n      var x = mpData.get(coordSys.dimensions[0], idx);\n      var y = mpData.get(coordSys.dimensions[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n    mpData.setItemLayout(idx, point);\n  });\n}\nvar MarkPointView = /** @class */function (_super) {\n  __extends(MarkPointView, _super);\n  function MarkPointView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkPointView.type;\n    return _this;\n  }\n  MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n  MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createData(coordSys, seriesModel, mpModel);\n    // FIXME\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbol = itemModel.getShallow('symbol');\n      var symbolSize = itemModel.getShallow('symbolSize');\n      var symbolRotate = itemModel.getShallow('symbolRotate');\n      var symbolOffset = itemModel.getShallow('symbolOffset');\n      var symbolKeepAspect = itemModel.getShallow('symbolKeepAspect');\n      // TODO: refactor needed: single data item should not support callback function\n      if (isFunction(symbol) || isFunction(symbolSize) || isFunction(symbolRotate) || isFunction(symbolOffset)) {\n        var rawIdx = mpModel.getRawValue(idx);\n        var dataParams = mpModel.getDataParams(idx);\n        if (isFunction(symbol)) {\n          symbol = symbol(rawIdx, dataParams);\n        }\n        if (isFunction(symbolSize)) {\n          // FIXME  ECharts 2.x2.x \n          symbolSize = symbolSize(rawIdx, dataParams);\n        }\n        if (isFunction(symbolRotate)) {\n          symbolRotate = symbolRotate(rawIdx, dataParams);\n        }\n        if (isFunction(symbolOffset)) {\n          symbolOffset = symbolOffset(rawIdx, dataParams);\n        }\n      }\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n      if (!style.fill) {\n        style.fill = color;\n      }\n      mpData.setItemVisual(idx, {\n        symbol: symbol,\n        symbolSize: symbolSize,\n        symbolRotate: symbolRotate,\n        symbolOffset: symbolOffset,\n        symbolKeepAspect: symbolKeepAspect,\n        style: style\n      });\n    });\n    // TODO Text are wrong\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group);\n    // Set host model for tooltip\n    // FIXME\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mpModel;\n      });\n    });\n    this.markKeep(symbolDraw);\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkPointView.type = 'markPoint';\n  return MarkPointView;\n}(MarkerView);\nfunction createData(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n  var mpData = new SeriesData(coordDimsInfos, mpModel);\n  var dataOpt = map(mpModel.get('data'), curry(markerHelper.dataTransform, seriesModel));\n  if (coordSys) {\n    dataOpt = filter(dataOpt, curry(markerHelper.dataFilter, coordSys));\n  }\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  mpData.initData(dataOpt, null, dimValueGetter);\n  return mpData;\n}\nexport default MarkPointView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkPointModel from './MarkPointModel.js';\nimport MarkPointView from './MarkPointView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkPointModel);\n  registers.registerComponentView(MarkPointView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markPoint')) {\n      // Make sure markPoint component is enabled\n      opt.markPoint = opt.markPoint || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkLineModel = /** @class */function (_super) {\n  __extends(MarkLineModel, _super);\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    // symbolRotate: 0,\n    symbolOffset: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\nexport default MarkLineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as markerHelper from './markerHelper.js';\nimport LineDraw from '../../chart/helper/LineDraw.js';\nimport MarkerView from './MarkerView.js';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getECData } from '../../util/innerStore.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isArray, retrieve, retrieve2, clone, extend, logError, merge, map, curry, filter, isNumber } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nvar inner = makeInner();\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median'\n    // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex;\n      // Normized to 2d data with start and end point\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n      if (precision >= 0 && isNumber(value)) {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])];\n  // Avoid line data type is extended by from(to) data type\n  normalizedItem[2].type = normalizedItem[2].type || null;\n  // Merge from option and to option into line option\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n}\n// If a markLine has one dim\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord;\n    // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    }\n    // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n      if (isInfinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInfinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n  data.setItemLayout(idx, point);\n}\nvar MarkLineView = /** @class */function (_super) {\n  __extends(MarkLineView, _super);\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to;\n        // Update visual and layout of from symbol and to symbol\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        });\n        // Update layout of line\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData;\n    // Line data for tooltip and formatter\n    mlModel.setData(lineData);\n    // TODO\n    // Functionally, `symbolSize` & `symbolOffset` can also be 2D array now.\n    // But the related logic and type definition are not finished yet.\n    // Finish it if required\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n    var symbolRotate = mlModel.get('symbolRotate');\n    var symbolOffset = mlModel.get('symbolOffset');\n    // TODO: support callback function like markPoint\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    }\n    if (!isArray(symbolRotate)) {\n      symbolRotate = [symbolRotate, symbolRotate];\n    }\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    }\n    // Update visual and layout of from symbol and to symbol\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    });\n    // Update visual and layout of line\n    lineData.each(function (idx) {\n      var lineStyle = lineData.getItemModel(idx).getModel('lineStyle').getLineStyle();\n      // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n      lineData.setItemVisual(idx, {\n        fromSymbolKeepAspect: fromData.getItemVisual(idx, 'symbolKeepAspect'),\n        fromSymbolOffset: fromData.getItemVisual(idx, 'symbolOffset'),\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolKeepAspect: toData.getItemVisual(idx, 'symbolKeepAspect'),\n        toSymbolOffset: toData.getItemVisual(idx, 'symbolOffset'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData);\n    // Set host model for tooltip\n    // FIXME\n    mlData.line.eachItemGraphicEl(function (el) {\n      getECData(el).dataModel = mlModel;\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n      data.setItemVisual(idx, {\n        symbolKeepAspect: itemModel.get('symbolKeepAspect'),\n        // `0` should be considered as a valid value, so use `retrieve2` instead of `||`\n        symbolOffset: retrieve2(itemModel.get('symbolOffset', true), symbolOffset[isFrom ? 0 : 1]),\n        symbolRotate: retrieve2(itemModel.get('symbolRotate', true), symbolRotate[isFrom ? 0 : 1]),\n        // TODO: when 2d array is supported, it should ignore parent\n        symbolSize: retrieve2(itemModel.get('symbolSize'), symbolSize[isFrom ? 0 : 1]),\n        symbol: retrieve2(itemModel.get('symbol', true), symbolType[isFrom ? 0 : 1]),\n        style: style\n      });\n    }\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n  var fromData = new SeriesData(coordDimsInfos, mlModel);\n  var toData = new SeriesData(coordDimsInfos, mlModel);\n  // No dimensions\n  var lineData = new SeriesData([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\nexport default MarkLineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkLineModel from './MarkLineModel.js';\nimport MarkLineView from './MarkLineView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markLine')) {\n      // Make sure markLine component is enabled\n      opt.markLine = opt.markLine || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkAreaModel = /** @class */function (_super) {\n  __extends(MarkAreaModel, _super);\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    // zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\nexport default MarkAreaModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO Optimize on polar\nimport * as colorUtil from 'zrender/lib/tool/color.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport { retrieve, mergeAll, map, curry, filter, extend, isString } from 'zrender/lib/core/util.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nvar inner = makeInner();\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  // item may be null\n  var item0 = item[0];\n  var item1 = item[1];\n  if (!item0 || !item1) {\n    return;\n  }\n  var lt = markerHelper.dataTransform(seriesModel, item0);\n  var rb = markerHelper.dataTransform(seriesModel, item1);\n  // FIXME make sure lt is less than rb\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity);\n  // Merge option into one\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n}\n// If a markArea has one dim\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]);\n}\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n  var item0 = {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  };\n  var item1 = {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  };\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n    // Directly returning true may also do the work,\n    // because markArea will not be shown automatically\n    // when it's not included in coordinate system.\n    // But filtering ahead can avoid keeping rendering markArea\n    // when there are too many of them.\n    return markerHelper.zoneFilter(coordSys, item0, item1);\n  }\n  return markerHelper.dataFilter(coordSys, item0) || markerHelper.dataFilter(coordSys, item1);\n}\n// dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Consider the case that user input the right-bottom point first\n      // Pick the larger x and y as 'x1' and 'y1'\n      var pointValue0 = data.getValues(['x0', 'y0'], idx);\n      var pointValue1 = data.getValues(['x1', 'y1'], idx);\n      var clampPointValue0 = coordSys.clampData(pointValue0);\n      var clampPointValue1 = coordSys.clampData(pointValue1);\n      var pointValue = [];\n      if (dims[0] === 'x0') {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue1[0] : pointValue0[0];\n      } else {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue0[0] : pointValue1[0];\n      }\n      if (dims[1] === 'y0') {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue1[1] : pointValue0[1];\n      } else {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue0[1] : pointValue1[1];\n      }\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(pointValue, dims, true);\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      if (isInfinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInfinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n  return point;\n}\nexport var dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\nvar MarkAreaView = /** @class */function (_super) {\n  __extends(MarkAreaView, _super);\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          });\n          // Layout\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel);\n    // Line data for tooltip and formatter\n    maModel.setData(areaData);\n    // Update visual and layout of line\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]);\n      // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n      if (!style.fill) {\n        style.fill = color;\n        if (isString(style.fill)) {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n      if (!style.stroke) {\n        style.stroke = color;\n      }\n      // Visual\n      areaData.setItemVisual(idx, 'style', style);\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: isString(style.fill) ? colorUtil.modifyAlpha(style.fill, 1) : '#000'\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      toggleHoverEmphasis(polygon, null, null, itemModel.get(['emphasis', 'disabled']));\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\nfunction createList(coordSys, seriesModel, maModel) {\n  var areaData;\n  var dataDims;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n  if (coordSys) {\n    var coordDimsInfos_1 = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n    dataDims = map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos_1[idx % 2].type\n      };\n    });\n    areaData = new SeriesData(dataDims, maModel);\n  } else {\n    dataDims = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new SeriesData(dataDims, maModel);\n  }\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    var rawVal = item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n    return parseDataValue(rawVal, dataDims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dataDims[dimIndex]);\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\nexport default MarkAreaView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkAreaModel from './MarkAreaModel.js';\nimport MarkAreaView from './MarkAreaView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar InsideZoomModel = /** @class */function (_super) {\n  __extends(InsideZoomModel, _super);\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util.js';\nimport { collectReferCoordSysModelInfo } from './helper.js';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  };\n  // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\n * This action will be throttled.\n */\nfunction dispatchAction(api, batch) {\n  if (!api.isDisposed()) {\n    api.dispatchAction({\n      type: 'dataZoom',\n      animation: {\n        easing: 'cubicOut',\n        duration: 100\n      },\n      batch: batch\n    });\n  }\n}\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType;\n  // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    }\n    // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (because it holds the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap());\n        // Notice these props might be changed each time for a single dataZoomModel.\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    });\n    // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as roams from './roams.js';\nimport { bind } from 'zrender/lib/core/util.js';\nvar InsideZoomView = /** @class */function (_super) {\n  __extends(InsideZoomView, _super);\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      return;\n    }\n    // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n    this.range = dataZoomModel.getPercentRange();\n    // Reset controllers.\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint;\n    // Restrict range.\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport InsideZoomModel from './InsideZoomModel.js';\nimport InsideZoomView from './InsideZoomView.js';\nimport { installDataZoomRoamProcessor } from './roams.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar SliderZoomModel = /** @class */function (_super) {\n  __extends(SliderZoomModel, _super);\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as throttle from '../../util/throttle.js';\nimport DataZoomView from './DataZoomView.js';\nimport { linearMap, asc, parsePercent } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol.js';\nimport { deprecateLog } from '../../util/log.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar Rect = graphic.Rect;\n// Constants\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100,\n  delay: 0\n};\nvar SliderZoomView = /** @class */function (_super) {\n  __extends(SliderZoomView, _super);\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api;\n    // A unique handler for each dataZoom component\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      this.group.removeAll();\n      return;\n    }\n    // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n    this._updateView();\n  };\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n    this._resetLocation();\n    this._resetInterval();\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n    this._renderBackground();\n    this._renderHandle();\n    this._renderDataShadow();\n    thisGroup.add(barGroup);\n    this._positionGroup();\n  };\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0;\n    // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n    var coordRect = this._findCoordRect();\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    // Default align by coordinate system rect.\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    };\n    // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option);\n    // Replace the placeholder value.\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient;\n    // Just use the first axis to determine mapping.\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse;\n    // Transform barGroup.\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    }\n    // Don't use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    });\n    // Position barGroup\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    }));\n    // Click panel, over shadow, below handles.\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n    barGroup.add(clickPanel);\n  };\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n    this._displayables.dataShadowSegs = [];\n    if (!info) {\n      return;\n    }\n    var size = this._size;\n    var oldSize = this._shadowSize || [];\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var candlestickDim = seriesModel.getShadowDim && seriesModel.getShadowDim();\n    var otherDim = candlestickDim && data.getDimensionInfo(candlestickDim) ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n    if (otherDim == null) {\n      return;\n    }\n    var polygonPts = this._shadowPolygonPts;\n    var polylinePts = this._shadowPolylinePts;\n    // Not re-render if data doesn't change.\n    if (data !== this._shadowData || otherDim !== this._shadowDim || size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n      var otherDataExtent_1 = data.getDataExtent(otherDim);\n      // Nice extent.\n      var otherOffset = (otherDataExtent_1[1] - otherDataExtent_1[0]) * 0.3;\n      otherDataExtent_1 = [otherDataExtent_1[0] - otherOffset, otherDataExtent_1[1] + otherOffset];\n      var otherShadowExtent_1 = [0, size[1]];\n      var thisShadowExtent = [0, size[0]];\n      var areaPoints_1 = [[size[0], 0], [0, 0]];\n      var linePoints_1 = [];\n      var step_1 = thisShadowExtent[1] / (data.count() - 1);\n      var thisCoord_1 = 0;\n      // Optimize for large data shadow\n      var stride_1 = Math.round(data.count() / size[0]);\n      var lastIsEmpty_1;\n      data.each([otherDim], function (value, index) {\n        if (stride_1 > 0 && index % stride_1) {\n          thisCoord_1 += step_1;\n          return;\n        }\n        // FIXME\n        // Should consider axis.min/axis.max when drawing dataShadow.\n        // FIXME\n        // list\n        var isEmpty = value == null || isNaN(value) || value === '';\n        // See #4235.\n        var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent_1, otherShadowExtent_1, true);\n        // Attempt to draw data shadow precisely when there are empty value.\n        if (isEmpty && !lastIsEmpty_1 && index) {\n          areaPoints_1.push([areaPoints_1[areaPoints_1.length - 1][0], 0]);\n          linePoints_1.push([linePoints_1[linePoints_1.length - 1][0], 0]);\n        } else if (!isEmpty && lastIsEmpty_1) {\n          areaPoints_1.push([thisCoord_1, 0]);\n          linePoints_1.push([thisCoord_1, 0]);\n        }\n        areaPoints_1.push([thisCoord_1, otherCoord]);\n        linePoints_1.push([thisCoord_1, otherCoord]);\n        thisCoord_1 += step_1;\n        lastIsEmpty_1 = isEmpty;\n      });\n      polygonPts = this._shadowPolygonPts = areaPoints_1;\n      polylinePts = this._shadowPolylinePts = linePoints_1;\n    }\n    this._shadowData = data;\n    this._shadowDim = otherDim;\n    this._shadowSize = [size[0], size[1]];\n    var dataZoomModel = this.dataZoomModel;\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: polygonPts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: polylinePts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    }\n    // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n      this._displayables.sliderGroup.add(group);\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n    if (showDataShadow === false) {\n      return;\n    }\n    // Find a representative series.\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler);\n    // Frame border.\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        // deprecated option\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    }));\n    // Left and right handle to resize\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this);\n    // Handle to move. Only visible when brushSelect is set true.\n    var actualMoveZone = filler;\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n    var viewExtent = this._getViewExtent();\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n    var viewExtend = this._getViewExtent();\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this);\n    // Filler\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    };\n    // Move handle\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent);\n      // Force update path on the invisible object\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    }\n    // update clip path of shadow.\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n    this._updateDataInfo(nonRealtime);\n  };\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', ''];\n    // FIXME\n    // dateformatterautoformatterec2 date.getAutoFormatter\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime\n        // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n    var valueStr = value == null || isNaN(value) ? ''\n    // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    })\n    // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\n   * @param showOrHide true: show, false: hide\n   */\n  SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide);\n    // Highlight move handle\n    displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true;\n    // For mobile device, prevent screen slider on the button.\n    eventTool.stop(event.event);\n    // Transform dx, dy to bar coordination.\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n    var realtime = this.dataZoomModel.get('realtime');\n    this._updateView(!realtime);\n    // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n    this._showDataInfo(false);\n    // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n    var changed = this._updateInterval('all', localPoint[0] - center);\n    this._updateView();\n    changed && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date();\n    // this._updateBrushRect(x, y);\n  };\n\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n    if (!brushRect) {\n      return;\n    }\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date();\n    // console.log(brushEndTime - this._brushStartTime);\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n    var viewExtend = this._getViewExtent();\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n    this._updateView();\n    this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\n   * This action will be throttled.\n   */\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid corresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n    return rect;\n  };\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // getOtherAxis\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SliderZoomModel from './SliderZoomModel.js';\nimport SliderZoomView from './SliderZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomInside } from './installDataZoomInside.js';\nimport { install as installDataZoomSlider } from './installDataZoomSlider.js';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js';\nimport { getDecalFromPalette } from '../model/mixin/palette.js';\nvar DEFAULT_OPTION = {\n  label: {\n    enabled: true\n  },\n  decal: {\n    show: false\n  }\n};\nvar inner = makeInner();\nvar decalPaletteScope = {};\nexport default function ariaVisual(ecModel, api) {\n  var ariaModel = ecModel.getModel('aria');\n  // See \"area enabled\" detection code in `GlobalModel.ts`.\n  if (!ariaModel.get('enabled')) {\n    return;\n  }\n  var defaultOption = zrUtil.clone(DEFAULT_OPTION);\n  zrUtil.merge(defaultOption.label, ecModel.getLocaleModel().get('aria'), false);\n  zrUtil.merge(ariaModel.option, defaultOption, false);\n  setDecal();\n  setLabel();\n  function setDecal() {\n    var decalModel = ariaModel.getModel('decal');\n    var useDecal = decalModel.get('show');\n    if (useDecal) {\n      // Each type of series use one scope.\n      // Pie and funnel are using different scopes.\n      var paletteScopeGroupByType_1 = zrUtil.createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        if (seriesModel.isColorBySeries()) {\n          return;\n        }\n        var decalScope = paletteScopeGroupByType_1.get(seriesModel.type);\n        if (!decalScope) {\n          decalScope = {};\n          paletteScopeGroupByType_1.set(seriesModel.type, decalScope);\n        }\n        inner(seriesModel).scope = decalScope;\n      });\n      ecModel.eachRawSeries(function (seriesModel) {\n        if (ecModel.isSeriesFiltered(seriesModel)) {\n          return;\n        }\n        if (zrUtil.isFunction(seriesModel.enableAriaDecal)) {\n          // Let series define how to use decal palette on data\n          seriesModel.enableAriaDecal();\n          return;\n        }\n        var data = seriesModel.getData();\n        if (!seriesModel.isColorBySeries()) {\n          var dataAll_1 = seriesModel.getRawData();\n          var idxMap_1 = {};\n          var decalScope_1 = inner(seriesModel).scope;\n          data.each(function (idx) {\n            var rawIdx = data.getRawIndex(idx);\n            idxMap_1[rawIdx] = idx;\n          });\n          var dataCount_1 = dataAll_1.count();\n          dataAll_1.each(function (rawIdx) {\n            var idx = idxMap_1[rawIdx];\n            var name = dataAll_1.getName(rawIdx) || rawIdx + '';\n            var paletteDecal = getDecalFromPalette(seriesModel.ecModel, name, decalScope_1, dataCount_1);\n            var specifiedDecal = data.getItemVisual(idx, 'decal');\n            data.setItemVisual(idx, 'decal', mergeDecal(specifiedDecal, paletteDecal));\n          });\n        } else {\n          var paletteDecal = getDecalFromPalette(seriesModel.ecModel, seriesModel.name, decalPaletteScope, ecModel.getSeriesCount());\n          var specifiedDecal = data.getVisual('decal');\n          data.setVisual('decal', mergeDecal(specifiedDecal, paletteDecal));\n        }\n        function mergeDecal(specifiedDecal, paletteDecal) {\n          // Merge decal from palette to decal from itemStyle.\n          // User do not need to specify all of the decal props.\n          var resultDecal = specifiedDecal ? zrUtil.extend(zrUtil.extend({}, paletteDecal), specifiedDecal) : paletteDecal;\n          resultDecal.dirty = true;\n          return resultDecal;\n        }\n      });\n    }\n  }\n  function setLabel() {\n    var labelLocale = ecModel.getLocaleModel().get('aria');\n    var labelModel = ariaModel.getModel('label');\n    labelModel.option = zrUtil.defaults(labelModel.option, labelLocale);\n    if (!labelModel.get('enabled')) {\n      return;\n    }\n    var dom = api.getZr().dom;\n    if (labelModel.get('description')) {\n      dom.setAttribute('aria-label', labelModel.get('description'));\n      return;\n    }\n    var seriesCnt = ecModel.getSeriesCount();\n    var maxDataCnt = labelModel.get(['data', 'maxCount']) || 10;\n    var maxSeriesCnt = labelModel.get(['series', 'maxCount']) || 10;\n    var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n    var ariaLabel;\n    if (seriesCnt < 1) {\n      // No series, no aria label\n      return;\n    } else {\n      var title = getTitle();\n      if (title) {\n        var withTitle = labelModel.get(['general', 'withTitle']);\n        ariaLabel = replace(withTitle, {\n          title: title\n        });\n      } else {\n        ariaLabel = labelModel.get(['general', 'withoutTitle']);\n      }\n      var seriesLabels_1 = [];\n      var prefix = seriesCnt > 1 ? labelModel.get(['series', 'multiple', 'prefix']) : labelModel.get(['series', 'single', 'prefix']);\n      ariaLabel += replace(prefix, {\n        seriesCount: seriesCnt\n      });\n      ecModel.eachSeries(function (seriesModel, idx) {\n        if (idx < displaySeriesCnt) {\n          var seriesLabel = void 0;\n          var seriesName = seriesModel.get('name');\n          var withName = seriesName ? 'withName' : 'withoutName';\n          seriesLabel = seriesCnt > 1 ? labelModel.get(['series', 'multiple', withName]) : labelModel.get(['series', 'single', withName]);\n          seriesLabel = replace(seriesLabel, {\n            seriesId: seriesModel.seriesIndex,\n            seriesName: seriesModel.get('name'),\n            seriesType: getSeriesTypeName(seriesModel.subType)\n          });\n          var data = seriesModel.getData();\n          if (data.count() > maxDataCnt) {\n            // Show part of data\n            var partialLabel = labelModel.get(['data', 'partialData']);\n            seriesLabel += replace(partialLabel, {\n              displayCnt: maxDataCnt\n            });\n          } else {\n            seriesLabel += labelModel.get(['data', 'allData']);\n          }\n          var middleSeparator_1 = labelModel.get(['data', 'separator', 'middle']);\n          var endSeparator_1 = labelModel.get(['data', 'separator', 'end']);\n          var dataLabels = [];\n          for (var i = 0; i < data.count(); i++) {\n            if (i < maxDataCnt) {\n              var name_1 = data.getName(i);\n              var value = data.getValues(i);\n              var dataLabel = labelModel.get(['data', name_1 ? 'withName' : 'withoutName']);\n              dataLabels.push(replace(dataLabel, {\n                name: name_1,\n                value: value.join(middleSeparator_1)\n              }));\n            }\n          }\n          seriesLabel += dataLabels.join(middleSeparator_1) + endSeparator_1;\n          seriesLabels_1.push(seriesLabel);\n        }\n      });\n      var separatorModel = labelModel.getModel(['series', 'multiple', 'separator']);\n      var middleSeparator = separatorModel.get('middle');\n      var endSeparator = separatorModel.get('end');\n      ariaLabel += seriesLabels_1.join(middleSeparator) + endSeparator;\n      dom.setAttribute('aria-label', ariaLabel);\n    }\n  }\n  function replace(str, keyValues) {\n    if (!zrUtil.isString(str)) {\n      return str;\n    }\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n  function getTitle() {\n    var title = ecModel.get('title');\n    if (title && title.length) {\n      title = title[0];\n    }\n    return title && title.text;\n  }\n  function getSeriesTypeName(type) {\n    var typeNames = ecModel.getLocaleModel().get(['series', 'typeNames']);\n    return typeNames[type] || typeNames.chart;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function ariaPreprocessor(option) {\n  if (!option || !option.aria) {\n    return;\n  }\n  var aria = option.aria;\n  // aria.show is deprecated and should use aria.enabled instead\n  if (aria.show != null) {\n    aria.enabled = aria.show;\n  }\n  aria.label = aria.label || {};\n  // move description, general, series, data to be under aria.label\n  zrUtil.each(['description', 'general', 'series', 'data'], function (name) {\n    if (aria[name] != null) {\n      aria.label[name] = aria[name];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ariaVisual from '../../visual/aria.js';\nimport ariaPreprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerPreprocessor(ariaPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.ARIA, ariaVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, isArray, map, isObject, isString, isRegExp, isArrayLike, hasOwn, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError, makePrintable } from './log.js';\nimport { getRawValueParser, createFilterComparator } from '../data/helper/dataValueHelper.js';\n;\nvar RELATIONAL_EXPRESSION_OP_ALIAS_MAP = {\n  value: 'eq',\n  // PENDING: not good for literal semantic?\n  '<': 'lt',\n  '<=': 'lte',\n  '>': 'gt',\n  '>=': 'gte',\n  '=': 'eq',\n  '!=': 'ne',\n  '<>': 'ne'\n  // Might be misleading for sake of the difference between '==' and '===',\n  // so don't support them.\n  // '==': 'eq',\n  // '===': 'seq',\n  // '!==': 'sne'\n  // PENDING: Whether support some common alias \"ge\", \"le\", \"neq\"?\n  // ge: 'gte',\n  // le: 'lte',\n  // neq: 'ne',\n};\n// type RelationalExpressionOpEvaluate = (tarVal: unknown, condVal: unknown) => boolean;\nvar RegExpEvaluator = /** @class */function () {\n  function RegExpEvaluator(rVal) {\n    // Support condVal: RegExp | string\n    var condValue = this._condVal = isString(rVal) ? new RegExp(rVal) : isRegExp(rVal) ? rVal : null;\n    if (condValue == null) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal regexp', rVal, 'in');\n      }\n      throwError(errMsg);\n    }\n  }\n  RegExpEvaluator.prototype.evaluate = function (lVal) {\n    var type = typeof lVal;\n    return isString(type) ? this._condVal.test(lVal) : isNumber(type) ? this._condVal.test(lVal + '') : false;\n  };\n  return RegExpEvaluator;\n}();\nvar ConstConditionInternal = /** @class */function () {\n  function ConstConditionInternal() {}\n  ConstConditionInternal.prototype.evaluate = function () {\n    return this.value;\n  };\n  return ConstConditionInternal;\n}();\nvar AndConditionInternal = /** @class */function () {\n  function AndConditionInternal() {}\n  AndConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n    for (var i = 0; i < children.length; i++) {\n      if (!children[i].evaluate()) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return AndConditionInternal;\n}();\nvar OrConditionInternal = /** @class */function () {\n  function OrConditionInternal() {}\n  OrConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].evaluate()) {\n        return true;\n      }\n    }\n    return false;\n  };\n  return OrConditionInternal;\n}();\nvar NotConditionInternal = /** @class */function () {\n  function NotConditionInternal() {}\n  NotConditionInternal.prototype.evaluate = function () {\n    return !this.child.evaluate();\n  };\n  return NotConditionInternal;\n}();\nvar RelationalConditionInternal = /** @class */function () {\n  function RelationalConditionInternal() {}\n  RelationalConditionInternal.prototype.evaluate = function () {\n    var needParse = !!this.valueParser;\n    // Call getValue with no `this`.\n    var getValue = this.getValue;\n    var tarValRaw = getValue(this.valueGetterParam);\n    var tarValParsed = needParse ? this.valueParser(tarValRaw) : null;\n    // Relational cond follow \"and\" logic internally.\n    for (var i = 0; i < this.subCondList.length; i++) {\n      if (!this.subCondList[i].evaluate(needParse ? tarValParsed : tarValRaw)) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return RelationalConditionInternal;\n}();\nfunction parseOption(exprOption, getters) {\n  if (exprOption === true || exprOption === false) {\n    var cond = new ConstConditionInternal();\n    cond.value = exprOption;\n    return cond;\n  }\n  var errMsg = '';\n  if (!isObjectNotArray(exprOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Illegal config. Expect a plain object but actually', exprOption);\n    }\n    throwError(errMsg);\n  }\n  if (exprOption.and) {\n    return parseAndOrOption('and', exprOption, getters);\n  } else if (exprOption.or) {\n    return parseAndOrOption('or', exprOption, getters);\n  } else if (exprOption.not) {\n    return parseNotOption(exprOption, getters);\n  }\n  return parseRelationalOption(exprOption, getters);\n}\nfunction parseAndOrOption(op, exprOption, getters) {\n  var subOptionArr = exprOption[op];\n  var errMsg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"and\"/\"or\" condition should only be `' + op + ': [...]` and must not be empty array.', 'Illegal condition:', exprOption);\n  }\n  if (!isArray(subOptionArr)) {\n    throwError(errMsg);\n  }\n  if (!subOptionArr.length) {\n    throwError(errMsg);\n  }\n  var cond = op === 'and' ? new AndConditionInternal() : new OrConditionInternal();\n  cond.children = map(subOptionArr, function (subOption) {\n    return parseOption(subOption, getters);\n  });\n  if (!cond.children.length) {\n    throwError(errMsg);\n  }\n  return cond;\n}\nfunction parseNotOption(exprOption, getters) {\n  var subOption = exprOption.not;\n  var errMsg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"not\" condition should only be `not: {}`.', 'Illegal condition:', exprOption);\n  }\n  if (!isObjectNotArray(subOption)) {\n    throwError(errMsg);\n  }\n  var cond = new NotConditionInternal();\n  cond.child = parseOption(subOption, getters);\n  if (!cond.child) {\n    throwError(errMsg);\n  }\n  return cond;\n}\nfunction parseRelationalOption(exprOption, getters) {\n  var errMsg = '';\n  var valueGetterParam = getters.prepareGetValue(exprOption);\n  var subCondList = [];\n  var exprKeys = keys(exprOption);\n  var parserName = exprOption.parser;\n  var valueParser = parserName ? getRawValueParser(parserName) : null;\n  for (var i = 0; i < exprKeys.length; i++) {\n    var keyRaw = exprKeys[i];\n    if (keyRaw === 'parser' || getters.valueGetterAttrMap.get(keyRaw)) {\n      continue;\n    }\n    var op = hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP, keyRaw) ? RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw] : keyRaw;\n    var condValueRaw = exprOption[keyRaw];\n    var condValueParsed = valueParser ? valueParser(condValueRaw) : condValueRaw;\n    var evaluator = createFilterComparator(op, condValueParsed) || op === 'reg' && new RegExpEvaluator(condValueParsed);\n    if (!evaluator) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal relational operation: \"' + keyRaw + '\" in condition:', exprOption);\n      }\n      throwError(errMsg);\n    }\n    subCondList.push(evaluator);\n  }\n  if (!subCondList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Relational condition must have at least one operator.', 'Illegal condition:', exprOption);\n    }\n    // No relational operator always disabled in case of dangers result.\n    throwError(errMsg);\n  }\n  var cond = new RelationalConditionInternal();\n  cond.valueGetterParam = valueGetterParam;\n  cond.valueParser = valueParser;\n  cond.getValue = getters.getValue;\n  cond.subCondList = subCondList;\n  return cond;\n}\nfunction isObjectNotArray(val) {\n  return isObject(val) && !isArrayLike(val);\n}\nvar ConditionalExpressionParsed = /** @class */function () {\n  function ConditionalExpressionParsed(exprOption, getters) {\n    this._cond = parseOption(exprOption, getters);\n  }\n  ConditionalExpressionParsed.prototype.evaluate = function () {\n    return this._cond.evaluate();\n  };\n  return ConditionalExpressionParsed;\n}();\n;\nexport function parseConditionalExpression(exprOption, getters) {\n  return new ConditionalExpressionParsed(exprOption, getters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression.js';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PENDING: enhance to filter by index rather than create new data\n  transform: function (params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicates it explicitly.\n    // For example, if no condition is specified by mistake, returning an empty result\n    // is better than returning the entire raw source for the user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function (exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n          throwError(errMsg);\n        }\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n          throwError(errMsg);\n        }\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function (param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = '';\n    // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n    var orderExprList = normalizeToArray(config);\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n      throwError(errMsg);\n    }\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n        throwError(errMsg_1);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n        throwError(errMsg_2);\n      }\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      var parser = parserName ? getRawValueParser(parserName) : null;\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    });\n    // TODO: support it?\n    var sourceFormat = upstream.sourceFormat;\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n      throwError(errMsg);\n    }\n    // Other upstream format are all array.\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n        var result = orderDef.comparator.evaluate(val0, val1);\n        if (result !== 0) {\n          return result;\n        }\n      }\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { filterTransform } from './filterTransform.js';\nimport { sortTransform } from './sortTransform.js';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","import { cubicSubdivide } from '../core/curve.js';\nimport PathProxy from '../core/PathProxy.js';\nvar CMD = PathProxy.CMD;\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArrayGroups = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArrayGroups.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArrayGroups.push(currentSubpath);\n    }\n    return bezierArrayGroups;\n}\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n    if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n        out.push(x3, y3);\n        return;\n    }\n    var PIXEL_DISTANCE = 2 / scale;\n    var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n    var dx = x3 - x0;\n    var dy = y3 - y0;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    dx /= d;\n    dy /= d;\n    var dx1 = x1 - x0;\n    var dy1 = y1 - y0;\n    var dx2 = x2 - x3;\n    var dy2 = y2 - y3;\n    var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n    var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n    if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n        out.push(x3, y3);\n        return;\n    }\n    var projLen1 = dx * dx1 + dy * dy1;\n    var projLen2 = -dx * dx2 - dy * dy2;\n    var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n    var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n    if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0\n        && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n        out.push(x3, y3);\n        return;\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n    cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n    adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n    adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\nexport function pathToPolygons(path, scale) {\n    var bezierArrayGroups = pathToBezierCurves(path);\n    var polygons = [];\n    scale = scale || 1;\n    for (var i = 0; i < bezierArrayGroups.length; i++) {\n        var beziers = bezierArrayGroups[i];\n        var polygon = [];\n        var x0 = beziers[0];\n        var y0 = beziers[1];\n        polygon.push(x0, y0);\n        for (var k = 2; k < beziers.length;) {\n            var x1 = beziers[k++];\n            var y1 = beziers[k++];\n            var x2 = beziers[k++];\n            var y2 = beziers[k++];\n            var x3 = beziers[k++];\n            var y3 = beziers[k++];\n            adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n            x0 = x3;\n            y0 = y3;\n        }\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n","import { fromPoints } from '../core/bbox.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Point from '../core/Point.js';\nimport { map } from '../core/util.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Sector from '../graphic/shape/Sector.js';\nimport { pathToPolygons } from './convertPath.js';\nimport { clonePath } from './path.js';\nfunction getDividingGrids(dimSize, rowDim, count) {\n    var rowSize = dimSize[rowDim];\n    var columnSize = dimSize[1 - rowDim];\n    var ratio = Math.abs(rowSize / columnSize);\n    var rowCount = Math.ceil(Math.sqrt(ratio * count));\n    var columnCount = Math.floor(count / rowCount);\n    if (columnCount === 0) {\n        columnCount = 1;\n        rowCount = count;\n    }\n    var grids = [];\n    for (var i = 0; i < rowCount; i++) {\n        grids.push(columnCount);\n    }\n    var currentCount = rowCount * columnCount;\n    var remained = count - currentCount;\n    if (remained > 0) {\n        for (var i = 0; i < remained; i++) {\n            grids[i % rowCount] += 1;\n        }\n    }\n    return grids;\n}\nfunction divideSector(sectorShape, count, outShapes) {\n    var r0 = sectorShape.r0;\n    var r = sectorShape.r;\n    var startAngle = sectorShape.startAngle;\n    var endAngle = sectorShape.endAngle;\n    var angle = Math.abs(endAngle - startAngle);\n    var arcLen = angle * r;\n    var deltaR = r - r0;\n    var isAngleRow = arcLen > Math.abs(deltaR);\n    var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n    var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            if (isAngleRow) {\n                newShape.startAngle = startAngle + rowSize * row;\n                newShape.endAngle = startAngle + rowSize * (row + 1);\n                newShape.r0 = r0 + columnSize * column;\n                newShape.r = r0 + columnSize * (column + 1);\n            }\n            else {\n                newShape.startAngle = startAngle + columnSize * column;\n                newShape.endAngle = startAngle + columnSize * (column + 1);\n                newShape.r0 = r0 + rowSize * row;\n                newShape.r = r0 + rowSize * (row + 1);\n            }\n            newShape.clockwise = sectorShape.clockwise;\n            newShape.cx = sectorShape.cx;\n            newShape.cy = sectorShape.cy;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction divideRect(rectShape, count, outShapes) {\n    var width = rectShape.width;\n    var height = rectShape.height;\n    var isHorizontalRow = width > height;\n    var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n    var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n    var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n    var rowDim = isHorizontalRow ? 'x' : 'y';\n    var columnDim = isHorizontalRow ? 'y' : 'x';\n    var rowSize = rectShape[rowSizeDim] / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = rectShape[columnSizeDim] / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            newShape[rowDim] = row * rowSize;\n            newShape[columnDim] = column * columnSize;\n            newShape[rowSizeDim] = rowSize;\n            newShape[columnSizeDim] = columnSize;\n            newShape.x += rectShape.x;\n            newShape.y += rectShape.y;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n}\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y;\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n    if (Math.abs(nmCrossProduct) < 1e-6) {\n        return null;\n    }\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n    if (p < 0 || p > 1) {\n        return null;\n    }\n    return new Point(p * mx + a1x, p * my + a1y);\n}\nfunction projPtOnLine(pt, lineA, lineB) {\n    var dir = new Point();\n    Point.sub(dir, lineB, lineA);\n    dir.normalize();\n    var dir2 = new Point();\n    Point.sub(dir2, pt, lineA);\n    var len = dir2.dot(dir);\n    return len;\n}\nfunction addToPoly(poly, pt) {\n    var last = poly[poly.length - 1];\n    if (last && last[0] === pt[0] && last[1] === pt[1]) {\n        return;\n    }\n    poly.push(pt);\n}\nfunction splitPolygonByLine(points, lineA, lineB) {\n    var len = points.length;\n    var intersections = [];\n    for (var i = 0; i < len; i++) {\n        var p0 = points[i];\n        var p1 = points[(i + 1) % len];\n        var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n        if (intersectionPt) {\n            intersections.push({\n                projPt: projPtOnLine(intersectionPt, lineA, lineB),\n                pt: intersectionPt,\n                idx: i\n            });\n        }\n    }\n    if (intersections.length < 2) {\n        return [{ points: points }, { points: points }];\n    }\n    intersections.sort(function (a, b) {\n        return a.projPt - b.projPt;\n    });\n    var splitPt0 = intersections[0];\n    var splitPt1 = intersections[intersections.length - 1];\n    if (splitPt1.idx < splitPt0.idx) {\n        var tmp = splitPt0;\n        splitPt0 = splitPt1;\n        splitPt1 = tmp;\n    }\n    var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n    var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n    var newPolyA = [splitPt0Arr];\n    var newPolyB = [splitPt1Arr];\n    for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n        addToPoly(newPolyA, points[i].slice());\n    }\n    addToPoly(newPolyA, splitPt1Arr);\n    addToPoly(newPolyA, splitPt0Arr);\n    for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n        addToPoly(newPolyB, points[i % len].slice());\n    }\n    addToPoly(newPolyB, splitPt0Arr);\n    addToPoly(newPolyB, splitPt1Arr);\n    return [{\n            points: newPolyA\n        }, {\n            points: newPolyB\n        }];\n}\nfunction binaryDividePolygon(polygonShape) {\n    var points = polygonShape.points;\n    var min = [];\n    var max = [];\n    fromPoints(points, min, max);\n    var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    var width = boundingRect.width;\n    var height = boundingRect.height;\n    var x = boundingRect.x;\n    var y = boundingRect.y;\n    var pt0 = new Point();\n    var pt1 = new Point();\n    if (width > height) {\n        pt0.x = pt1.x = x + width / 2;\n        pt0.y = y;\n        pt1.y = y + height;\n    }\n    else {\n        pt0.y = pt1.y = y + height / 2;\n        pt0.x = x;\n        pt1.x = x + width;\n    }\n    return splitPolygonByLine(points, pt0, pt1);\n}\nfunction binaryDivideRecursive(divider, shape, count, out) {\n    if (count === 1) {\n        out.push(shape);\n    }\n    else {\n        var mid = Math.floor(count / 2);\n        var sub = divider(shape);\n        binaryDivideRecursive(divider, sub[0], mid, out);\n        binaryDivideRecursive(divider, sub[1], count - mid, out);\n    }\n    return out;\n}\nexport function clone(path, count) {\n    var paths = [];\n    for (var i = 0; i < count; i++) {\n        paths.push(clonePath(path));\n    }\n    return paths;\n}\nfunction copyPathProps(source, target) {\n    target.setStyle(source.style);\n    target.z = source.z;\n    target.z2 = source.z2;\n    target.zlevel = source.zlevel;\n}\nfunction polygonConvert(points) {\n    var out = [];\n    for (var i = 0; i < points.length;) {\n        out.push([points[i++], points[i++]]);\n    }\n    return out;\n}\nexport function split(path, count) {\n    var outShapes = [];\n    var shape = path.shape;\n    var OutShapeCtor;\n    switch (path.type) {\n        case 'rect':\n            divideRect(shape, count, outShapes);\n            OutShapeCtor = Rect;\n            break;\n        case 'sector':\n            divideSector(shape, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        case 'circle':\n            divideSector({\n                r0: 0, r: shape.r, startAngle: 0, endAngle: Math.PI * 2,\n                cx: shape.cx, cy: shape.cy\n            }, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        default:\n            var m = path.getComputedTransform();\n            var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n            var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) { return polygonConvert(poly); });\n            var polygonCount = polygons.length;\n            if (polygonCount === 0) {\n                binaryDivideRecursive(binaryDividePolygon, {\n                    points: polygons[0]\n                }, count, outShapes);\n            }\n            else if (polygonCount === count) {\n                for (var i = 0; i < polygonCount; i++) {\n                    outShapes.push({\n                        points: polygons[i]\n                    });\n                }\n            }\n            else {\n                var totalArea_1 = 0;\n                var items = map(polygons, function (poly) {\n                    var min = [];\n                    var max = [];\n                    fromPoints(poly, min, max);\n                    var area = (max[1] - min[1]) * (max[0] - min[0]);\n                    totalArea_1 += area;\n                    return { poly: poly, area: area };\n                });\n                items.sort(function (a, b) { return b.area - a.area; });\n                var left = count;\n                for (var i = 0; i < polygonCount; i++) {\n                    var item = items[i];\n                    if (left <= 0) {\n                        break;\n                    }\n                    var selfCount = i === polygonCount - 1\n                        ? left\n                        : Math.ceil(item.area / totalArea_1 * count);\n                    if (selfCount < 0) {\n                        continue;\n                    }\n                    binaryDivideRecursive(binaryDividePolygon, {\n                        points: item.poly\n                    }, selfCount, outShapes);\n                    left -= selfCount;\n                }\n                ;\n            }\n            OutShapeCtor = Polygon;\n            break;\n    }\n    if (!OutShapeCtor) {\n        return clone(path, count);\n    }\n    var out = [];\n    for (var i = 0; i < outShapes.length; i++) {\n        var subPath = new OutShapeCtor();\n        subPath.setShape(outShapes[i]);\n        copyPathProps(path, subPath);\n        out.push(subPath);\n    }\n    return out;\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport Path from '../graphic/Path.js';\nimport { defaults, map } from '../core/util.js';\nimport { lerp } from '../core/vector.js';\nimport { clonePath } from './path.js';\nimport Transformable from '../core/Transformable.js';\nimport { split } from './dividePath.js';\nimport { pathToBezierCurves } from './convertPath.js';\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr[k] = newX1;\n                    tmpArr[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr.length; m++) {\n                        newToSubpathBezier[m] = tmpArr[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function isCombineMorphing(path) {\n    return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n    return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    var originalMethod = obj[savedMethodName] || obj[methodName];\n    if (!obj[savedMethodName]) {\n        obj[savedMethodName] = obj[methodName];\n    }\n    var replace = modifiers.replace;\n    var after = modifiers.after;\n    var before = modifiers.before;\n    obj[methodName] = function () {\n        var args = arguments;\n        var res;\n        before && before.apply(this, args);\n        if (replace) {\n            res = replace.apply(this, args);\n        }\n        else {\n            res = originalMethod.apply(this, args);\n        }\n        after && after.apply(this, args);\n        return res;\n    };\n}\nfunction restoreMethod(obj, methodName) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    if (obj[savedMethodName]) {\n        obj[methodName] = obj[savedMethodName];\n        obj[savedMethodName] = null;\n    }\n}\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n    for (var i = 0; i < bezierCurves.length; i++) {\n        var subBeziers = bezierCurves[i];\n        for (var k = 0; k < subBeziers.length;) {\n            var x = subBeziers[k];\n            var y = subBeziers[k + 1];\n            subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n            subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n        }\n    }\n}\nfunction prepareMorphPath(fromPath, toPath) {\n    var fromPathProxy = fromPath.getUpdatedPathProxy();\n    var toPathProxy = toPath.getUpdatedPathProxy();\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var fromPathTransform = fromPath.getComputedTransform();\n    var toPathTransform = toPath.getComputedTransform();\n    function updateIdentityTransform() {\n        this.transform = null;\n    }\n    fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n    toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n    saveAndModifyMethod(toPath, 'updateTransform', { replace: updateIdentityTransform });\n    toPath.transform = null;\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    var tmpArr = [];\n    saveAndModifyMethod(toPath, 'buildPath', { replace: function (path) {\n            var t = toPath.__morphT;\n            var onet = 1 - t;\n            var newCp = [];\n            for (var i = 0; i < morphingData.length; i++) {\n                var item = morphingData[i];\n                var from = item.from;\n                var to = item.to;\n                var angle = item.rotation * t;\n                var fromCp = item.fromCp;\n                var toCp = item.toCp;\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                lerp(newCp, fromCp, toCp, t);\n                for (var m = 0; m < from.length; m += 2) {\n                    var x0_1 = from[m];\n                    var y0_1 = from[m + 1];\n                    var x1 = to[m];\n                    var y1 = to[m + 1];\n                    var x = x0_1 * onet + x1 * t;\n                    var y = y0_1 * onet + y1 * t;\n                    tmpArr[m] = (x * ca - y * sa) + newCp[0];\n                    tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n                }\n                var x0 = tmpArr[0];\n                var y0 = tmpArr[1];\n                path.moveTo(x0, y0);\n                for (var m = 2; m < from.length;) {\n                    var x1 = tmpArr[m++];\n                    var y1 = tmpArr[m++];\n                    var x2 = tmpArr[m++];\n                    var y2 = tmpArr[m++];\n                    var x3 = tmpArr[m++];\n                    var y3 = tmpArr[m++];\n                    if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n                        path.lineTo(x3, y3);\n                    }\n                    else {\n                        path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    }\n                    x0 = x3;\n                    y0 = y3;\n                }\n            }\n        } });\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    prepareMorphPath(fromPath, toPath);\n    toPath.__morphT = 0;\n    function restoreToPath() {\n        restoreMethod(toPath, 'buildPath');\n        restoreMethod(toPath, 'updateTransform');\n        toPath.__morphT = -1;\n        toPath.createPathProxy();\n        toPath.dirtyShape();\n    }\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreToPath();\n            oldDone && oldDone();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n    var bits = 16;\n    x = (maxX === minX) ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n    y = (maxY === minY) ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n    var d = 0;\n    var tmp;\n    for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n        var rx = 0;\n        var ry = 0;\n        if ((x & s) > 0) {\n            rx = 1;\n        }\n        if ((y & s) > 0) {\n            ry = 1;\n        }\n        d += s * s * ((3 * rx) ^ ry);\n        if (ry === 0) {\n            if (rx === 1) {\n                x = s - 1 - x;\n                y = s - 1 - y;\n            }\n            tmp = x;\n            x = y;\n            y = tmp;\n        }\n    }\n    return d;\n}\nfunction sortPaths(pathList) {\n    var xMin = Infinity;\n    var yMin = Infinity;\n    var xMax = -Infinity;\n    var yMax = -Infinity;\n    var cps = map(pathList, function (path) {\n        var rect = path.getBoundingRect();\n        var m = path.getComputedTransform();\n        var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n        var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n        xMin = Math.min(x, xMin);\n        yMin = Math.min(y, yMin);\n        xMax = Math.max(x, xMax);\n        yMax = Math.max(y, yMax);\n        return [x, y];\n    });\n    var items = map(cps, function (cp, idx) {\n        return {\n            cp: cp,\n            z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n            path: pathList[idx]\n        };\n    });\n    return items.sort(function (a, b) { return a.z - b.z; }).map(function (item) { return item.path; });\n}\n;\nfunction defaultDividePath(param) {\n    return split(param.path, param.count);\n}\nfunction createEmptyReturn() {\n    return {\n        fromIndividuals: [],\n        toIndividuals: [],\n        count: 0\n    };\n}\nexport function combineMorph(fromList, toPath, animationOpts) {\n    var fromPathList = [];\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    addFromPath(fromList);\n    var separateCount = fromPathList.length;\n    if (!separateCount) {\n        return createEmptyReturn();\n    }\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    var toSubPathList = dividePath({\n        path: toPath, count: separateCount\n    });\n    if (toSubPathList.length !== separateCount) {\n        console.error('Invalid morphing: unmatched splitted path');\n        return createEmptyReturn();\n    }\n    fromPathList = sortPaths(fromPathList);\n    toSubPathList = sortPaths(toSubPathList);\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    var individualDelay = animationOpts.individualDelay;\n    var identityTransform = new Transformable();\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromPathList[i];\n        var to = toSubPathList[i];\n        to.parent = toPath;\n        to.copyTransform(identityTransform);\n        if (!individualDelay) {\n            prepareMorphPath(from, to);\n        }\n    }\n    toPath.__isCombineMorphing = true;\n    toPath.childrenRef = function () {\n        return toSubPathList;\n    };\n    function addToSubPathListToZr(zr) {\n        for (var i = 0; i < toSubPathList.length; i++) {\n            toSubPathList[i].addSelfToZr(zr);\n        }\n    }\n    saveAndModifyMethod(toPath, 'addSelfToZr', {\n        after: function (zr) {\n            addToSubPathListToZr(zr);\n        }\n    });\n    saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n        after: function (zr) {\n            for (var i = 0; i < toSubPathList.length; i++) {\n                toSubPathList[i].removeSelfFromZr(zr);\n            }\n        }\n    });\n    function restoreToPath() {\n        toPath.__isCombineMorphing = false;\n        toPath.__morphT = -1;\n        toPath.childrenRef = null;\n        restoreMethod(toPath, 'addSelfToZr');\n        restoreMethod(toPath, 'removeSelfFromZr');\n    }\n    var toLen = toSubPathList.length;\n    if (individualDelay) {\n        var animating_1 = toLen;\n        var eachDone = function () {\n            animating_1--;\n            if (animating_1 === 0) {\n                restoreToPath();\n                oldDone && oldDone();\n            }\n        };\n        for (var i = 0; i < toLen; i++) {\n            var indivdualAnimationOpts = individualDelay ? defaults({\n                delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n                done: eachDone\n            }, animationOpts) : animationOpts;\n            morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n        }\n    }\n    else {\n        toPath.__morphT = 0;\n        toPath.animateTo({\n            __morphT: 1\n        }, defaults({\n            during: function (p) {\n                for (var i = 0; i < toLen; i++) {\n                    var child = toSubPathList[i];\n                    child.__morphT = toPath.__morphT;\n                    child.dirtyShape();\n                }\n                oldDuring && oldDuring(p);\n            },\n            done: function () {\n                restoreToPath();\n                for (var i = 0; i < fromList.length; i++) {\n                    restoreMethod(fromList[i], 'updateTransform');\n                }\n                oldDone && oldDone();\n            }\n        }, animationOpts));\n    }\n    if (toPath.__zr) {\n        addToSubPathListToZr(toPath.__zr);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toSubPathList,\n        count: toLen\n    };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n    var toLen = toPathList.length;\n    var fromPathList = [];\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    if (isCombineMorphing(fromPath)) {\n        addFromPath(fromPath.childrenRef());\n        var fromLen = fromPathList.length;\n        if (fromLen < toLen) {\n            var k = 0;\n            for (var i = fromLen; i < toLen; i++) {\n                fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n            }\n        }\n        fromPathList.length = toLen;\n    }\n    else {\n        fromPathList = dividePath({ path: fromPath, count: toLen });\n        var fromPathTransform = fromPath.getComputedTransform();\n        for (var i = 0; i < fromPathList.length; i++) {\n            fromPathList[i].setLocalTransform(fromPathTransform);\n        }\n        if (fromPathList.length !== toLen) {\n            console.error('Invalid morphing: unmatched splitted path');\n            return createEmptyReturn();\n        }\n    }\n    fromPathList = sortPaths(fromPathList);\n    toPathList = sortPaths(toPathList);\n    var individualDelay = animationOpts.individualDelay;\n    for (var i = 0; i < toLen; i++) {\n        var indivdualAnimationOpts = individualDelay ? defaults({\n            delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n        }, animationOpts) : animationOpts;\n        morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathList.length\n    };\n}\nexport { split as defaultDividePath };\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { separateMorph, combineMorph, morphPath, isCombineMorphing } from 'zrender/lib/tool/morphPath.js';\nimport { Path } from '../util/graphic.js';\nimport { defaults, isArray } from 'zrender/lib/core/util.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { clonePath } from 'zrender/lib/tool/path.js';\nfunction isMultiple(elements) {\n  return isArray(elements[0]);\n}\nfunction prepareMorphBatches(one, many) {\n  var batches = [];\n  var batchCount = one.length;\n  for (var i = 0; i < batchCount; i++) {\n    batches.push({\n      one: one[i],\n      many: []\n    });\n  }\n  for (var i = 0; i < many.length; i++) {\n    var len = many[i].length;\n    var k = void 0;\n    for (k = 0; k < len; k++) {\n      batches[k % batchCount].many.push(many[i][k]);\n    }\n  }\n  var off = 0;\n  // If one has more paths than each one of many. average them.\n  for (var i = batchCount - 1; i >= 0; i--) {\n    if (!batches[i].many.length) {\n      var moveFrom = batches[off].many;\n      if (moveFrom.length <= 1) {\n        // Not enough\n        // Start from the first one.\n        if (off) {\n          off = 0;\n        } else {\n          return batches;\n        }\n      }\n      var len = moveFrom.length;\n      var mid = Math.ceil(len / 2);\n      batches[i].many = moveFrom.slice(mid, len);\n      batches[off].many = moveFrom.slice(0, mid);\n      off++;\n    }\n  }\n  return batches;\n}\nvar pathDividers = {\n  clone: function (params) {\n    var ret = [];\n    // Fitting the alpha\n    var approxOpacity = 1 - Math.pow(1 - params.path.style.opacity, 1 / params.count);\n    for (var i = 0; i < params.count; i++) {\n      var cloned = clonePath(params.path);\n      cloned.setStyle('opacity', approxOpacity);\n      ret.push(cloned);\n    }\n    return ret;\n  },\n  // Use the default divider\n  split: null\n};\nexport function applyMorphAnimation(from, to, divideShape, seriesModel, dataIndex, animateOtherProps) {\n  if (!from.length || !to.length) {\n    return;\n  }\n  var updateAnimationCfg = getAnimationConfig('update', seriesModel, dataIndex);\n  if (!(updateAnimationCfg && updateAnimationCfg.duration > 0)) {\n    return;\n  }\n  var animationDelay = seriesModel.getModel('universalTransition').get('delay');\n  var animationCfg = Object.assign({\n    // Need to setToFinal so the further calculation based on the style can be correct.\n    // Like emphasis color.\n    setToFinal: true\n  }, updateAnimationCfg);\n  var many;\n  var one;\n  if (isMultiple(from)) {\n    // manyToOne\n    many = from;\n    one = to;\n  }\n  if (isMultiple(to)) {\n    // oneToMany\n    many = to;\n    one = from;\n  }\n  function morphOneBatch(batch, fromIsMany, animateIndex, animateCount, forceManyOne) {\n    var batchMany = batch.many;\n    var batchOne = batch.one;\n    if (batchMany.length === 1 && !forceManyOne) {\n      // Is one to one\n      var batchFrom = fromIsMany ? batchMany[0] : batchOne;\n      var batchTo = fromIsMany ? batchOne : batchMany[0];\n      if (isCombineMorphing(batchFrom)) {\n        // Keep doing combine animation.\n        morphOneBatch({\n          many: [batchFrom],\n          one: batchTo\n        }, true, animateIndex, animateCount, true);\n      } else {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(animateIndex, animateCount)\n        }, animationCfg) : animationCfg;\n        morphPath(batchFrom, batchTo, individualAnimationCfg);\n        animateOtherProps(batchFrom, batchTo, batchFrom, batchTo, individualAnimationCfg);\n      }\n    } else {\n      var separateAnimationCfg = defaults({\n        dividePath: pathDividers[divideShape],\n        individualDelay: animationDelay && function (idx, count, fromPath, toPath) {\n          return animationDelay(idx + animateIndex, animateCount);\n        }\n      }, animationCfg);\n      var _a = fromIsMany ? combineMorph(batchMany, batchOne, separateAnimationCfg) : separateMorph(batchOne, batchMany, separateAnimationCfg),\n        fromIndividuals = _a.fromIndividuals,\n        toIndividuals = _a.toIndividuals;\n      var count = fromIndividuals.length;\n      for (var k = 0; k < count; k++) {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(k, count)\n        }, animationCfg) : animationCfg;\n        animateOtherProps(fromIndividuals[k], toIndividuals[k], fromIsMany ? batchMany[k] : batch.one, fromIsMany ? batch.one : batchMany[k], individualAnimationCfg);\n      }\n    }\n  }\n  var fromIsMany = many ? many === from\n  // Is one to one. If the path number not match. also needs do merge and separate morphing.\n  : from.length > to.length;\n  var morphBatches = many ? prepareMorphBatches(one, many) : prepareMorphBatches(fromIsMany ? to : from, [fromIsMany ? from : to]);\n  var animateCount = 0;\n  for (var i = 0; i < morphBatches.length; i++) {\n    animateCount += morphBatches[i].many.length;\n  }\n  var animateIndex = 0;\n  for (var i = 0; i < morphBatches.length; i++) {\n    morphOneBatch(morphBatches[i], fromIsMany, animateIndex, animateCount);\n    animateIndex += morphBatches[i].many.length;\n  }\n}\nexport function getPathList(elements) {\n  if (!elements) {\n    return [];\n  }\n  if (isArray(elements)) {\n    var pathList_1 = [];\n    for (var i = 0; i < elements.length; i++) {\n      pathList_1.push(getPathList(elements[i]));\n    }\n    return pathList_1;\n  }\n  var pathList = [];\n  elements.traverse(function (el) {\n    if (el instanceof Path && !el.disableMorphing && !el.invisible && !el.ignore) {\n      pathList.push(el);\n    }\n  });\n  return pathList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Universal transitions that can animate between any shapes(series) and any properties in any amounts.\nimport { SERIES_UNIVERSAL_TRANSITION_PROP } from '../model/Series.js';\nimport { createHashMap, each, map, filter, isArray, extend } from 'zrender/lib/core/util.js';\nimport { applyMorphAnimation, getPathList } from './morphTransitionHelper.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { initProps } from '../util/graphic.js';\nimport DataDiffer from '../data/DataDiffer.js';\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { warn } from '../util/log.js';\nimport { getAnimationConfig, getOldStyle } from './basicTransition.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nvar DATA_COUNT_THRESHOLD = 1e4;\nvar TRANSITION_NONE = 0;\nvar TRANSITION_P2C = 1;\nvar TRANSITION_C2P = 2;\n;\nvar getUniversalTransitionGlobalStore = makeInner();\nfunction getDimension(data, visualDimension) {\n  var dimensions = data.dimensions;\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimInfo = data.getDimensionInfo(dimensions[i]);\n    if (dimInfo && dimInfo.otherDims[visualDimension] === 0) {\n      return dimensions[i];\n    }\n  }\n}\n// get value by dimension. (only get value of itemGroupId or childGroupId, so convert it to string)\nfunction getValueByDimension(data, dataIndex, dimension) {\n  var dimInfo = data.getDimensionInfo(dimension);\n  var dimOrdinalMeta = dimInfo && dimInfo.ordinalMeta;\n  if (dimInfo) {\n    var value = data.get(dimInfo.name, dataIndex);\n    if (dimOrdinalMeta) {\n      return dimOrdinalMeta.categories[value] || value + '';\n    }\n    return value + '';\n  }\n}\nfunction getGroupId(data, dataIndex, dataGroupId, isChild) {\n  // try to get groupId from encode\n  var visualDimension = isChild ? 'itemChildGroupId' : 'itemGroupId';\n  var groupIdDim = getDimension(data, visualDimension);\n  if (groupIdDim) {\n    var groupId = getValueByDimension(data, dataIndex, groupIdDim);\n    return groupId;\n  }\n  // try to get groupId from raw data item\n  var rawDataItem = data.getRawDataItem(dataIndex);\n  var property = isChild ? 'childGroupId' : 'groupId';\n  if (rawDataItem && rawDataItem[property]) {\n    return rawDataItem[property] + '';\n  }\n  // fallback\n  if (isChild) {\n    return;\n  }\n  // try to use series.dataGroupId as groupId, otherwise use dataItem's id as groupId\n  return dataGroupId || data.getId(dataIndex);\n}\n// flatten all data items from different serieses into one arrary\nfunction flattenDataDiffItems(list) {\n  var items = [];\n  each(list, function (seriesInfo) {\n    var data = seriesInfo.data;\n    var dataGroupId = seriesInfo.dataGroupId;\n    if (data.count() > DATA_COUNT_THRESHOLD) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Universal transition is disabled on large data > 10k.');\n      }\n      return;\n    }\n    var indices = data.getIndices();\n    for (var dataIndex = 0; dataIndex < indices.length; dataIndex++) {\n      items.push({\n        data: data,\n        groupId: getGroupId(data, dataIndex, dataGroupId, false),\n        childGroupId: getGroupId(data, dataIndex, dataGroupId, true),\n        divide: seriesInfo.divide,\n        dataIndex: dataIndex\n      });\n    }\n  });\n  return items;\n}\nfunction fadeInElement(newEl, newSeries, newIndex) {\n  newEl.traverse(function (el) {\n    if (el instanceof Path) {\n      // TODO use fade in animation for target element.\n      initProps(el, {\n        style: {\n          opacity: 0\n        }\n      }, newSeries, {\n        dataIndex: newIndex,\n        isFrom: true\n      });\n    }\n  });\n}\nfunction removeEl(el) {\n  if (el.parent) {\n    // Bake parent transform to element.\n    // So it can still have proper transform to transition after it's removed.\n    var computedTransform = el.getComputedTransform();\n    el.setLocalTransform(computedTransform);\n    el.parent.remove(el);\n  }\n}\nfunction stopAnimation(el) {\n  el.stopAnimation();\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.stopAnimation();\n    });\n  }\n}\nfunction animateElementStyles(el, dataIndex, seriesModel) {\n  var animationConfig = getAnimationConfig('update', seriesModel, dataIndex);\n  animationConfig && el.traverse(function (child) {\n    if (child instanceof Displayable) {\n      var oldStyle = getOldStyle(child);\n      if (oldStyle) {\n        child.animateFrom({\n          style: oldStyle\n        }, animationConfig);\n      }\n    }\n  });\n}\nfunction isAllIdSame(oldDiffItems, newDiffItems) {\n  var len = oldDiffItems.length;\n  if (len !== newDiffItems.length) {\n    return false;\n  }\n  for (var i = 0; i < len; i++) {\n    var oldItem = oldDiffItems[i];\n    var newItem = newDiffItems[i];\n    if (oldItem.data.getId(oldItem.dataIndex) !== newItem.data.getId(newItem.dataIndex)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction transitionBetween(oldList, newList, api) {\n  var oldDiffItems = flattenDataDiffItems(oldList);\n  var newDiffItems = flattenDataDiffItems(newList);\n  function updateMorphingPathProps(from, to, rawFrom, rawTo, animationCfg) {\n    if (rawFrom || from) {\n      to.animateFrom({\n        style: rawFrom && rawFrom !== from\n        // dividingMethod like clone may override the style(opacity)\n        // So extend it to raw style.\n        ? extend(extend({}, rawFrom.style), from.style) : from.style\n      }, animationCfg);\n    }\n  }\n  var hasMorphAnimation = false;\n  /**\n   * With groupId and childGroupId, we can build parent-child relationships between dataItems.\n   * However, we should mind the parent-child \"direction\" between old and new options.\n   *\n   * For example, suppose we have two dataItems from two series.data:\n   *\n   * dataA: [                          dataB: [\n   *   {                                 {\n   *     value: 5,                         value: 3,\n   *     groupId: 'creatures',             groupId: 'animals',\n   *     childGroupId: 'animals'           childGroupId: 'dogs'\n   *   },                                },\n   *   ...                               ...\n   * ]                                 ]\n   *\n   * where dataA is belong to optionA and dataB is belong to optionB.\n   *\n   * When we `setOption(optionB)` from optionA, we choose childGroupId of dataItemA and groupId of\n   * dataItemB as keys so the two keys are matched (both are 'animals'), then universalTransition\n   * will work. This derection is \"parent -> child\".\n   *\n   * If we `setOption(optionA)` from optionB, we also choose groupId of dataItemB and childGroupId\n   * of dataItemA as keys and universalTransition will work. This derection is \"child -> parent\".\n   *\n   * If there is no childGroupId specified, which means no multiLevelDrillDown/Up is needed and no\n   * parent-child relationship exists. This direction is \"none\".\n   *\n   * So we need to know whether to use groupId or childGroupId as the key when we call the keyGetter\n   * functions. Thus, we need to decide the direction first.\n   *\n   * The rule is:\n   *\n   * if (all childGroupIds in oldDiffItems and all groupIds in newDiffItems have common value) {\n   *   direction = 'parent -> child';\n   * } else if (all groupIds in oldDiffItems and all childGroupIds in newDiffItems have common value) {\n   *   direction = 'child -> parent';\n   * } else {\n   *   direction = 'none';\n   * }\n   */\n  var direction = TRANSITION_NONE;\n  // find all groupIds and childGroupIds from oldDiffItems\n  var oldGroupIds = createHashMap();\n  var oldChildGroupIds = createHashMap();\n  oldDiffItems.forEach(function (item) {\n    item.groupId && oldGroupIds.set(item.groupId, true);\n    item.childGroupId && oldChildGroupIds.set(item.childGroupId, true);\n  });\n  // traverse newDiffItems and decide the direction according to the rule\n  for (var i = 0; i < newDiffItems.length; i++) {\n    var newGroupId = newDiffItems[i].groupId;\n    if (oldChildGroupIds.get(newGroupId)) {\n      direction = TRANSITION_P2C;\n      break;\n    }\n    var newChildGroupId = newDiffItems[i].childGroupId;\n    if (newChildGroupId && oldGroupIds.get(newChildGroupId)) {\n      direction = TRANSITION_C2P;\n      break;\n    }\n  }\n  function createKeyGetter(isOld, onlyGetId) {\n    return function (diffItem) {\n      var data = diffItem.data;\n      var dataIndex = diffItem.dataIndex;\n      // TODO if specified dim\n      if (onlyGetId) {\n        return data.getId(dataIndex);\n      }\n      if (isOld) {\n        return direction === TRANSITION_P2C ? diffItem.childGroupId : diffItem.groupId;\n      } else {\n        return direction === TRANSITION_C2P ? diffItem.childGroupId : diffItem.groupId;\n      }\n    };\n  }\n  // Use id if it's very likely to be an one to one animation\n  // It's more robust than groupId\n  // TODO Check if key dimension is specified.\n  var useId = isAllIdSame(oldDiffItems, newDiffItems);\n  var isElementStillInChart = {};\n  if (!useId) {\n    // We may have different diff strategy with basicTransition if we use other dimension as key.\n    // If so, we can't simply check if oldEl is same with newEl. We need a map to check if oldEl is still being used in the new chart.\n    // We can't use the elements that already being morphed. Let it keep it's original basic transition.\n    for (var i = 0; i < newDiffItems.length; i++) {\n      var newItem = newDiffItems[i];\n      var el = newItem.data.getItemGraphicEl(newItem.dataIndex);\n      if (el) {\n        isElementStillInChart[el.id] = true;\n      }\n    }\n  }\n  function updateOneToOne(newIndex, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var newItem = newDiffItems[newIndex];\n    var newSeries = newItem.data.hostModel;\n    // TODO Mark this elements is morphed and don't morph them anymore\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    var newEl = newItem.data.getItemGraphicEl(newItem.dataIndex);\n    // Can't handle same elements.\n    if (oldEl === newEl) {\n      newEl && animateElementStyles(newEl, newItem.dataIndex, newSeries);\n      return;\n    }\n    if (\n    // We can't use the elements that already being morphed\n    oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n    if (newEl) {\n      // TODO: If keep animating the group in case\n      // some of the elements don't want to be morphed.\n      // TODO Label?\n      stopAnimation(newEl);\n      if (oldEl) {\n        stopAnimation(oldEl);\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newIndex);\n      }\n    }\n    // else keep oldEl leaving animation.\n  }\n\n  new DataDiffer(oldDiffItems, newDiffItems, createKeyGetter(true, useId), createKeyGetter(false, useId), null, 'multiple').update(updateOneToOne).updateManyToOne(function (newIndex, oldIndices) {\n    var newItem = newDiffItems[newIndex];\n    var newData = newItem.data;\n    var newSeries = newData.hostModel;\n    var newEl = newData.getItemGraphicEl(newItem.dataIndex);\n    var oldElsList = filter(map(oldIndices, function (idx) {\n      return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex);\n    }), function (oldEl) {\n      return oldEl && oldEl !== newEl && !isElementStillInChart[oldEl.id];\n    });\n    if (newEl) {\n      stopAnimation(newEl);\n      if (oldElsList.length) {\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        each(oldElsList, function (oldEl) {\n          stopAnimation(oldEl);\n          removeEl(oldEl);\n        });\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldElsList), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newItem.dataIndex);\n      }\n    }\n    // else keep oldEl leaving animation.\n  }).updateOneToMany(function (newIndices, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    // We can't use the elements that already being morphed\n    if (oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n    var newElsList = filter(map(newIndices, function (idx) {\n      return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex);\n    }), function (el) {\n      return el && el !== oldEl;\n    });\n    var newSeris = newDiffItems[newIndices[0]].data.hostModel;\n    if (newElsList.length) {\n      each(newElsList, function (newEl) {\n        return stopAnimation(newEl);\n      });\n      if (oldEl) {\n        stopAnimation(oldEl);\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newElsList), oldItem.divide,\n        // Use divide on old.\n        newSeris, newIndices[0], updateMorphingPathProps);\n      } else {\n        each(newElsList, function (newEl) {\n          return fadeInElement(newEl, newSeris, newIndices[0]);\n        });\n      }\n    }\n    // else keep oldEl leaving animation.\n  }).updateManyToMany(function (newIndices, oldIndices) {\n    // If two data are same and both have groupId.\n    // Normally they should be diff by id.\n    new DataDiffer(oldIndices, newIndices, function (rawIdx) {\n      return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex);\n    }, function (rawIdx) {\n      return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex);\n    }).update(function (newIndex, oldIndex) {\n      // Use the original index\n      updateOneToOne(newIndices[newIndex], oldIndices[oldIndex]);\n    }).execute();\n  }).execute();\n  if (hasMorphAnimation) {\n    each(newList, function (_a) {\n      var data = _a.data;\n      var seriesModel = data.hostModel;\n      var view = seriesModel && api.getViewOfSeriesModel(seriesModel);\n      var animationCfg = getAnimationConfig('update', seriesModel, 0); // use 0 index.\n      if (view && seriesModel.isAnimationEnabled() && animationCfg && animationCfg.duration > 0) {\n        view.group.traverse(function (el) {\n          if (el instanceof Path && !el.animators.length) {\n            // We can't accept there still exists element that has no animation\n            // if universalTransition is enabled\n            el.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, animationCfg);\n          }\n        });\n      }\n    });\n  }\n}\nfunction getSeriesTransitionKey(series) {\n  var seriesKey = series.getModel('universalTransition').get('seriesKey');\n  if (!seriesKey) {\n    // Use series id by default.\n    return series.id;\n  }\n  return seriesKey;\n}\nfunction convertArraySeriesKeyToString(seriesKey) {\n  if (isArray(seriesKey)) {\n    // Order independent.\n    return seriesKey.sort().join(',');\n  }\n  return seriesKey;\n}\nfunction getDivideShapeFromData(data) {\n  if (data.hostModel) {\n    return data.hostModel.getModel('universalTransition').get('divideShape');\n  }\n}\nfunction findTransitionSeriesBatches(globalStore, params) {\n  var updateBatches = createHashMap();\n  var oldDataMap = createHashMap();\n  // Map that only store key in array seriesKey.\n  // Which is used to query the old data when transition from one to multiple series.\n  var oldDataMapForSplit = createHashMap();\n  each(globalStore.oldSeries, function (series, idx) {\n    var oldDataGroupId = globalStore.oldDataGroupIds[idx];\n    var oldData = globalStore.oldData[idx];\n    var transitionKey = getSeriesTransitionKey(series);\n    var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n    oldDataMap.set(transitionKeyStr, {\n      dataGroupId: oldDataGroupId,\n      data: oldData\n    });\n    if (isArray(transitionKey)) {\n      // Same key can't in different array seriesKey.\n      each(transitionKey, function (key) {\n        oldDataMapForSplit.set(key, {\n          key: transitionKeyStr,\n          dataGroupId: oldDataGroupId,\n          data: oldData\n        });\n      });\n    }\n  });\n  function checkTransitionSeriesKeyDuplicated(transitionKeyStr) {\n    if (updateBatches.get(transitionKeyStr)) {\n      warn(\"Duplicated seriesKey in universalTransition \" + transitionKeyStr);\n    }\n  }\n  each(params.updatedSeries, function (series) {\n    if (series.isUniversalTransitionEnabled() && series.isAnimationEnabled()) {\n      var newDataGroupId = series.get('dataGroupId');\n      var newData = series.getData();\n      var transitionKey = getSeriesTransitionKey(series);\n      var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n      // Only transition between series with same id.\n      var oldData = oldDataMap.get(transitionKeyStr);\n      // string transition key is the best match.\n      if (oldData) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n        }\n        // TODO check if data is same?\n        updateBatches.set(transitionKeyStr, {\n          oldSeries: [{\n            dataGroupId: oldData.dataGroupId,\n            divide: getDivideShapeFromData(oldData.data),\n            data: oldData.data\n          }],\n          newSeries: [{\n            dataGroupId: newDataGroupId,\n            divide: getDivideShapeFromData(newData),\n            data: newData\n          }]\n        });\n      } else {\n        // Transition from multiple series.\n        // e.g. 'female', 'male' -> ['female', 'male']\n        if (isArray(transitionKey)) {\n          if (process.env.NODE_ENV !== 'production') {\n            checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n          }\n          var oldSeries_1 = [];\n          each(transitionKey, function (key) {\n            var oldData = oldDataMap.get(key);\n            if (oldData.data) {\n              oldSeries_1.push({\n                dataGroupId: oldData.dataGroupId,\n                divide: getDivideShapeFromData(oldData.data),\n                data: oldData.data\n              });\n            }\n          });\n          if (oldSeries_1.length) {\n            updateBatches.set(transitionKeyStr, {\n              oldSeries: oldSeries_1,\n              newSeries: [{\n                dataGroupId: newDataGroupId,\n                data: newData,\n                divide: getDivideShapeFromData(newData)\n              }]\n            });\n          }\n        } else {\n          // Try transition to multiple series.\n          // e.g. ['female', 'male'] -> 'female', 'male'\n          var oldData_1 = oldDataMapForSplit.get(transitionKey);\n          if (oldData_1) {\n            var batch = updateBatches.get(oldData_1.key);\n            if (!batch) {\n              batch = {\n                oldSeries: [{\n                  dataGroupId: oldData_1.dataGroupId,\n                  data: oldData_1.data,\n                  divide: getDivideShapeFromData(oldData_1.data)\n                }],\n                newSeries: []\n              };\n              updateBatches.set(oldData_1.key, batch);\n            }\n            batch.newSeries.push({\n              dataGroupId: newDataGroupId,\n              data: newData,\n              divide: getDivideShapeFromData(newData)\n            });\n          }\n        }\n      }\n    }\n  });\n  return updateBatches;\n}\nfunction querySeries(series, finder) {\n  for (var i = 0; i < series.length; i++) {\n    var found = finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id;\n    if (found) {\n      return i;\n    }\n  }\n}\nfunction transitionSeriesFromOpt(transitionOpt, globalStore, params, api) {\n  var from = [];\n  var to = [];\n  each(normalizeToArray(transitionOpt.from), function (finder) {\n    var idx = querySeries(globalStore.oldSeries, finder);\n    if (idx >= 0) {\n      from.push({\n        dataGroupId: globalStore.oldDataGroupIds[idx],\n        data: globalStore.oldData[idx],\n        // TODO can specify divideShape in transition.\n        divide: getDivideShapeFromData(globalStore.oldData[idx]),\n        groupIdDim: finder.dimension\n      });\n    }\n  });\n  each(normalizeToArray(transitionOpt.to), function (finder) {\n    var idx = querySeries(params.updatedSeries, finder);\n    if (idx >= 0) {\n      var data = params.updatedSeries[idx].getData();\n      to.push({\n        dataGroupId: globalStore.oldDataGroupIds[idx],\n        data: data,\n        divide: getDivideShapeFromData(data),\n        groupIdDim: finder.dimension\n      });\n    }\n  });\n  if (from.length > 0 && to.length > 0) {\n    transitionBetween(from, to, api);\n  }\n}\nexport function installUniversalTransition(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecMOdel, api, params) {\n    each(normalizeToArray(params.seriesTransition), function (transOpt) {\n      each(normalizeToArray(transOpt.to), function (finder) {\n        var series = params.updatedSeries;\n        for (var i = 0; i < series.length; i++) {\n          if (finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id) {\n            series[i][SERIES_UNIVERSAL_TRANSITION_PROP] = true;\n          }\n        }\n      });\n    });\n  });\n  registers.registerUpdateLifecycle('series:transition', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var globalStore = getUniversalTransitionGlobalStore(api);\n    // TODO multiple to multiple series.\n    if (globalStore.oldSeries && params.updatedSeries && params.optionChanged) {\n      // TODO transitionOpt was used in an old implementation and can be removed now\n      // Use give transition config if its' give;\n      var transitionOpt = params.seriesTransition;\n      if (transitionOpt) {\n        each(normalizeToArray(transitionOpt), function (opt) {\n          transitionSeriesFromOpt(opt, globalStore, params, api);\n        });\n      } else {\n        // Else guess from series based on transition series key.\n        var updateBatches_1 = findTransitionSeriesBatches(globalStore, params);\n        each(updateBatches_1.keys(), function (key) {\n          var batch = updateBatches_1.get(key);\n          transitionBetween(batch.oldSeries, batch.newSeries, api);\n        });\n      }\n      // Reset\n      each(params.updatedSeries, function (series) {\n        // Reset;\n        if (series[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n          series[SERIES_UNIVERSAL_TRANSITION_PROP] = false;\n        }\n      });\n    }\n    // Save all series of current update. Not only the updated one.\n    var allSeries = ecModel.getSeries();\n    var savedSeries = globalStore.oldSeries = [];\n    var savedDataGroupIds = globalStore.oldDataGroupIds = [];\n    var savedData = globalStore.oldData = [];\n    for (var i = 0; i < allSeries.length; i++) {\n      var data = allSeries[i].getData();\n      // Only save the data that can have transition.\n      // Avoid large data costing too much extra memory\n      if (data.count() < DATA_COUNT_THRESHOLD) {\n        savedSeries.push(allSeries[i]);\n        savedDataGroupIds.push(allSeries[i].get('dataGroupId'));\n        savedData.push(data);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from './lib/extension.js';\nexport * from './lib/export/core.js';\n// ----------------------------------------------\n// All of the modules that are allowed to be\n// imported are listed below.\n//\n// Users MUST NOT import other modules that are\n// not included in this list.\n// ----------------------------------------------\nimport { SVGRenderer, CanvasRenderer } from './lib/export/renderers.js';\nimport { LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart } from './lib/export/charts.js';\nimport { GridComponent, PolarComponent, GeoComponent, SingleAxisComponent, ParallelComponent, CalendarComponent, GraphicComponent, ToolboxComponent, TooltipComponent, AxisPointerComponent, BrushComponent, TitleComponent, TimelineComponent, MarkPointComponent, MarkLineComponent, MarkAreaComponent, LegendComponent, DataZoomComponent, DataZoomInsideComponent, DataZoomSliderComponent, VisualMapComponent, VisualMapContinuousComponent, VisualMapPiecewiseComponent, AriaComponent, DatasetComponent, TransformComponent } from './lib/export/components.js';\nimport { UniversalTransition, LabelLayout } from './lib/export/features.js';\n// -----------------\n// Render engines\n// -----------------\n// Render via Canvas.\n// echarts.init(dom, null, { renderer: 'canvas' })\nuse([CanvasRenderer]);\n// Render via SVG.\n// echarts.init(dom, null, { renderer: 'svg' })\nuse([SVGRenderer]);\n// ----------------\n// Charts (series)\n// ----------------\n// All of the series types, for example:\n// chart.setOption({\n//     series: [{\n//         type: 'line' // or 'bar', 'pie', ...\n//     }]\n// });\nuse([LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart]);\n// -------------------\n// Coordinate systems\n// -------------------\n// All of the axis modules have been included in the\n// coordinate system module below, do not need to\n// make extra import.\n// `cartesian` coordinate system. For some historical\n// reasons, it is named as grid, for example:\n// chart.setOption({\n//     grid: {...},\n//     xAxis: {...},\n//     yAxis: {...},\n//     series: [{...}]\n// });\nuse(GridComponent);\n// `polar` coordinate system, for example:\n// chart.setOption({\n//     polar: {...},\n//     radiusAxis: {...},\n//     angleAxis: {...},\n//     series: [{\n//         coordinateSystem: 'polar'\n//     }]\n// });\nuse(PolarComponent);\n// `geo` coordinate system, for example:\n// chart.setOption({\n//     geo: {...},\n//     series: [{\n//         coordinateSystem: 'geo'\n//     }]\n// });\nuse(GeoComponent);\n// `singleAxis` coordinate system (notice, it is a coordinate system\n// with only one axis, work for chart like theme river), for example:\n// chart.setOption({\n//     singleAxis: {...}\n//     series: [{type: 'themeRiver', ...}]\n// });\nuse(SingleAxisComponent);\n// `parallel` coordinate system, only work for parallel series, for example:\n// chart.setOption({\n//     parallel: {...},\n//     parallelAxis: [{...}, ...],\n//     series: [{\n//         type: 'parallel'\n//     }]\n// });\nuse(ParallelComponent);\n// `calendar` coordinate system. for example,\n// chart.setOption({\n//     calendar: {...},\n//     series: [{\n//         coordinateSystem: 'calendar'\n//     }]\n// );\nuse(CalendarComponent);\n// ------------------\n// Other components\n// ------------------\n// `graphic` component, for example:\n// chart.setOption({\n//     graphic: {...}\n// });\nuse(GraphicComponent);\n// `toolbox` component, for example:\n// chart.setOption({\n//     toolbox: {...}\n// });\nuse(ToolboxComponent);\n// `tooltip` component, for example:\n// chart.setOption({\n//     tooltip: {...}\n// });\nuse(TooltipComponent);\n// `axisPointer` component, for example:\n// chart.setOption({\n//     tooltip: {axisPointer: {...}, ...}\n// });\n// Or\n// chart.setOption({\n//     axisPointer: {...}\n// });\nuse(AxisPointerComponent);\n// `brush` component, for example:\n// chart.setOption({\n//     brush: {...}\n// });\n// Or\n// chart.setOption({\n//     tooltip: {feature: {brush: {...}}\n// })\nuse(BrushComponent);\n// `title` component, for example:\n// chart.setOption({\n//     title: {...}\n// });\nuse(TitleComponent);\n// `timeline` component, for example:\n// chart.setOption({\n//     timeline: {...}\n// });\nuse(TimelineComponent);\n// `markPoint` component, for example:\n// chart.setOption({\n//     series: [{markPoint: {...}}]\n// });\nuse(MarkPointComponent);\n// `markLine` component, for example:\n// chart.setOption({\n//     series: [{markLine: {...}}]\n// });\nuse(MarkLineComponent);\n// `markArea` component, for example:\n// chart.setOption({\n//     series: [{markArea: {...}}]\n// });\nuse(MarkAreaComponent);\n// `legend` component not scrollable. for example:\n// chart.setOption({\n//     legend: {...}\n// });\nuse(LegendComponent);\n// `dataZoom` component including both `dataZoomInside` and `dataZoomSlider`.\nuse(DataZoomComponent);\n// `dataZoom` component providing drag, pinch, wheel behaviors\n// inside coordinate system, for example:\n// chart.setOption({\n//     dataZoom: {type: 'inside'}\n// });\nuse(DataZoomInsideComponent);\n// `dataZoom` component providing a slider bar, for example:\n// chart.setOption({\n//     dataZoom: {type: 'slider'}\n// });\nuse(DataZoomSliderComponent);\n// `visualMap` component including both `visualMapContinuous` and `visualMapPiecewise`.\nuse(VisualMapComponent);\n// `visualMap` component providing continuous bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'continuous'}\n// });\nuse(VisualMapContinuousComponent);\n// `visualMap` component providing pieces bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'piecewise'}\n// });\nuse(VisualMapPiecewiseComponent);\n// `aria` component providing aria, for example:\n// chart.setOption({\n//     aria: {...}\n// });\nuse(AriaComponent);\n// dataset transform\n// chart.setOption({\n//     dataset: {\n//          transform: []\n//     }\n// });\nuse(TransformComponent);\nuse(DatasetComponent);\n// universal transition\n// chart.setOption({\n//     series: {\n//         universalTransition: { enabled: true }\n//     }\n// })\nuse(UniversalTransition);\n// label layout\n// chart.setOption({\n//     series: {\n//         labelLayout: { hideOverlap: true }\n//     }\n// })\nuse(LabelLayout);"],"names":["mathSin","mathCos","PI","PI2","degree","SVGPathRebuilder","precision","x","y","x2","y2","x3","y3","cx","cy","r","startAngle","endAngle","anticlockwise","rx","ry","psi","dTheta","clockwise","dThetaPositive","isCircle","isAroundZero","unifiedTheta","large","x0","y0","xRot","p","dTheta_1","w","h","cmd","a","b","c","d","e","f","g","vals","i","val","SVGPathRebuilder$1","NONE","mathRound","pathHasFill","style","fill","pathHasStroke","stroke","strokeProps","svgStrokeProps","map","prop","mapStyleToAttrs","updateAttr","el","forceUpdate","opacity","ZRImage","normalizeColor","fillOpacity","strokeScale","strokeWidth","strokeOpacity","strokeFirst","_a","getLineDash","lineDash","lineDashOffset","propName","DEFAULT_PATH_STYLE","SVGNS","XLINKNS","XMLNS","XML_NAMESPACE","META_DATA_PREFIX","createElement","name","createVNode","tag","key","attrs","children","text","createElementOpen","attrsStr","part","createElementClose","vNodeToString","opts","S","convertElToString","encodeHTML","child","getCssString","selectorNodes","animationNodes","bracketBegin","bracketEnd","selectors","keys","className","attrName","animations","animationName","percent","createBrushScope","zrId","createSVGVNode","width","height","useViewBox","cssClassIdx","getClassId","EASING_MAP","transformOriginKey","buildPathString","kfShape","path","shape","extend","svgPathBuilder","getPathPrecision","setTransformOrigin","target","transform","originX","originY","ANIMATE_STYLE_MAP","addAnimation","cssAnim","scope","createCompoundPathCSSAnimation","paths","composedAnim","cssAnimationCfg","cssAnimationName","each","subScope","createCSSAnimation","cssAnims","cssNodes","animNames","len","lastAnim","kf","getEasingFunc","easing","isString","createCubicEasingFunc","onlyShape","animators","cssAnimations","CompoundPath","animationCfg","groupAnimators","animator","cfgArr","delay","cfg","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","tracks","maxTime","k","track","kfs","kfEasing","rawValue","isNumber","targetProp","copyTransform","str","getSRTTransformString","timingFunction","canAnimateShape","isFirst","PathProxy","len_1","newLen","percents","allTransformOriginSame","transformOrigin","p0","p1","filter","createCSSEmphasis","setClassAttribute","emphasisStyle","normalFill","selectFill","fromFill","liftColor","lineWidth","scaleX","withHover","styleKey","round","isImageLike","isCanvasLike","isFunction","setStyleAttrs","isFillStroke","isGradient","setGradient","isPattern","setPattern","setShadow","setMetaData","metaData","getElementSSRData","noRotateScale","m","noTranslate","setTransform","compress","mul","getMatrixStr","convertPolyShape","points","strArr","validatePolyShape","createAttrsConvert","desc","normalizedDesc","item","builtinShapesDef","hasShapeAnimation","brushSVGPath","builtinShpDef","needsAnimate","svgElType","strokePercent","needBuildPath","pathVersion","elExt","brushSVGImage","image","dw","dh","brushSVGTSpan","font","DEFAULT_FONT","adjustTextY","getLineHeight","textAlign","TEXT_ALIGN_TO_ANCHOR","hasSeparateFont","separatedFontStr","fontStyle","fontSize","parseFontSize","fontFamily","DEFAULT_FONT_FAMILY","fontWeight","brush","Path","TSpan","hasShadow","shadowKey","getShadowKey","shadowCache","shadowId","globalScale","scaleY","offsetX","offsetY","blur_1","color","stdDx","stdDy","stdDeviation","getIdURL","gradientTag","gradientAttrs","isLinearGradient","isRadialGradient","retrieve2","colors","colorStops","offset","round4","stopColor","stopsAttrs","gradientVNode","gradientKey","gradientCache","gradientId","boundingRect","patternAttrs","repeat","noRepeat","repeatX","repeatY","isImagePattern","imageWidth_1","imageHeight_1","imageSrc","patternImage","errMsg","assert","setSizeToVNode_1","vNode","img","svgEl","createdImage","createOrUpdateImage","patternVNode","clone","patternWidth","patternHeight","patternTransform","patternKey","patternCache","patternId","setClipPath","clipPath","clipPathCache","defs","clipPathId","clipPathAttrs","createTextNode","insertBefore","parentNode","newNode","referenceNode","removeChild","node","appendChild","nextSibling","setTextContent","colonChar","xChar","emptyNode","isUndef","s","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","isSameTag","createElm","vnode","elm","updateAttrs","isArray","ch","api.appendChild","isObject","api.createTextNode","addVnodes","parentElm","before","vnodes","startIdx","api.insertBefore","removeVnodes","parent_1","api.parentNode","api.removeChild","oldVnode","oldAttrs","cur","old","updateChildren","oldCh","newCh","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInOld","elmToMove","patchVnode","api.nextSibling","api.setTextContent","patch","parent_2","svgId","SVGPainter","root","storage","createMethodNotSupport","viewport","svgDom","viewportRoot","list","bgVNode","createBackgroundVNode","mainVNode","id","animationCssStr","styleNode","backgroundColor","out","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","currentClipPathGroup","prevClipPaths","clipGroupNodeIdx","displayable","clipPaths","prevLen","lca","i_1","i_2","groupAttrs","ret","getSize","viewportStyle","bgEl","base64","prefix","encodeBase64","method","noop","SVGPainter$1","install","registers","ScatterSeriesModel","_super","__extends","_this","option","ecModel","createSeriesData","progressive","progressiveThreshold","dataIndex","data","SeriesModel","ScatterSeriesModel$1","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","size","symbolProxy","symbolProxyShape","ctx","canBoost","softClipShape","idx","localPos","rect","dataIdx","minX","minY","maxX","maxY","graphic.BoundingRect","graphic.Path","LargeSymbolDraw","graphic.Group","opt","symbolEl","byteOffset","taskParams","lastAdded","oldPoints","oldLen","newPoints","cb","hostModel","createSymbol","extrudeShadow","globalStyle","visualColor","ecData","getECData","LargeSymbolDraw$1","ScatterView","seriesModel","api","symbolDraw","res","pointsLayout","coordSys","pipelineContext","isLargeDraw","SymbolDraw","ChartView","ScatterView$1","use","installGridSimple","layoutPoints","radarLayout","axes","zrUtil.each","axis","axisIndex","point","isValidPoint","getValueMissingPoint","firstPoint","zrUtil.find","radarBackwardCompat","polarOptArr","zrUtil.isArray","polarNotRadar_1","polarOpt","seriesOpt","RadarView","polar","group","oldData","symbolType","symbolSize","symbolUtil.normalizeSymbolSize","symbolPath","symbolUtil.createSymbol","symbolRotate","updateSymbols","symbolGroup","isInit","graphic","getInitialPoints","zrUtil.map","pt","polygon","graphic.Polygon","polyline","graphic.Polyline","graphic.initProps","itemGroup","newIdx","oldIdx","saveOldStyle","graphic.updateProps","itemModel","itemStyle","zrUtil.defaults","setStatesStylesFromModel","areaStyleModel","polygonIgnore","stateName","stateModel","stateIgnore","emphasisModel","itemHoverStyle","pathStyle","zrUtil.extend","pathEmphasisState","zrUtil.clone","defaultText","setLabelStyle","getLabelStatesModels","toggleHoverEmphasis","RadarView$3","RadarSeriesModel","LegendVisualProvider","zrUtil.bind","createSeriesDataSimply","multipleSeries","dataType","indicatorAxes","nameToDisplay","markerColor","retrieveVisualColorForTooltipMarker","createTooltipMarkup","data_1","values","dim","RadarSeriesModel$1","valueAxisDefault","axisDefault","defaultsShow","show","RadarModel","boundaryGap","splitNumber","scale","axisLine","axisTick","axisLabel","nameTextStyle","showName","nameFormatter","nameGap","triggerEvent","indicatorModels","indicatorOpt","iNameTextStyle","innerIndicatorOpt","zrUtil.merge","zrUtil.isString","indName","zrUtil.isFunction","model","Model","zrUtil.mixin","AxisModelCommonMixin","ComponentModel","RadarModel$1","axisBuilderAttrs","radarModel","radar","axisBuilders","indicatorAxis","axisName","axisBuilder","AxisBuilder","splitLineModel","splitAreaModel","lineStyleModel","showSplitLine","showSplitArea","splitLineColors","splitAreaColors","splitLineColorsArr","splitAreaColorsArr","splitLines","splitAreas","getColorIndex","areaOrLine","areaOrLineColorList","colorIndex","ticksRadius","graphic.Circle","graphic.Ring","realSplitNumber_1","axesTicksPoints","ticksCoords","tickCoord","prevPoints","j","lineStyle","areaStyle","graphic.mergePath","ComponentView","RadarView$1","IndicatorAxis","radiusExtent","Axis","IndicatorAxis$1","Radar","indicatorModel","IntervalScale","value","indicatorIndex","coord","angle","dx","dy","radius","radian","minRadianDiff","closestAxis","closestAxisIdx","diff","center","viewWidth","viewHeight","viewSize","numberUtil.parsePercent","radarSeries","dummyScale","alignScaleTicks","finder","pixel","radarList","Radar$1","installRadarComponent","dataFilter","backwardCompat","init","inRoot","nodes","n","firstWalk","separation","siblings","subtreeW","executeShifts","midPoint","apportion","secondWalk","nodeX","defaultSeparation","radialCoordinate","rad","getViewRect","layout.getLayoutRect","shift","change","subtreeV","ancestor","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","wl","wr","node1","node2","TreeEdgeShape","TreePath","childPoints","childLen","parentPoint","firstChildPos","lastChildPos","orient","forkDim","otherDim","forkPosition","parsePercent","tmpPoint","TreeView","RoamController","layoutInfo","layout","symbolNeedsDraw","updateNode","removeNode","min","max","bbox.fromPoints","oldMin","oldMax","viewCoordSys","View","controller","controllerHost","onIrrelevantElement","roamHelper.updateViewOnPan","roamHelper.updateViewOnZoom","nodeScale","nodeScaleRatio","groupZoom","roamZoom","symbolInnerColor","virtualRoot","source","sourceSymbolEl","sourceLayout","sourceOldLayout","targetLayout","SymbolClz","realRoot","rootLayout","length_1","isLeft","textPosition","normalLabelModel","rotate","labelRotateRadian","textContent","focus","focusDataIndices","zrUtil.concatArray","drawEdge","toState","parentEl","HOVER_STATE_BLUR","setStatesFlag","edgeShape","curvature","edgeForkPosition","edge","graphic.BezierCurve","getEdgeShape","childLayout","setDefaultStateProxy","removeNodeEdge","removeAnimationOpt","getSourceNode","sourceEdge","layoutOpt","graphic.removeElement","childNode","cpx1","cpy1","cpx2","cpy2","x1","y1","radialCoor1","radialCoor2","radialCoor3","radialCoor4","TreeView$1","inner","makeInner","linkSeriesData","mainData","datas","linkAll","methodName","curry","transferInjection","cloneShallowInjection","changeInjection","isMainData","linkSingle","getLinkedData","getLinkedDataAll","type","TreeNode","hostTree","options","context","order","suppressVisitSub","depth","includeSelf","ancestors","indices","currNode","dimension","merge","parent","Tree","rawIndex","dataRoot","beforeLink","tree","listData","dimMax","buildHierarchy","dataNode","convertOptionIdName","addChild","dimensions","prepareSeriesDataSchema","SeriesData","Tree$1","retrieveTargetInfo","payload","validPayloadTypes","zrUtil.indexOf","targetNode","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","TreeSeriesModel","leaves","leavesModel","nodeData","treeDepth","expandAndCollapse","expandTreeDepth","zoom","params","TreeSeriesModel$1","eachAfter","callback","next","eachBefore","treeLayout","commonLayout","sep","left_1","right_1","bottom_1","delta","tx_1","kx_1","ky_1","coorX_1","coorY_1","finalCoor","orient_1","treeVisual","existsStyle","installTreeAction","updateCenterAndZoom","actionTypes","installTreemapAction","handleRootToNode","index","types","targetInfo","helper.retrieveTargetInfo","originViewRoot","helper.aboveViewRoot","enableAriaDecalForTree","decalPaletteScope","current","decal","getDecalFromPalette","TreemapSeriesModel","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","setDefault","levelModels","levelDefine","levelModel","idIndexMap","zrUtil.createHashMap","sum","childValue","thisValue","globalColorList","normalizeToArray","globalDecalList","hasColorDefine","hasDecalDefine","modelColor","modelDecal","level0","TreemapSeriesModel$1","TEXT_PADDING","ITEM_GAP","ARRAY_LENGTH","Breadcrumb","containerGroup","onSelect","thisGroup","normalStyleModel","textStyleModel","emphasisTextStyleModel","layoutParam","layout.positionElement","textRect","itemWidth","lastX","emptyItemWidth","availableSize","layout.getAvailableSize","totalWidth","renderList","emphasisItemStyle","itemNode","makeItemPoints","defaults","graphic.Text","createTextStyle","Z2_EMPHASIS_LIFT","packEventData","itemHeight","head","tail","Breadcrumb$1","AnimationWrap","duration","count","checkTerminate","createWrap","Group","Rect","graphic.Rect","DRAG_THRESHOLD","PATH_LABEL_NOAMAL","PATH_UPPERLABEL_NORMAL","Z2_BASE","Z2_BG","Z2_CONTENT","getStateItemStyle","makeStyleMapper","getItemStyleNormal","TreemapView","createStorage","models","indexOf","payloadType","thisStorage","reRoot","hasAnimation","renderResult","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","thisNode","oldNode","parentGroup","renderNode","dualTravel","willDeleteEls","clearStorage","renderFinally","thisViewChildren","oldViewChildren","sameTree","processNode","DataDiffer","getKey","newIndex","oldIndex","store","storageName","delEls","els","durationOption","easingOption","animationWrap","animationUtil.createWrap","innerStore","targetX","targetY","last","bind","BoundingRect","mouseX","mouseY","matrix.create","matrix.translate","matrix.scale","nodeClick","link","linkTarget","windowOpen","thisLayout","nodeModel","thisWidth","thisHeight","borderWidth","thisInvisible","thisRawIndex","oldRawIndex","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","itemStyleBlurModel","itemStyleSelectModel","borderRadius","giveGraphic","bg","renderBackground","blurScope","isDisabled","focusOrIndices","isHighDownDispatcher","setAsHighDownDispatcher","enableHoverFocus","content","renderContent","useUpperLabel","processInvisible","visualBorderColor","normalStyle","blurStyle","selectStyle","upperLabelWidth","prepareText","contentWidth","contentHeight","nodeStyle","element","rectEl","visualOpacity","upperLabelRect","isShow","textEl","textStyle","textPadding","normalizeCssArray","addDrillDownIcon","textEmphasisState","iconChar","Ctor","z","lasts","prepareAnimationWhenHasOld","Displayable","calculateZ2","prepareAnimationWhenNoOld","lastCfg","isGroup","parentOldX","parentOldY","parentOldBg","z2InLevel","TreemapView$1","ITEM_STYLE_NORMAL","treemapVisual","travelTree","designatedVisual","viewRootAncestors","nodeLayout","nodeItemStyleModel","visuals","buildVisuals","borderColor","borderColorSaturation","thisNodeColor","calculateColor","calculateBorderColor","viewChildren","mapping_1","buildVisualMapping","childVisual","mapVisual","visualName","getValueVisualDefine","colorAlpha","colorSaturation","modifyHSL","modifyAlpha","rangeVisual","getRangeVisual","visualMin","visualMax","dataExtent","colorMappingBy","mapping","VisualMapping","range","childVisuals","mappingType","mathMax","mathMin","retrieveValue","zrUtil.retrieve","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","treemapLayout","ecWidth","ecHeight","seriesOption","containerWidth","containerHeight","rootRect","viewAbovePath","helper.getPathToRoot","rootSize","estimateRootSize","sort_1","viewRootLayout_1","squarify","treeRoot","calculateRootPosition","prunning","hideChildren","halfGapWidth","upperLabelHeight","getUpperLabelHeight","layoutOffset","layoutOffsetUpper","totalArea","initChildren","rowFixedLength","best","row","score","worst","position","childrenVisibleMin","orderBy","overLeafDepth","zrUtil.filter","sort","info","statistic","filterByThreshold","area","orderedChildren","visibleMin","deletePoint","ratio","areaMax","areaMin","squareArea","flush","idx0WhenH","idx1WhenH","xy","wh","rowOtherLength","rowLen","step","wh1","remain","modWH","wh0","defaultSize","viewArea","currNodeValue","parentModel","MAX_SAFE_INTEGER","defaultPosition","targetCenter","clipRect","nodeInViewAbovePath","isAboveViewRoot","childClipRect","categoryFilter","legendModels","graphSeries","categoriesData","graph","categoryNames","category","categoryVisual","paletteScope","categoryNameIdxMap","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","visualList","normalize","graphEdgeVisual","edgeData","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","length","curvenessList","zrUtil.isNumber","getKeyOfEdges","n1","n2","getOppositeKey","getEdgeFromMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","simpleLayoutEdge","curveness","zrUtil.retrieve3","vec2.clone","p2","graphSimpleLayout","dimensions_1","coordDim","hasValue","getNodeGlobalScale","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","pointer","tempX","tempY","v","vec2.normalize","vec2.scale","circularRotateLabel","rotateNodeLabel","_layoutNodesBasedOn","cp1","x12","y12","unitAngle","radianHalf","sumRadian","symbolRadianHalf","halfRemainRadian","labelRotate","pos","emphasisState","graphCircularLayout","scaleAndAdd","vec2.scaleAndAdd","forceLayout","inNodes","inEdges","edges","gravity","vec2.create","initialFriction","friction","beforeStepCallback","afterStepCallback","v12","nLen","vec2.sub","vec2.len","vec2.set","repFact","vec2.copy","finished","graphForceLayout","preservedPoints_1","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","linearMap","edgeModel","forceInstance","l","stopped","aspect","getLayoutRect","createViewCoordSys","viewList","coordSysType","positions","viewRect","bbWidth","bbHeight","straightLineProto","graphic.Line","bezierCurveProto","StraightLineShape","CurveShape","isStraightLine","ECLinePath","ECLinePath$1","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","lineData","symbolOffset","symbolKeepAspect","symbolSizeArr","symbolOffsetArr","symbolUtil.normalizeSymbolOffset","createLine","line","setLinePoints","targetShape","Line","seriesScope","linePoints","symbol","emphasisLineStyle","blurLineStyle","selectLineStyle","labelStatesModels","emphasisDisabled","SPECIAL_STATES","lineState","lineStateStyle","state","stateStyle","rawVal","label","labelNormalModel","distance","enterEmphasis","leaveEmphasis","linePath","lineGroup","symbolFrom","symbolTo","invScale","fromPos","toPos","vector.sub","vector.normalize","setSymbolRotation","specifiedRotation","tangent","textVerticalAlign","distanceX","distanceY","halfPercent","cp","dir","rotation","Line$1","LineDraw","LineCtor","LineGroup","lineDraw","oldLineData","makeSeriesScope","updateIncrementalAndHover","isEffectObject","itemLayout","lineNeedsDraw","graphic.traverseElements","newLineData","itemEl","isPointNaN","pts","LineDraw$1","v1","v2","v3","quadraticAt","curveTool.quadraticAt","v2DistSquare","vec2.distSquare","mathAbs","intersectCurveCircle","curvePoints","t","radiusSquare","interval","_t","nextDiff","adjustEdge","tmp0","quadraticSubdivide","curveTool.quadraticSubdivide","pts2","fromSymbol","toSymbol","originalPoints","isViewCoordSys","GraphView","groupNewProp","layoutAnimation","draggable","self","GraphView$1","generateNodeKey","Graph","directed","nodesMap","GraphNode","rawIdx","edgesMap","GraphEdge","startNode","direction","edgeType","queue","currentNode","otherNode","dataIndices","adjacentEdge","connectedEdgesMap","connectedNodesMap","sourceNodesQueue","targetNodesQueue","nodeIteratorIndex","sourceNode","sourceNodes","targetNodes","createGraphDataProxyMixin","hostName","dataName","Graph$1","createGraphFromNodeEdge","linkNameList","validEdges","linkCount","coordSysCtor","CoordinateSystem","coordDimensions","GraphSeriesModel","getCategoriesData","defaultEmphasis","categoriesModels","categoryModel","oldGetModel","newGetModel","resolveParentPath","pathArr","newPathArr","sourceName","targetName","nameArr","nodeMarkup","defaultSeriesFormatTooltip","categories","GraphSeriesModel$1","actionInfo","edgeVisual","createView","PointerShape","PointerPath","PointerPath$1","parsePosition","formatLabel","labelFormatter","GaugeView","colorList","posInfo","axisLineModel","roundCap","MainPath","Sausage","graphic.Sector","showAxis","axisLineWidth","angles","normalizeArcAngles","angleRangeSpan","prevEndAngle","sectors","sector","getColor","minVal","maxVal","tickModel","labelModel","subSplitNumber","splitLineLen","tickLen","subStep","splitLineStyle","tickLineStyle","splitLineDistance","unitX","unitY","splitLine","autoColor","textStyleX","textStyleY","rotateType","tickLine","oldProgressData","progressList","showPointer","progressModel","showProgress","valueDim","valueExtent","angleExtent","createPointer","pointerModel","pointerWidth","pointerLength","pointerStr","pointerOffset","pointerOffsetX","pointerOffsetY","pointerKeepAspect","createProgress","ProgressPath","isOverlap","progressWidth","r0","progress","isClip","setCommonECData","previousPointer","previousRotate","previousProgress","previousEndAngle","symbolStyle","anchorModel","showAnchor","anchorSize","anchorType","offsetCenter","anchorKeepAspect","anchor","contentGroup","newTitleEls","newDetailEls","showPointerAbove","itemTitleModel","titleOffsetCenter","titleX","titleY","labelEl","itemDetailModel","detailOffsetCenter","detailX","detailY","detailColor","formatter_1","setLabelValueAnimation","animateLabelValue","labelDataIndex","status","labelDimIndex","fmt","extendParams","GaugeView$1","GaugeSeriesModel","GaugeSeriesModel$1","opacityAccessPath","FunnelPiece","labelLine","firstCreate","labelText","labelLayout","graphic.Point","setLabelLineStyle","getLabelLineStatesModels","FunnelView","funnelPiece","piece","graphic.removeElementWithFadeOut","FunnelView$1","FunnelSeriesModel","zrUtil.curry","makeSeriesEncodeForNameBased","labelLineNormalOpt","labelLineEmphasisOpt","FunnelSeriesModel$1","getSortedIndices","valueArr","isAscending","labelPosition","labelLineModel","isLabelInside","textX","textY","labelLineLen","funnelLayout","sizeExtent","funnelAlign","gap","itemSize","getLinePoints","val_1","nextIdx","start","end","DEFAULT_SMOOTH","ParallelView","dataGroup","add","update","remove","newDataIndex","addEl","updateElCommon","oldDataIndex","createLinePoints","createGridClipShape","progressiveEls","parallelModel","dimName","isEmptyValue","smooth","numericToNumber","eqNaN","axisType","ParallelView$3","ParallelSeriesModel","makeDefaultEncode","activeState","theActiveState","encodeDefine","axisDim","dataDimIndex","convertDimNameToNumber","ParallelSeriesModel$1","parallelVisual","opacityMap","itemOpacity","parallelVisual$1","parallelPreprocessor","createParallelIfNeeded","mergeAxisOptionFromParallel","hasParallelSeries","modelUtil.normalizeToArray","axisOption","zrUtil.isObject","parallelIndex","parallelOption","CLICK_THRESHOLD","handlers","handler","eventName","createOrUpdate","clear","checkTrigger","mouseDownPoint","dist","result","behavior","view","triggerOn","ParallelView$1","ParallelModel","newOption","thisOption","parallelAxisIndex","axisModels","axisModel","ParallelModel$1","ParallelAxis","coordExtent","ParallelAxis$1","mathFloor","mathCeil","numberUtil.round","Parallel","axisHelper.createScaleByModel","isCategory","axisBase","layoutBase","pixelDimIndex","pAxis","pLayout","axisHelper.niceScaleExtent","layoutUtil.getLayoutRect","layoutLength","layoutExtent","axisCount","axisExpandWidth","restrict","axisExpandCount","axisExpandable","axisExpandWindow","winSize","axisExpandCenter","axisCollapseWidth","winInnerIndices","axisExpandWindow0Pos","axisExtent","layoutAxisWithExpand","layoutAxisWithoutExpand","positionTable","rotationTable","matrix.rotate","axesMap","dataDimensions","hasActiveSet","lenj","axisLayout","graphic.applyTransform","extent","pointCoord","triggerArea","useJump","sliderMove","winSize2","axisNameAvailableWidth","axisLabelShow","nameTruncateMaxWidth","Parallel$1","createParallelCoordSys","coordSysList","SINGLE_REFERRING","parallelCoordSysCreator","parallelCoordSysCreator$1","ParallelAxisModel","intervals","activeIntervals","numberUtil.asc","ParallelAxisModel$1","BRUSH_PANEL_GLOBAL","mathPow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","DEFAULT_BRUSH_OPT","baseUID","BrushController","zr","pointerHandlers","brushOption","interactionMutex.take","interactionMutex.release","panelOpts","panels_1","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","oldGetKey","addOrUpdate","cover","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","getPanelByPoint","localCursorPoint","panels","panel","pn","getPanelByCover","panelId","covers","originalLength","trigger","areas","shouldShowCover","getTrackEnds","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","updateCommon","transformable","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform","graphic.getTransform","localDirName","inverseMap","graphic.transformDirection","localDirNameSeq","dirNameSequence","rectRange","localDelta","toLocalDelta","dirName","ind","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","preventDefault","rawE","mainShapeContain","updateCoverByMouse","isEnd","thisBrushOption","eventParams","determineBrushType","coverBrushOption","brushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","xyIndex","otherExtent","BrushController$1","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil.clipPointsByRect","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","elementList","ParallelAxisView","fromAxisAreaSelect","oldAxisGroup","coordSysModel","getCoordSysModel","areaSelectStyle","areaWidth","builderOpt","graphic.groupTransition","extentLen","extra","brushHelper.makeRectPanelClipPath","brushHelper.makeRectIsTargetByCursor","brushHelper.makeLinearBrushOtherExtent","getCoverInfoList","eventParam","coverInfoList","coverInfo","ParallelAxisView$1","installParallelActions","parallelAxisModel","defaultAxisOption","axisModelCreator","installParallelComponent","SankeyPathShape","SankeyPath","SankeyView","sankeyView","curve","n1Layout","node1Model","dragX1","dragY1","n2Layout","node2Model","dragX2","dragY2","edgeLayout","applyCurveStyle","defaultEdgeLabelText","edgeLabelStateModels","formatter","retrieve3","dragX","dragY","curveProps","sourceColor","targetColor","graphic.LinearGradient","SankeyView$1","SankeySeriesModel","links","nodeDepth","localPosition","dataItem","noValue","rawDataOpt","edgeValue","edgeName","name_1","nodeValue","SankeySeriesModel$1","sankeyLayout","nodeWidth","nodeGap","computeNodeValues","filteredNodes","iterations","nodeAlign","layoutSankey","computeNodeBreadths","computeNodeDepths","computeEdgeDepths","value1","getEdgeValue","value2","nodeRawValue","remainEdges","indegreeArr","zeroIndegrees","nextTargetNode","maxNodeDepth","isItemDepth","edgeIdx","indexEdge","nodeIndex","maxDepth","adjustNodeWithNodeAlign","kx","scaleNodeBreadths","isNodeDepth","nextSourceNode","remainNodes","nodeHeight","moveSinksRight","nodesByBreadth","prepareNodesByBreadth","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","keyAttr","groupResult","groupData","minKy","ky","nodeDy","edgeDy","nodeDyAttr","weightedTarget","centerTarget","nodeY","weightedSource","centerSource","array","sy","ty","sankeyVisual","minValue_1","maxValue_1","mapValueToColor","customColor","edgeStyle","WhiskerBoxCommonMixin","ordinalMeta","xAxisModel","yAxisModel","xAxisType","yAxisType","addOrdinal","coordDims","baseAxisDimIndex","baseAxisDim","otherAxisDim","baseAxisType","otherAxisType","newOptionData_1","newItem","defaultValueDimensions","getDimensionTypeByAxis","makeSeriesEncodeForAxisCoordSys","BoxplotSeriesModel","mixin","BoxplotSeriesModel$1","BoxplotView","constDim","createNormalBox","updateNormalBoxData","BoxPathShape","BoxPath","transInit","updateMethod","BoxplotView$1","boxplotLayout","groupSeriesByAxis","groupItem","seriesModels","calculateBase","layoutSingleSeries","axisList","baseAxis","seriesCount","boxWidthList","boxOffsetList","boundList","bandWidth","maxDataCount_1","boxWidthBound","availableWidth","boxGap","boxWidth","halfWidth","cDimIdx","vDimIdx","cDim","vDims","axisDimVal","median","getPoint","end1","end2","end4","end5","addBodyEnd","layEndLine","point1","point2","endCenter","from","to","prepareBoxplotData","rawData","boxData","outliers","boundIQR","useExtreme","ascList","asc","Q1","quantile","Q2","Q3","bound","low","high","itemNameFormatter","itemName","outlier","boxplotTransform","upstream","SOURCE_FORMAT_ARRAY_ROWS","throwError","SKIP_PROPS","CandlestickView","isSimpleBox","needsClip","clipArea","isNormalBoxClipped","setBoxCommon","createLarge","createClipPath","NormalBoxPathShape","NormalBoxPath","clipped","LargeBoxPathShape","LargeBoxPath","incremental","largePoints","elP","elN","elDoji","setLargeStyle","sign","CandlestickView$1","CandlestickSeriesModel","CandlestickSeriesModel$1","candlestickPreprocessor","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","dojiBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","createRenderPlanner","getBorderColor","isLargeRender","candlestickVisual$1","candlestickLayout","candleWidth","calculateCandleWidth","cDimI","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","largeProgress","normalProgress","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","hasDojiColor","getSign","makeBrushRect","subPixelOptimize","pmin","pmax","createFloat32Array","tmpIn","tmpOut","barMaxWidth","barMinWidth","barWidth","candlestickLayout$1","preprocessor","updateRipplePath","rippleGroup","effectCfg","ripplePath","EffectSymbol","rippleNumber","oldEffectCfg","DIFFICULT_PROPS","normalizeSymbolSize","normalizeSymbolOffset","EffectSymbol$1","EffectScatterView","effectSymbolDraw","matrix.clone","EffectScatterView$1","EffectScatterSeriesModel","EffectScatterSeriesModel$1","EffectLine","effectModel","period","loop","roundTrip","constantSpeed","delayExpr","delayNum","self_1","vec2.dist","lastPos","curveUtil.quadraticAt","quadraticDerivativeAt","curveUtil.quadraticDerivativeAt","tx","EffectLine$1","Polyline","lineEmphasisState","Polyline$1","EffectPolyline","accLenArr","offsets","lastFrame","frame","EffectPolyline$1","LargeLinesPathShape","LargeLinesPath","segs","lineContain.containStroke","quadraticContain.containStroke","LargeLineDraw","lineEl","oldSegs","newSegs","isIncremental","LargeLineDraw$1","linesLayout","isPolyline","isLarge","lineCoords","segCount","totalCoordsCount","linesLayout$1","LinesView","zlevel","trailLength","isSvg","hasEffect","LinesView$1","Uint32Arr","Float64Arr","compatEc2","itemOpt","coords","mergeAll","LinesSeriesModel","concatArray","startOffset","coordsOffsetAndLenStorage","coordsStorage","coordsCursor","offsetCursor","dataCount","dimIndex","fromName","toName","LinesSeriesModel$1","linesVisual","dataEach","linesVisual$1","GRADIENT_LEVELS","HeatmapLayer","canvas","platformApi","colorFunc","isInRange","gradientInRange","gradientOutOfRange","imageData","pixels","pixelLen","minOpacity","maxOpacity","diffOpacity","gradientOffset","gradient","brushCanvas","gradientPixels","pixelsSingleState","off","HeatmapLayer$1","getIsInPiecewiseRange","pieceList","selected","dataSpan","lastIndex","getIsInContinuousRange","isGeoCoordSys","HeatmapView","visualMapOfThisSeries","visualMap","targetSeries","isCartesian2d","isCoordinateSystemType","xAxisExtent","yAxisExtent","xAxis","yAxis","dataDims","dataDimX","dataDimY","emphasisModel_1","geo","visualMapModel","inRangeVisuals","outOfRangeVisuals","hmLayer","roamTransform","dims","lng","lat","graphic.Image","HeatmapView$1","HeatmapSeriesModel","coordSysCreator","HeatmapSeriesModel$1","BAR_BORDER_WIDTH_QUERY","LAYOUT_ATTRS","pathForLineWidth","PictorialBarView","cartesian","isHorizontal","coordSysRect","getItemModel","symbolMeta","getSymbolMeta","bar","createBar","pictorialShapeStr","getShapeStr","updateBar","removeBar","symbolRepeat","symbolClip","symbolPosition","symbolPatternSize","isAnimationEnabled","prepareBarLength","prepareSymbolSize","prepareLineWidth","prepareLayoutInfo","outputSymbolMeta","symbolBoundingData","valueAxis","zeroPx","pxSignIdx","boundingLength","symbolBoundingExtent","convertToCoordOnAxis","pxSign","categoryDim","categorySize","parsedSymbolSize","symbolScale","valueLineWidth","repeatCutLength","unitLength","pathLen","absBoundingLength","symbolMargin","hasEndGap","symbolMarginNumeric","uLenWithMargin","endFix","repeatSpecified","isNumeric","repeatTimes","toIntTimes","mDiff","sizeFix","pathPosition","bundlePosition","barRectShape","clipShape","createPath","createOrUpdateRepeatSymbols","isUpdate","bundle","unit","eachPath","makeTarget","createOrUpdateSingleSymbol","mainPath","createOrUpdateBarRect","rectShape","barRect","createOrUpdateClip","animationModel","getAnimationDelayParams","labelRect","immediateAttrs","animationAttrs","cursorStyle","hoverScale","barPositionOutside","getDefaultLabel","times","roundedTimes","PictorialBarView$1","PictorialBarSeriesModel","inheritDefaultOption","BaseBarSeriesModel","PictorialBarSeriesModel$1","createProgressiveLayout","ThemeRiverView","layersSeries","keyGetter","dataDiffer","newLayersGroups","process","oldLayersGroups","points0","points1","textLayout","margin","layerGroup","ECPolygon","ThemeRiverView$1","DATA_NAME_INDEX","ThemeRiverSeriesModel","rawDataLength","timeValueKeys","layerData","items","layerNum","timeValue","singleAxisModel","filterData","nameList","nameMap","lenCount","indexArr","timeDim","layerSeries","index1","index2","nestestValue","minDist","nearestIdx","pointNum","theValue","ThemeRiverSeriesModel$1","themeRiverLayout","single","doThemeRiverLayout","layerPoints","singleLayer","computeBaseline","baseLine","baseY0","sums","temp","DEFAULT_SECTOR_Z","DEFAULT_TEXT_Z","SunburstPiece","sectorShape","createOrUpdatePatternFromDecal","cornerRadius","getSectorCornerRadius","itemStyleModel","midAngle","labelMinAngle","isNormalShown","DISPLAY_STATES","labelStateModel","isNormal","isShown","getLabelAttr","sectorState","labelColor","labelPadding","flipStartAngle","flipEndAngle","midAngleNormal","normalizeRadian","needsFlip","isRadianAroundZero","stateAttr","SunburstPiece$1","ROOT_TO_NODE_ACTION","HIGHLIGHT_ACTION","UNHIGHLIGHT_ACTION","installSunburstAction","handleHighlight","SunburstView","newRoot","renderLabelForZeroData","newChildren","oldChildren","renderRollUp","targetFound","SunburstView$1","SunburstSeriesModel","SunburstSeriesModel$1","RADIAN","sunburstLayout","seriesType","minAngle","rootDepth","validDataCount","unitRadian","renderRollupNode","rPerLevel","stillShowZeroSum","rStart","rEnd","r0_1","r_1","radius_1","siblingAngle_1","sortOrder","sortTargets","isAsc_1","sunburstVisual","pickColor","treeHeight","lift","STYLE_VISUAL_TYPE","NON_STYLE_VISUAL_PROPS","customInnerStore","CustomSeriesModel","CustomSeriesModel$1","dataToCoordSize","dataSize","dimIdx","halfSize","cartesianPrepareCustom","geoPrepareCustom","singlePrepareCustom","getterName","polarPrepareCustom","radiusAxis","angleAxis","calendarPrepareCustom","rangeInfo","clamp","isEC4CompatibleStyle","elType","hasOwnTextContentOption","hasOwnTextConfig","hasOwn","convertFromEC4CompatibleStyle","hostStyle","srcStyle","textConfig","textContentStyle","hasOwnPos","convertEC4CompatibleRichItem","richItem","convertToEC4StyleForCustomSerise","itemStl","txStl","txCfg","isInside","hostFill","convertToEC4RichItem","textFillNotSet","LEGACY_TRANSFORM_PROPS_MAP","LEGACY_TRANSFORM_PROPS","reduce","TRANSFORMABLE_PROPS","obj","ELEMENT_ANIMATABLE_PROPS","transitionInnerStore","getElementAnimationConfig","animationType","elOption","animationProp","config","getAnimationConfig","userDuring","duringCall","applyUpdateTransition","animatableModel","clearStyle","styleOpt","transFromProps","propsToSet","prepareTransformAllPropsFinal","prepareShapeOrExtraAllPropsFinal","prepareTransformTransitionFrom","prepareShapeOrExtraTransitionFrom","prepareStyleTransitionFrom","applyPropsDirectly","applyMiscProps","enterFromProps_1","applyPropsTransition","updateLeaveTo","leaveToProps","applyLeaveTransition","onRemove","isTransitionAll","transition","allPropsFinal","tmpDuringScope","transitionDuringAPI","latestUserDuring","scopeUserDuring","mainAttr","fromEl","attrOpt","elPropsInAttr","transFromPropsInAttr","attrTransition","transitionKeys","elVal","elPropsInAttrKeys","isNonStyleTransitionEnabled","allProps","allPropsInAttr","keysInAttr","cloneValue","legacyName","xyName","legacyArr","fromElStyle","transFromStyleProps","styleTransition","elTransition","animationProps","animationStyleProps","styleKeys","optVal","isArrayLike","getStateToRestore","KEYFRAME_EXCLUDE_KEYS","stopPreviousKeyframeAnimationAndRestore","applyKeyframeAnimation","animationOpts","singleAnimationOpts","keyframes","stateToRestore","targetPropName","kfValues","propKeys","savedTarget","EMPHASIS","NORMAL","BLUR","SELECT","STATES","PATH_ITEM_STYLE","PATH_LABEL","DEFAULT_TRANSITION","GROUP_DIFF_PREFIX","attachedTxInfoTmp","prepareCustoms","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","prepareCalendar","isPath","graphicUtil.Path","isDisplayable","copyElement","sourceEl","targetEl","CustomChartView","customSeries","renderItem","makeRenderItem","createOrUpdateItem","oldEl","setIncrementalAndHoverLayer","graphicUtil.traverseElements","eventType","query","packedEvent","elementName","CustomChartView$1","createEl","graphicType","pathRect","pathData","getPathData","graphicUtil.makePath","graphicUtil.Image","graphicUtil.Text","graphicUtil.Group","Clz","graphicUtil.getShapeClass","updateElNormal","attachedTxInfo","txCfgOpt","textOptionStyle","decalPattern","decalObj","updateElOnState","elStateOpt","elDisplayable","stateObj","existingEmphasisState","currentZ","currentZLevel","optZ2","updateZForEachState","retrieveStateOption","prepareResult","userAPI","ordinalRawValue","styleEmphasis","visual","barLayout","currentSeriesIndices","userParams","wrapEncodeDef","currDataIndexInside","currItemModel","currItemStyleModels","currLabelModels","seriesItemStyleModels","seriesLabelModels","dataIndexInside","getItemStyleModel","getLabelModel","dimInfo","userProps","labelStyleHelper.createTextStyle","labelStyleHelper.createTextConfig","preFetchFromExtra","applyUserPropsAfter","visualType","style_1","getLayoutOnAxis","labelStyleHelper.getFont","encodeDef","existsEl","doCreateOrUpdateEl","toBeReplacedIdx","doesElNeedRecreate","doCreateOrUpdateAttachedTx","doCreateOrUpdateClipPath","otherStateOpt","otherStyleOpt","retrieveStyleOptionOnState","mergeChildren","elInner","elOptionType","elOptionShape","elOptionStyle","hasOwnPathData","clipPathOpt","processTxInfo","txConOptNormal","txConOptEmphasis","txConOptBlur","txConOptSelect","txConStlOptNormal","txConOptOtherState","stateOpt","txConOpt","convertResult","txConOptNormal_1","stateOptionNormal","stateOption","byName","notMerge","diffGroupChildren","newChild","oldChild","removeChildFromGroup","processAddUpdate","processRemove","childOption","PolarAxisPointer","axisPointerModel","otherAxis","coordValue","axisPointerType","elStyle","viewHelper.buildElStyle","pointerOption","pointerShapeBuilder","labelMargin","labelPos","getLabelPosition","viewHelper.buildLabelElOption","BaseAxisPointer","axisAngle","align","verticalAlign","labelRotation","viewHelper.makeLineShape","viewHelper.makeSectorShape","PolarAxisPointer$1","PolarModel","foundAxisModel","PolarModel$1","PolarAxisModel","AngleAxisModel","RadiusAxisModel","RadiusAxis","RadiusAxis$1","AngleAxis","ordinalScale","ordinalExtent","tickCount","tickValue","unitSpan","unitH","textContain.getBoundingRect","maxH","cache","lastAutoInterval","lastTickCount","AngleAxis$1","polarDimensions","Polar","scaleType","maxAngle","d2","getCoordSys","polarModel","Polar$1","resizePolar","parsedRadius","updatePolarScale","getDataDimensionsOnAxis","niceScaleExtent","isAngleAxisModel","setAxis","createScaleByModel","polarCreator","polarList","radiusAxisModel","angleAxisModel","polarCreator$1","getAxisLineShape","rExtent","getRadiusIdx","fixAngleOverlap","firstItem","lastItem","AngleAxisView","ticksAngles","minorTickAngles","labels","labelItem","angelAxisElementsBuilders","AxisView","rId","r0Id","shapeType","lines","tickAngleItem","tickAngles","minorTickModel","rawCategoryData","commonLabelModel","labelTextAlign","labelTextVerticalAlign","rawCategoryItem","eventData","lineColors","lineCount","minorSplitLineModel","areaColors","prevAngle","r1","AngleAxisView$1","selfBuilderAttrs","RadiusAxisView","newAxisGroup","minorTicksCoords","layoutAxis","axisElementBuilders","prevRadius","RadiusAxisView$1","getSeriesStackId","getAxisKey","barLayoutPolar","lastStackCoords","barWidthAndOffset","calRadialBar","axisKey","stackId","columnLayoutInfo","columnOffset","columnWidth","barMinHeight","barMinAngle","baseDim","stacked","isDimensionStacked","clampLayout","valueAxisStart","baseValue","baseCoord","radiusSpan","angleSpan","barSeries","columnsMap","columnsOnAxis","stacks","barGap","barCategoryGap","coordSysName","categoryGap","barGapPercent","remainedWidth","autoWidthCount","autoWidth","column","stack","maxWidth","widthSum","lastColumn","angleAxisExtraOption","radiusAxisExtraOption","PolarView","installAxisPointer","axisPosition","rectBound","positionMap","directionMap","SingleAxisView","singleAxisHelper.layout","rectCoordAxisHandleRemove","axisView","axisGroup","gridRect","graphic.subPixelOptimizeLine","rectCoordAxisBuildSplitArea","SingleAxisView$1","SingleAxisModel","SingleAxisModel$1","SingleAxis","SingleAxis$1","singleDimensions","Single","coordBase","extentSum","singleModel","create","singles","singleCreator","singleCreator$1","XY","WH","SingleAxisPointer","getGlobalExtent","getPointDimIndex","pixelValue","viewHelper.buildCartesianSingleLabelElOption","viewHelper.getTransformedPosition","currPosition","cursorOtherValue","cursorPoint","span","viewHelper.makeRectShape","SingleAxisPointer$1","SingleView","CalendarModel","inputPositionParams","getLayoutParams","mergeAndNormalizeLayoutParams","raw","cellSize","cellSizeArr","ignoreSize","hvIdx","sizeCalculable","mergeLayoutParam","CalendarModel$1","CalendarView","calendarModel","rangeData","localeModel","itemRectStyleModel","sw","sh","firstDay","addPoints","date","rs","poyline","parsedDate","tmpD","formatTplSimple","aligns","yearLabel","xc","yc","posPoints","yearText","isCenter","vAlign","monthLabel","termPoints","getLocaleModel","tmp","firstDayPoints","monthText","isStart","dayLabel","firstDayOfWeek","dayOfWeekShort","day","weekText","CalendarView$1","PROXIMATE_ONE_DAY","Calendar","numberUtil.parseDate","mStr","dStr","weeks","whNames","layoutParams","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","dayInfo","week","nthWeek","nthX","nthY","normalizedRange","rangeStr","parsedRange","reversed","allDay","startDateNum","endDateNum","dateNum","nthDay","calendarList","calendar","calendarSeries","Calendar$1","setKeyInfoToNewElOption","resultItem","newElOption","existElOption","newElParentOption","isSetLoc","props","isSet","mergeNewElOptionToExist","existList","newElOptCopy","$action","copyLayoutParams","copyTransitionInfo","TRANSITION_PROPS_TO_COPY","ROOT_TRANSITION_PROPS_TO_COPY","setLayoutInfoToExist","existItem","existingGroupOpt","newGroupOpt","GraphicComponentModel","elements","newList","flattenedList","mappingResult","modelUtil.mappingToExists","elOptionsToUpdate","optionList","parentOption","nonShapeGraphicElements","modelUtil.makeInner","GraphicComponentView","graphicModel","elMap","rootGroup","globalZ","globalZLevel","modelUtil.convertOptionIdName","elExisting","parentId","targetElParent","textContentOption","elOptionCleaned","getCleanedElOption","isMerge","isReplace","el_1","updateCommonAttrs","removeEl","el_2","textContentExisting","clipPathOption","clipPathType","oldClipPath","newEl","setEventData","graphicUtil.setTooltipConfig","elOptions","apiWidth","apiHeight","isParentRoot","parentElInner","containerInfo","layoutPos","layouted","layoutUtil.positionElement","animatePos","updateProps","zrUtil.hasOwn","existElParent","defaultZ","defaultZlevel","zrUtil.retrieve2","zrUtil.keys","layoutUtil.LOCATION_PARAMS","graphicOption","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","findEffectedDataZooms","axisRecords","createHashMap","effectedModels","effectedModelMap","dataZoomModel","addToEffected","foundNewLink","processSingle","isLinked","dataZoom","markAxisControlled","isLink","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","coordSysUid","coordSysInfo","DataZoomAxisInfo","axisCmptIdx","DataZoomModel","inputRawOption","retrieveRawOption","settledOption","names","optionOrient","targetAxisIndexMap","hasAxisSpecified","axisInfo","refering","MULTIPLE_REFERRING","needAuto","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","firstAxisModel","axisProxy","firstProxy","axisDimList","proxy","DataZoomModel$1","SelectDataZoomModel","SelectZoomModel","DataZoomView","DataZoomView$1","SelectDataZoomView","SelectZoomView","AxisProxy","axisMainType","percentExtent","percentWindow","valueWindow","hasPropModeValue","boundPercent","boundValue","numberUtil.linearMap","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","calculateDataExtent","dataWindow","filterMode","seriesData","store_1","dataDimIndices_1","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","minMaxSpan","minMax","percentSpan","valueSpan","numberUtil.getPixelPrecision","rawExtentInfo","unionAxisExtentFromData","rawExtentResult","ensureScaleRawExtentInfo","AxisProxy$1","dataZoomProcessor","eachAxisModel","proxyList","seriesModelMap","percentRange","valueRange","dataZoomProcessor$1","installDataZoomAction","installed","installCommon","ToolboxFeature","features","registerFeature","ctor","getFeature","ToolboxModel","featureOpt","featureName","Feature","featureManager.getFeature","ToolboxModel$1","ToolboxView","toolboxModel","isVertical","featureOpts","featureNames","processFeature","oldName","featureModel","feature","isUserFeatureName","getUID","isToolboxFeature","createIconPaths","iconName","iconPaths","iconStyleModel","iconStyleEmphasisModel","icons","titles","iconsMap","titlesMap","iconStr","graphic.createIcon","ZRText","getFont","graphic.setTooltipConfig","hoverStyle","defaultTextPosition","listComponentHelper.layout","listComponentHelper.makeBackground","icon","titleText","emphasisTextConfig","emphasisTextState","emphasisTextStyle","needPutOnTop","topOffset","ToolboxView$1","SaveAsImage","title","url","browser","env","$a","evt","parts","base64Encoded","bstr","filename","u8arr","blob","cw","doc","lang","html","tab","defaultOption","SaveAsImage$1","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesIndex","seriesOptGenreator","generateNewSeriesTypes","seriesId","newSeriesOpt","categoryAxis","radio","newTitle","currentType","isStack","echarts.registerAction","MagicType$1","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","series","columns","assembleOtherSeries","argLen","getContentFromModel","trim","isTSVFormat","block","firstLine","itemSplitRegex","parseTSVContents","tsv","tsvLines","header","parseListContents","seriesName","hasName","parseContents","blockMetaList","blocks","blockMeta","DataView","container","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","zrUtil.isDom","buttonContainer","buttonStyle","closeButton","refreshButton","close","addEventListener","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","DataView$1","push","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","pop","RestoreOption","history.clear","Restore","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","foundCpts","parseFinder","targetInfoBuilders","builder","coordRange","coordConvert","diffProcessor","rangeOffset","getScales","getDefaultBrushType","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","modelUtilParseFinder","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","grid","cartesians","panelRectBuilders","geoModel","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","xyMinMax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","sizeOrigin","BrushTargetManager$1","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","updateZoomBtnStatus","updateBackBtnStatus","brushTargetManager","makeAxisFinder","setBatch","history.push","findDataZoom","found","dzModel","has","batch","nextActive","history.pop","dzFeatureModel","setting","history.count","zoomActive","registerInternalOptionCreator","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","DataZoom","installDataZoomSelect","DEFAULT_TOOLBOX_BTNS","brushPreprocessor","isNew","brushComponents","brushComponentSpecifiedBtns","brushOpt","tbs","toolbox","toolboxFeature","toolboxBrush","brushTypes","removeDuplicate","arr","flag","makeBrushCommonSelectorForSeries","selector","getLineSelectors","polygonContain.contain","linePolygonIntersect","inLineRange","layoutRange","STATE_LIST","DISPATCH_METHOD","DISPATCH_FLAG","layoutCovers","brushModel","brushVisual","brushSelected","throttleType","throttleDelay","brushIndex","thisBrushSelected","brushLink","linkedSeriesMap","selectedDataIndexForLink","rangeInfoBySeries","hasBrushExists","boundingRectBuilders","selectableArea","visualMappings","visualSolution.createVisualMappings","mappingOption","linkOthers","brushed","rangeInfoList","stepAParallel","stepAOthers","brushModelNotControll","checkInRange","seriesBrushSelected","getValueState","visualSolution.applyVisual","dispatchAction","doDispatch","fn","throttleUtil.createOrUpdate","seriesIndices","getBoundingRectFromMinMax","rg","BrushView","modelId","BrushView$1","DEFAULT_OUT_OF_BRUSH_COLOR","BrushModel","visualSolution.replaceVisualOption","inBrush","generateBrushOption","BrushModel$1","ICON_TYPES","BrushFeature","brushMode","isBrushed","BrushFeature$1","TimelineModel","currentIndex","dataArr","processedDataArr","getDataItemValue","dimType","TimelineModel$1","SliderTimelineModel","DataFormatMixin","SliderTimelineModel$1","TimelineView","TimelineView$1","TimelineAxis","TimelineAxis$1","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","mainGroup_1","labelGroup","axis_1","labelPosOpt","parsedLabelPos","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","playPosition","prevBtnPosition","nextBtnPosition","controlPosition","showPlayBtn","showPrevBtn","showNextBtn","xLeft","xRight","mainGroup","rotateOriginX","rotateOriginY","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","boundIdx","newGroup","progressLine","ticks","tick","hoverStyleModel","progressStyleModel","symbolOpt","giveSymbol","enableHoverEmphasis","hoverLabelModel","progressLabelModel","playState","inverse","makeBtn","onclick","willRotate","iconSize","btn","makeControlIcon","me","pointerMoveTo","nextState","mousePos","toCoord","targetDataIndex","vertex","trans","axisCoord","nextIndex","tickSymbols","tickLabels","OrdinalScale","TimeScale","objPath","noAnimation","SliderTimelineView$1","installTimelineAction","timelinePreprocessor","timelineOpt","compatibleEC2","ec2Types","transferItem","controlStyle","itemStyleEmphasis","labelNormal","excludeLabelAttr","attr","checkMarkerInSeries","seriesOpts","markerType","seriesOptArr","fillLabel","MarkerModel","hostSeries","createdBySelf","componentType","markerOpt","markerModel","MarkerModel$1","MarkPointModel","masterMarkerModel","MarkPointModel$1","hasXOrY","hasXAndY","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","calcDataDim","numCalculate","coordArrValue","numberUtil.getPrecision","markerTypeCalculator","dataTransform","getAxisInfo","coordInfo","dataDimToCoordDim","dataDim","dimItem","zoneFilter","item1","item2","createMarkerDimValueGetter","inCoordSys","parseDataValue","valueDataDim","sum_1","count_1","MarkerView","markerGroupMap","drawGroup","seriesModelList","isBlur","enterBlur","leaveBlur","MarkerView$1","updateMarkerLayout","mpData","xPx","yPx","MarkPointView","markPointModel","mpModel","symbolDrawMap","createData","dataParams","getVisualFromData","coordDimsInfos","dataOpt","markerHelper.dataTransform","markerHelper.dataFilter","dimValueGetter","markerHelper.createMarkerDimValueGetter","MarkPointView$1","MarkLineModel","MarkLineModel$1","markLineTransform","mlModel","itemArray","mlType","retrieve","markerHelper.getAxisInfo","getStackedDimension","markerHelper.numCalculate","valueIndex","baseIndex","mlFrom","mlTo","normalizedItem","isInfinity","ifMarkLineHasOnlyDim","fromCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","isFrom","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","mlData","createList","fromData","toData","updateDataVisualAndLayout","optData","MarkLineView$1","MarkAreaModel","MarkAreaModel$1","markAreaTransform","maModel","item0","lt","rb","ltCoord","rbCoord","ifMarkAreaHasOnlyDim","markAreaFilter","markerHelper.zoneFilter","getSingleMarkerEndPoint","pointValue0","pointValue1","clampPointValue0","clampPointValue1","pointValue","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","xAxisScale","yAxisScale","xPointExtent","yPointExtent","overlapped","allClipped","colorUtil.modifyAlpha","coordDimsInfos_1","MarkAreaView$1","InsideZoomModel","InsideZoomModel$1","setViewInfoToCoordSysRecord","getRange","coordSysRecord","dzInfo","disposeCoordSysRecordIfNeeded","coordSysRecordMap","coordSysKeyArr","coordSysKey","dataZoomInfoMap","dzUid","disposeCoordSysRecord","createCoordSysRecord","containsPoint","event","mergeControllerParams","controlType","typePriority","preventDefaultMouseMove","dataZoomInfo","oneType","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","roams.setViewInfoToCoordSysRecord","getRangeHandlers","roams.disposeCoordSysRecordIfNeeded","coordSysMainType","lastRange","directionInfo","getDirectionInfo","percentPoint","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","InsideZoomView$1","SliderZoomModel","SliderZoomModel$1","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","throttle.createOrUpdate","throttle.clear","barGroup","showMoveHandle","moveHandleSize","coordRect","ecSize","positionInfo","layout.getLayoutParams","layoutRect","location","targetAxisModel","sliderGroup","otherAxisInverse","brushSelect","clickPanel","oldSize","candlestickDim","polygonPts","polylinePts","otherDataExtent_1","otherOffset","otherShadowExtent_1","thisShadowExtent","areaPoints_1","linePoints_1","step_1","thisCoord_1","stride_1","lastIsEmpty_1","isEmpty","otherCoord","createDataShadowGroup","isSelectedArea","showDataShadow","thisAxis","getOtherDim","displayables","handles","handleLabels","filler","handleIndex","symbolBuildProxies","getCursor","bRect","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandleIcon","moveZoneExpandSize","viewExtent","handleEnds","viewExtend","nonRealtime","displaybles","handleInterval","handle","handleHeight","dataShadowSegs","segIntervals","segGroup","labelTexts","dataInterval","orderedHandleEnds","setLabel","barTransform","textPoint","labelPrecision","valueStr","showOrHide","eventTool.stop","changed","realtime","localPoint","brushRect","brushShape","brushEndTime","brushStart","endPoint","startPoint","coordSysInfoList","thisDim","SliderZoomView$1","installDataZoomInside","installDataZoomSlider","DEFAULT_OPTION","ariaVisual","ariaModel","setDecal","decalModel","useDecal","paletteScopeGroupByType_1","decalScope","paletteDecal","specifiedDecal","mergeDecal","dataAll_1","idxMap_1","decalScope_1","dataCount_1","resultDecal","labelLocale","dom","seriesCnt","maxDataCnt","maxSeriesCnt","displaySeriesCnt","ariaLabel","getTitle","withTitle","replace","seriesLabels_1","seriesLabel","withName","getSeriesTypeName","partialLabel","middleSeparator_1","endSeparator_1","dataLabels","dataLabel","separatorModel","middleSeparator","endSeparator","keyValues","typeNames","ariaPreprocessor","aria","RELATIONAL_EXPRESSION_OP_ALIAS_MAP","RegExpEvaluator","rVal","condValue","isRegExp","lVal","ConstConditionInternal","AndConditionInternal","OrConditionInternal","NotConditionInternal","RelationalConditionInternal","needParse","getValue","tarValRaw","tarValParsed","parseOption","exprOption","getters","cond","isObjectNotArray","parseAndOrOption","parseNotOption","parseRelationalOption","op","subOptionArr","subOption","valueGetterParam","subCondList","exprKeys","parserName","valueParser","getRawValueParser","keyRaw","condValueRaw","condValueParsed","evaluator","createFilterComparator","ConditionalExpressionParsed","parseConditionalExpression","filterTransform","rawItem","condition","dimLoose","param","resultData","sortTransform","orderExprList","orderDefList","orderExpr","incomparable","errMsg_1","errMsg_2","parser","SortOrderComparator","sourceFormat","SOURCE_FORMAT_OBJECT_ROWS","orderDef","val0","val1","CMD","aroundEqual","pathToBezierCurves","bezierArrayGroups","currentSubpath","xi","yi","createNewSubpath","addLine","addArc","c1","s1","c2","s2","x4","y4","hx","hy","nextAngle","adpativeBezier","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","dx1","dy1","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","d1Sqr","d2Sqr","tmpSegX","tmpSegY","cubicSubdivide","pathToPolygons","polygons","beziers","getDividingGrids","dimSize","rowDim","rowSize","columnSize","rowCount","columnCount","grids","currentCount","remained","divideSector","outShapes","arcLen","deltaR","isAngleRow","newShape","divideRect","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","b1a1x","b1a1y","Point","projPtOnLine","lineA","lineB","dir2","addToPoly","poly","splitPolygonByLine","intersections","intersectionPt","splitPt0","splitPt1","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","binaryDividePolygon","polygonShape","fromPoints","pt0","pt1","binaryDivideRecursive","divider","mid","sub","clonePath","copyPathProps","polygonConvert","split","OutShapeCtor","Sector","polygonCount","totalArea_1","left","selfCount","Polygon","subPath","alignSubpath","subpath1","subpath2","len1","len2","shorterPath","shorterLen","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastY","alignBezierCurves","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","reverse","newArr","findBestMorphingRotation","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","isCombineMorphing","SAVED_METHOD_PREFIX","saveAndModifyMethod","modifiers","savedMethodName","originalMethod","after","args","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","updateIdentityTransform","morphingData","onet","newCp","lerp","x0_1","y0_1","morphPath","oldDone","oldDuring","restoreToPath","hilbert","bits","sortPaths","pathList","xMin","yMin","xMax","yMax","cps","defaultDividePath","createEmptyReturn","combineMorph","fromList","fromPathList","addFromPath","separateCount","dividePath","toSubPathList","individualDelay","identityTransform","Transformable","addToSubPathListToZr","toLen","animating_1","eachDone","indivdualAnimationOpts","separateMorph","toPathList","fromLen","isMultiple","prepareMorphBatches","one","many","batches","batchCount","moveFrom","pathDividers","approxOpacity","cloned","applyMorphAnimation","divideShape","animateOtherProps","updateAnimationCfg","animationDelay","morphOneBatch","fromIsMany","animateIndex","animateCount","forceManyOne","batchMany","batchOne","batchFrom","batchTo","individualAnimationCfg","separateAnimationCfg","fromIndividuals","toIndividuals","morphBatches","getPathList","pathList_1","DATA_COUNT_THRESHOLD","TRANSITION_NONE","TRANSITION_P2C","TRANSITION_C2P","getUniversalTransitionGlobalStore","getDimension","visualDimension","getValueByDimension","dimOrdinalMeta","getGroupId","dataGroupId","isChild","groupIdDim","groupId","rawDataItem","property","flattenDataDiffItems","seriesInfo","fadeInElement","newSeries","initProps","computedTransform","stopAnimation","animateElementStyles","animationConfig","oldStyle","getOldStyle","isAllIdSame","oldDiffItems","newDiffItems","oldItem","transitionBetween","oldList","updateMorphingPathProps","rawFrom","rawTo","hasMorphAnimation","oldGroupIds","oldChildGroupIds","newGroupId","newChildGroupId","createKeyGetter","isOld","onlyGetId","diffItem","useId","isElementStillInChart","updateOneToOne","oldIndices","oldElsList","newIndices","newElsList","newSeris","getSeriesTransitionKey","seriesKey","convertArraySeriesKeyToString","getDivideShapeFromData","findTransitionSeriesBatches","globalStore","updateBatches","oldDataMap","oldDataMapForSplit","oldDataGroupId","transitionKey","transitionKeyStr","newDataGroupId","oldSeries_1","oldData_1","querySeries","transitionSeriesFromOpt","transitionOpt","installUniversalTransition","ecMOdel","transOpt","SERIES_UNIVERSAL_TRANSITION_PROP","updateBatches_1","allSeries","savedSeries","savedDataGroupIds","savedData","CanvasRenderer","SVGRenderer","LineChart","BarChart","PieChart","ScatterChart","RadarChart","MapChart","TreeChart","TreemapChart","GraphChart","GaugeChart","FunnelChart","ParallelChart","SankeyChart","BoxplotChart","CandlestickChart","EffectScatterChart","LinesChart","HeatmapChart","PictorialBarChart","ThemeRiverChart","SunburstChart","CustomChart","GridComponent","PolarComponent","GeoComponent","SingleAxisComponent","ParallelComponent","CalendarComponent","GraphicComponent","ToolboxComponent","TooltipComponent","AxisPointerComponent","BrushComponent","TitleComponent","TimelineComponent","MarkPointComponent","MarkLineComponent","MarkAreaComponent","LegendComponent","DataZoomComponent","DataZoomInsideComponent","DataZoomSliderComponent","VisualMapComponent","VisualMapContinuousComponent","VisualMapPiecewiseComponent","AriaComponent","TransformComponent","DatasetComponent","UniversalTransition","LabelLayout"],"mappings":"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"}