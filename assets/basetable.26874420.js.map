{"version":3,"file":"basetable.26874420.js","sources":["../../src/views/table/basetable.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'basetable',\n})\n</script>\n<template>\r\n\t<div>\r\n\t\t<TableSearch :query=\"query\" :options=\"searchOpt\" :search=\"handleSearch\" />\r\n\t\t<div class=\"container\">\r\n\t\t\t<TableCustom :columns=\"columns\" :tableData=\"tableData\" :total=\"page.total\" :viewFunc=\"handleView\"\r\n\t\t\t\t:delFunc=\"handleDelete\" :editFunc=\"handleEdit\" :refresh=\"getData\" :currentPage=\"page.index\"\r\n\t\t\t\t:changePage=\"changePage\">\r\n\t\t\t\t<template #toolbarBtn>\r\n\t\t\t\t\t<el-button type=\"warning\" :icon=\"CirclePlusFilled\" @click=\"visible = true\">新增</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template #money=\"{ rows }\">\r\n\t\t\t\t\t￥{{ rows.money }}\r\n\t\t\t\t</template>\r\n\t\t\t\t<template #thumb=\"{ rows }\">\r\n\t\t\t\t\t<el-image class=\"table-td-thumb\" :src=\"rows.thumb\" :z-index=\"10\" :preview-src-list=\"[rows.thumb]\"\r\n\t\t\t\t\t\tpreview-teleported>\r\n\t\t\t\t\t</el-image>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template #state=\"{ rows }\">\r\n\t\t\t\t\t<el-tag :type=\"rows.state ? 'success' : 'danger'\">\r\n\t\t\t\t\t\t{{ rows.state ? '正常' : '异常' }}\r\n\t\t\t\t\t</el-tag>\r\n\t\t\t\t</template>\r\n\t\t\t</TableCustom>\r\n\r\n\t\t</div>\r\n\t\t<el-dialog :title=\"isEdit ? '编辑' : '新增'\" v-model=\"visible\" width=\"700px\" destroy-on-close\r\n\t\t\t:close-on-click-modal=\"false\" @close=\"closeDialog\">\r\n\t\t\t<TableEdit :form-data=\"rowData\" :options=\"options\" :edit=\"isEdit\" :update=\"updateData\">\r\n\t\t\t\t<template #thumb=\"{ rows }\">\r\n\t\t\t\t\t<img class=\"table-td-thumb\" :src=\"rows.thumb\"></img>\r\n\t\t\t\t</template>\r\n\t\t\t</TableEdit>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog title=\"查看详情\" v-model=\"visible1\" width=\"700px\" destroy-on-close>\r\n\t\t\t<TableDetail :data=\"viewData\">\r\n\t\t\t\t<template #thumb=\"{ rows }\">\r\n\t\t\t\t\t<el-image :src=\"rows.thumb\"></el-image>\r\n\t\t\t\t</template>\r\n\t\t\t</TableDetail>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"basetable\">\r\nimport { ref, reactive } from 'vue';\r\nimport { ElMessage, } from 'element-plus';\r\nimport { CirclePlusFilled } from '@element-plus/icons-vue';\r\nimport { fetchData } from '@/api/index';\r\nimport TableCustom from '@/components/table-custom.vue';\r\nimport TableDetail from '@/components/table-detail.vue';\r\nimport TableSearch from '@/components/table-search.vue';\r\nimport { TableItem } from '@/types/table';\r\nimport { FormOption, FormOptionList } from '@/types/form-option';\r\n\r\n// 查询相关\r\nconst query = reactive({\r\n\tname: '',\r\n});\r\nconst searchOpt = ref<FormOptionList[]>([\r\n\t{ type: 'input', label: '用户名：', prop: 'name' }\r\n])\r\nconst handleSearch = () => {\r\n\tchangePage(1);\r\n};\r\n\r\n// 表格相关\r\nlet columns = ref([\r\n\t{ type: 'selection' },\r\n\t{ type: 'index', label: '序号', width: 55, align: 'center' },\r\n\t{ prop: 'name', label: '用户名' },\r\n\t{ prop: 'money', label: '账户余额' },\r\n\t{ prop: 'thumb', label: '头像' },\r\n\t{ prop: 'state', label: '账户状态' },\r\n\t{ prop: 'operator', label: '操作', width: 250 },\r\n])\r\nconst page = reactive({\r\n\tindex: 1,\r\n\tsize: 10,\r\n\ttotal: 200,\r\n})\r\nconst tableData = ref<TableItem[]>([]);\r\nconst getData = async () => {\r\n\tconst res = await fetchData()\r\n\ttableData.value = res.data.list;\r\n};\r\ngetData();\r\n\r\nconst changePage = (val: number) => {\r\n\tpage.index = val;\r\n\tgetData();\r\n};\r\n\r\n// 新增/编辑弹窗相关\r\nlet options = ref<FormOption>({\r\n\tlabelWidth: '100px',\r\n\tspan: 24,\r\n\tlist: [\r\n\t\t{ type: 'input', label: '用户名', prop: 'name', required: true },\r\n\t\t{ type: 'number', label: '账户余额', prop: 'money', required: true },\r\n\t\t{ type: 'switch', activeText: '正常', inactiveText: '异常', label: '账户状态', prop: 'state', required: true },\r\n\t\t{ type: 'upload', label: '头像', prop: 'thumb', required: true },\r\n\t]\r\n})\r\nconst visible = ref(false);\r\nconst isEdit = ref(false);\r\nconst rowData = ref({});\r\nconst handleEdit = (row: TableItem) => {\r\n\trowData.value = { ...row };\r\n\tisEdit.value = true;\r\n\tvisible.value = true;\r\n};\r\nconst updateData = () => {\r\n\tcloseDialog();\r\n\tgetData();\r\n};\r\n\r\nconst closeDialog = () => {\r\n\tvisible.value = false;\r\n\tisEdit.value = false;\r\n};\r\n\r\n// 查看详情弹窗相关\r\nconst visible1 = ref(false);\r\nconst viewData = ref({\r\n\trow: {},\r\n\tlist: []\r\n});\r\nconst handleView = (row: TableItem) => {\r\n\tviewData.value.row = { ...row }\r\n\tviewData.value.list = [\r\n\t\t{\r\n\t\t\tprop: 'id',\r\n\t\t\tlabel: '用户ID',\r\n\t\t},\r\n\t\t{\r\n\t\t\tprop: 'name',\r\n\t\t\tlabel: '用户名',\r\n\t\t},\r\n\t\t{\r\n\t\t\tprop: 'money',\r\n\t\t\tlabel: '账户余额',\r\n\t\t},\r\n\t\t{\r\n\t\t\tprop: 'state',\r\n\t\t\tlabel: '账户状态',\r\n\t\t},\r\n\t\t{\r\n\t\t\tprop: 'thumb',\r\n\t\t\tlabel: '头像',\r\n\t\t},\r\n\t]\r\n\tvisible1.value = true;\r\n};\r\n\r\n// 删除相关\r\nconst handleDelete = (row: TableItem) => {\r\n\tElMessage.success('删除成功');\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.table-td-thumb {\r\n\tdisplay: block;\r\n\tmargin: auto;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n}\r\n</style>\r\n"],"names":["__default__","defineComponent","query","reactive","searchOpt","ref","handleSearch","changePage","columns","page","tableData","getData","res","fetchData","val","options","visible","isEdit","rowData","handleEdit","row","updateData","closeDialog","visible1","viewData","handleView","handleDelete","ElMessage"],"mappings":"02BAEAA,EAAAC,EAAA,CAA+B,KAAA,WAE/B,CAAA,sBA0DA,MAAAC,EAAAC,EAAA,CAAuB,KAAA,EAChB,CAAA,EAEPC,EAAAC,EAAA,CAAwC,CAAA,KAAA,QAAA,MAAA,2BAAA,KAAA,MAAA,CACM,CAAA,EAE9CC,EAAA,IAAA,CACCC,EAAA,CAAA,CAAY,EAIb,IAAAC,EAAAH,EAAA,CAAkB,CAAA,KAAA,WAAA,EACG,CAAA,KAAA,QAAA,MAAA,eAAA,MAAA,GAAA,MAAA,QAAA,EACqC,CAAA,KAAA,OAAA,MAAA,oBAAA,EAC5B,CAAA,KAAA,QAAA,MAAA,0BAAA,EACE,CAAA,KAAA,QAAA,MAAA,cAAA,EACF,CAAA,KAAA,QAAA,MAAA,0BAAA,EACE,CAAA,KAAA,WAAA,MAAA,eAAA,MAAA,GAAA,CACa,CAAA,EAE7C,MAAAI,EAAAN,EAAA,CAAsB,MAAA,EACd,KAAA,GACD,MAAA,GACC,CAAA,EAERO,EAAAL,EAAA,CAAA,CAAA,EACAM,EAAA,SAAA,CACC,MAAAC,EAAA,MAAAC,IACAH,EAAA,MAAAE,EAAA,KAAA,IAA2B,EAE5BD,IAEA,MAAAJ,EAAAO,GAAA,CACCL,EAAA,MAAAK,EACAH,GAAQ,EAIT,IAAAI,EAAAV,EAAA,CAA8B,WAAA,QACjB,KAAA,GACN,KAAA,CACA,CAAA,KAAA,QAAA,MAAA,qBAAA,KAAA,OAAA,SAAA,EAAA,EACuD,CAAA,KAAA,SAAA,MAAA,2BAAA,KAAA,QAAA,SAAA,EAAA,EACG,CAAA,KAAA,SAAA,WAAA,eAAA,aAAA,eAAA,MAAA,2BAAA,KAAA,QAAA,SAAA,EAAA,EACsC,CAAA,KAAA,SAAA,MAAA,eAAA,KAAA,QAAA,SAAA,EAAA,CACxC,CAC9D,CAAA,EAED,MAAAW,EAAAX,EAAA,EAAA,EACAY,EAAAZ,EAAA,EAAA,EACAa,EAAAb,EAAA,CAAA,CAAA,EACAc,EAAAC,GAAA,CACCF,EAAA,MAAA,CAAA,GAAAE,GACAH,EAAA,MAAA,GACAD,EAAA,MAAA,EAAgB,EAEjBK,EAAA,IAAA,CACCC,IACAX,GAAQ,EAGTW,EAAA,IAAA,CACCN,EAAA,MAAA,GACAC,EAAA,MAAA,EAAe,EAIhBM,EAAAlB,EAAA,EAAA,EACAmB,EAAAnB,EAAA,CAAqB,IAAA,CAAA,EACd,KAAA,CAAA,CACC,CAAA,EAERoB,EAAAL,GAAA,CACCI,EAAA,MAAA,IAAA,CAAA,GAAAJ,CAAA,EACAI,EAAA,MAAA,KAAA,CAAsB,CACrB,KAAA,KACO,MAAA,gBACC,EACR,CACA,KAAA,OACO,MAAA,oBACC,EACR,CACA,KAAA,QACO,MAAA,0BACC,EACR,CACA,KAAA,QACO,MAAA,0BACC,EACR,CACA,KAAA,QACO,MAAA,cACC,CACR,EAEDD,EAAA,MAAA,EAAiB,EAIlBG,EAAAN,GAAA,CACCO,EAAA,QAAA,0BAAA,CAAwB"}